<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>在阅读中遇见自己</title>
        <link>https://freerun.xyz/</link>
        <description>这是我的全新 博客 网站</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>823715972@qq.com (Ylimhs)</managingEditor>
            <webMaster>823715972@qq.com (Ylimhs)</webMaster><lastBuildDate>Tue, 17 May 2022 21:58:32 &#43;0800</lastBuildDate>
            <atom:link href="https://freerun.xyz/index.xml" rel="self" type="application/rss+xml" />
        <item>
    <title>Navicat_premium破解</title>
    <link>https://freerun.xyz/navicat_premium%E7%A0%B4%E8%A7%A3/</link>
    <pubDate>Tue, 17 May 2022 21:58:32 &#43;0800</pubDate>
    <author>Ylimhs</author>
    <guid>https://freerun.xyz/navicat_premium%E7%A0%B4%E8%A7%A3/</guid>
    <description><![CDATA[<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>注意<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">1.运行注册机时最好关闭电脑的杀毒软件；</br>
2.运行注册机请断网，无需将注册机放到Navicat Premium安装目录下；</br>
3.请选择对各个版本，Products那块；</br>
4.安装完成后不要运行软件，然后打开注册机。</div>
        </div>
    </div>
<h1 id="下载navicat安装包">下载Navicat安装包</h1>
<p><a href="/package//navicat150_premium_cs_x64.exe" rel="">下载Navicat安装包</a>
</p>
<h1 id="激活方法">激活方法</h1>
<p><a href="/package/Navicat_Keygen_Patch_v5.6.0_DFoX.exe" rel="">下载注册机</a>
</p>
<p><code>1、运行注册机勾选Backup、Host和Navicat v15，如图所示。然后点击Patch按钮，找到Navicat Premium 15安装路径下的navicat.exe，选中并点击打开，此时会提示：navicat.exe - x64 -&gt; Cracked，提示已破解。</code></p>
<p><code>2、点击下图的红色箭头所指的Generate，将自动生成Serial Keygen（即注册码），然后复制上。</code></p>
<p></p>
<p><code>3、现在打开Navicat Premium 15，点击注册（或菜单栏的帮助——》注册），输入上一步生成的注册码，然后点击激活，紧接着点手动激活。</code>
<code>4、将Navicat手动激活窗口的请求码框中内容复制到注册机Request Code框中，点击Activation Code下面的Generate按钮。</code></p>
<p></p>
<p><code>5、将注册机Activation Code处生成的激活码内容复制到Navicat激活码框中激活即可。</code></p>
]]></description>
</item>
<item>
    <title>LoveIt主题美化与博客功能增强 第一章</title>
    <link>https://freerun.xyz/loveit%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E4%B8%8E%E5%8D%9A%E5%AE%A2%E5%8A%9F%E8%83%BD%E5%A2%9E%E5%BC%BA-%E7%AC%AC%E4%B8%80%E7%AB%A0/</link>
    <pubDate>Mon, 16 May 2022 15:03:29 &#43;0800</pubDate>
    <author>Ylimhs</author>
    <guid>https://freerun.xyz/loveit%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96%E4%B8%8E%E5%8D%9A%E5%AE%A2%E5%8A%9F%E8%83%BD%E5%A2%9E%E5%BC%BA-%E7%AC%AC%E4%B8%80%E7%AB%A0/</guid>
    <description><![CDATA[<h1 id="loveit主题美化与博客功能增强-第一章">LoveIt主题美化与博客功能增强 第一章</h1>
<h2 id="前言">前言</h2>
<p>本博客使用的是Hugo的LoveIt主题，本文也是基于该主题而写的，不过Hugo的美化步骤应该大同小异，版本如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">hugo: v0.74.2/extended windows/amd64 BuildDate: unknown

LoveIt: v0.2.10
</code></pre></td></tr></table>
</div>
</div><p><strong>请注意，本文的所有功能都离不开两个新增加的文件：<code>_custom.scss</code>和<code>custom.js</code>，部分功能还需要<code>jquery</code>，在第一章中会提及如何引入。</strong></p>
<p>另外本文篇幅太长，阅读体验不好，将其进行分章如下：</p>
<ul>
<li><a href="/posts/hugo-3.html/" rel="">Hugo系列(3.0) - LoveIt主题美化与博客功能增强 · 第一章</a>
</li>
<li><a href="/posts/hugo-3.1.html/" rel="">Hugo系列(3.1) - LoveIt主题美化与博客功能增强 · 第二章</a>
</li>
<li><a href="/posts/hugo-3.2.html/" rel="">Hugo系列(3.2) - LoveIt主题美化与博客功能增强 · 第三章</a>
</li>
<li><a href="/posts/hugo-3-3/" rel="">Hugo系列(3.3) - LoveIt主题美化与博客功能增强 · 第四章</a>
</li>
</ul>
<h2 id="添加自定义的_customscss">添加自定义的<code>_custom.scss</code></h2>
<p>LoveIt主题提供了一个自定义的<code>_custom.scss</code>，可以在该文件里添加自定义的css样式。该文件目录位于<code>\themes\LoveIt\assets\css\_custom.scss</code>，不建议直接在该文件里写css代码。</p>
<p>Hugo在渲染页面时优先读取站点根目录下的同名字的目录和文件，所以可以利用这个特点来美化主题。<strong>只需要把想修改的主题模板文件拷贝到根目录下同样的目录中并进行修改，这样就可以在不改动原本的主题文件的情况下实现主题美化。</strong></p>
<p>首先在站点根目录下创建一个自定义的文件：<code>\assets\css\_custom.scss</code>，这样Hugo就会最终以该文件来渲染页面的样式。</p>
<p>这是我个人站点的<a href="https://lewky.cn/css/_custom.scss" target="_blank" rel="noopener noreffer">_custom.scss文件</a>
，有兴趣的可以看看。</p>
<h3 id="注意">注意！！！</h3>
<p>这里有个很关键的点，只有使用的是扩展版本的Hugo，才能令<code>_custom.scss</code>文件生效！！！因为原生的Hugo并不支持编译sass文件，必须使用扩展版本的Hugo才行。</p>
<p>所以请查看你所使用的Hugo版本，如果不是<code>hugo_extended</code>版本，请前往<a href="https://github.com/gohugoio/hugo/releases" target="_blank" rel="noopener noreffer">Hugo Release页面</a>
下载你当前版本Hugo所对应的<code>hugo_extended</code>版本。</p>
<p>比如我原本使用的是<code>hugo_0.74.0_Windows-64bit.zip</code>，就需要改为使用<code>hugo_extended_0.74.0_Windows-64bit.zip</code>。</p>
<p>此外，本文会涉及多个文件的修改，包括hmtl、js、scss等文件类型，且由于<strong>引入了中文字符</strong>，可能导致页面<strong>显示乱码</strong>，这是因为文件的编码使用的是<code>ANSI</code>，<strong>需要改为<code>UTF-8</code>的编码</strong>。</p>
<h2 id="添加自定义的customjs">添加自定义的<code>custom.js</code></h2>
<p>LoveIt主题并没有提供一个文件来让我们自定义JavaScript，所以需要自己创建一个js文件来自定义JavaScript。</p>
<p>首先在站点根目录下创建一个自定义的JavaScript文件：<code>\static\js\custom.js</code>。这个文件需要在body的闭合标签之前引入，并且要在<code>theme.min.js</code>的引入顺序之后。这样可以防止样式被其他文件覆盖，并且不会因为JavaScript文件假装太久导致页面长时间的空白。</p>
<p>对于LoveIt主题，<code>custom.js</code>添加在<code>\themes\LoveIt\layouts\partials\assets.html</code>里。</p>
<p>首先把该文件拷贝到根目录下的<code>\layouts\partials\assets.html</code>，然后打开拷贝后的文件，把自定义的JavaScript文件添加到最末尾的<code>{{- partial &quot;plugin/analytics.html&quot; . -}}</code>的上一行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">{{- /* 自定义的js文件 */ -}}
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/js/custom.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>由于本文提及的部分功能会用到jQuery，建议一起引入，最终如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js&#34;&gt;&lt;/script&gt;

{{- /* 自定义的js文件 */ -}}
&lt;script type=&#34;text/javascript&#34; src=&#34;https://freerun.xyz/js/custom.js&#34;&gt;&lt;/script&gt;
</code></pre></td></tr></table>
</div>
</div><p>如果有其他的JavaScript文件要引入，加在一样的地方就行，但是要放在自定义的<code>custom.js</code>之前。这是我的<a href="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/js/custom.js" target="_blank" rel="noopener noreffer">custom.js文件</a>
，有兴趣的可以看看。</p>
<h2 id="添加全局cdn变量">添加全局cdn变量</h2>
<p>对于一些静态资源，比如图片、音乐文件、第三方库等，如果有自己的cdn或者图床等，可以在站点配置文件自定义一个cdn变量，如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[params]
  # cdn变量，末尾不需要加/
  cdnPrefix = &#34;http://xxxx&#34;
</code></pre></td></tr></table>
</div>
</div><p>接下来就可以在你需要的地方使用该变量，大概有如下3种用法。</p>
<h3 id="在md文件中使用">在md文件中使用</h3>
<p>在md文件中可以用内置的shortcodes来使用该变量：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">{{&lt; param cdnPrefix &gt;}}

![avatar.jpg]({{&lt; param cdnPrefix &gt;}}/images/avatar.jpg)
</code></pre></td></tr></table>
</div>
</div><h3 id="在模板文件中使用">在模板文件中使用</h3>
<p>在<code>layouts</code>目录下有很多html文件，这些是用来渲染站点的模板文件，可以用Hugo的语法来引入该变量：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">{{ .Site.Params.cdnPrefix }}
</code></pre></td></tr></table>
</div>
</div><p>如果在一个模板文件里有多个地方使用到该变量，可以定义一个局部变量来使用：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">{{- $cdn := .Site.Params.cdnPrefix -}}

/* 使用局部变量 */
{{ $cdn }}
</code></pre></td></tr></table>
</div>
</div><h3 id="在javascript文件中使用">在JavaScript文件中使用</h3>
<p>由于JavaScript文件中不能使用上述的shortcodes或Hugo语法来引用变量，只能通过在<code>\layouts\partials\assets.html</code>中用JavaScript语法来引入该变量，如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">/* 这是可以应用于JavaScript文件的全局变量 */
&lt;script&gt;
	/* cdn for some static resources */
	var $cdnPrefix = {{ .Site.Params.cdnPrefix }};
&lt;/script&gt;
</code></pre></td></tr></table>
</div>
</div><p>这样就可以在其他被引入的JavaScript文件中使用这个<code>$cdnPrefix</code>变量：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
	<span class="nx">$</span><span class="p">.</span><span class="nx">backstretch</span><span class="p">([</span>
		  <span class="nx">$cdnPrefix</span> <span class="o">+</span> <span class="s2">&#34;/images/background/saber1.jpg&#34;</span>
	<span class="p">],</span> <span class="p">{</span> <span class="nx">duration</span><span class="o">:</span> <span class="mi">60000</span><span class="p">,</span> <span class="nx">fade</span><span class="o">:</span> <span class="mi">1500</span> <span class="p">});</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>如果是想在模板文件里引入某个自定义的JavaScript文件，如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">{{</span><span class="o">-</span> <span class="cm">/* 自定义的js文件 */</span> <span class="o">-</span><span class="p">}}</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;text/javascript&#34;</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&#34;{{ .Site.Params.cdnPrefix }}/js/custom.js&#34;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="主题自带的admonition样式">主题自带的admonition样式</h2>
<p>LoveIt提供了<code>admonition</code> shortcode，支持 <strong>12</strong> 种样式，可以在页面中插入提示的横幅。代码如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">{{&lt; admonition &gt;}}
一个 **注意** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition abstract &gt;}}
一个 **摘要** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition info &gt;}}
一个 **信息** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition tip &gt;}}
一个 **技巧** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition success &gt;}}
一个 **成功** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition question &gt;}}
一个 **问题** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition warning &gt;}}
一个 **警告** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition failure &gt;}}
一个 **失败** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition danger &gt;}}
一个 **危险** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition bug &gt;}}
一个 **Bug** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition example &gt;}}
一个 **示例** 横幅
{{&lt; /admonition &gt;}}

{{&lt; admonition quote &gt;}}
一个 **引用** 横幅
{{&lt; /admonition &gt;}}
</code></pre></td></tr></table>
</div>
</div><p>效果如下：
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>注意<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>注意</strong> 横幅</div>
        </div>
    </div></p>
<div class="details admonition abstract open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ul fa-fw" aria-hidden="true"></i>摘要<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>摘要</strong> 横幅</div>
        </div>
    </div>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw" aria-hidden="true"></i>信息<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>信息</strong> 横幅</div>
        </div>
    </div>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>技巧<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>技巧</strong> 横幅</div>
        </div>
    </div>
<div class="details admonition success open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-check-circle fa-fw" aria-hidden="true"></i>成功<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>成功</strong> 横幅</div>
        </div>
    </div>
<div class="details admonition question open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-question-circle fa-fw" aria-hidden="true"></i>问题<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>问题</strong> 横幅</div>
        </div>
    </div>
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw" aria-hidden="true"></i>警告<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>警告</strong> 横幅</div>
        </div>
    </div>
<div class="details admonition failure open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-times-circle fa-fw" aria-hidden="true"></i>失败<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>失败</strong> 横幅</div>
        </div>
    </div>
<div class="details admonition danger open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-skull-crossbones fa-fw" aria-hidden="true"></i>危险<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>危险</strong> 横幅</div>
        </div>
    </div>
<div class="details admonition bug open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-bug fa-fw" aria-hidden="true"></i>Bug<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>Bug</strong> 横幅</div>
        </div>
    </div>
<div class="details admonition example open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ol fa-fw" aria-hidden="true"></i>示例<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>示例</strong> 横幅</div>
        </div>
    </div>
<div class="details admonition quote open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-quote-right fa-fw" aria-hidden="true"></i>引用<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">一个 <strong>引用</strong> 横幅</div>
        </div>
    </div>
<h2 id="自定义404页面">自定义404页面</h2>
<p>主题默认的404页面太普通，可以通过新增<code>\layouts\404.html</code>来自定义自己想要的404页面。这是本站的<a href="https://lewky.cn/404.html" target="_blank" rel="noopener noreffer">404页面</a>
，有兴趣的可以看看<a href="https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/404.html" target="_blank" rel="noopener noreffer">源码页面</a>
。</p>
<h2 id="添加背景图片轮播">添加背景图片轮播</h2>
<p>这个功能需要引入图片轮播插件<code>jquery-backstretch</code>的cdn，并且该插件依赖于jQuery，需要在引入该插件之前引入jQuery。</p>
<p>打开<code>\layouts\partials\assets.html</code>，在你引入的<code>custom.js</code>的上面一行添加如下代码（必须要在custom.js之前引入这两个文件才有效果）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>然后在<code>custom.js</code>里添加如下代码，具体想要轮播哪些图片可以自行修改，如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/* 轮播背景图片 */</span>
<span class="nx">$</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
	<span class="nx">$</span><span class="p">.</span><span class="nx">backstretch</span><span class="p">([</span>
		  <span class="s2">&#34;/images/background/saber1.jpg&#34;</span><span class="p">,</span>
		  <span class="s2">&#34;/images/background/saber2.jpg&#34;</span><span class="p">,</span>
		  <span class="s2">&#34;/images/background/wlop.jpg&#34;</span>
	<span class="p">],</span> <span class="p">{</span> <span class="nx">duration</span><span class="o">:</span> <span class="mi">60000</span><span class="p">,</span> <span class="nx">fade</span><span class="o">:</span> <span class="mi">1500</span> <span class="p">});</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="添加搜索功能">添加搜索功能</h2>
<p><code>LoveIt</code>主题自带的搜索插件是<code>lunr</code>和<code>algolia</code>，这两个的使用都比较麻烦，后者甚至还想要去注册账号，虽然可以免费使用搜索服务，但是抓取收录时间好像是一小时一次，并且还有每月使用量的限制，太不便利了。</p>
<p>之前在Hexo那边用的是自带的搜索插件，是每次部署时自动为所有文章生成索引到一个文件里，然后直接搜索该文件来实现本地搜索功能。这个还是比较方便个人站点使用的，于是在网上找到了类似的一个Hugo专用的搜索插件<a href="https://github.com/kaushalmodi/hugo-search-fuse-js" target="_blank" rel="noopener noreffer">hugo-search-fuse-js</a>
。</p>
<h3 id="安装搜索插件hugo-search-fuse-js到本地">安装搜索插件hugo-search-fuse-js到本地</h3>
<p><code>hugo-search-fuse-js</code>并不是一个单独的主题，而是Hugo主题的一个组件：</p>
<ol>
<li>下载<a href="https://github.com/kaushalmodi/hugo-search-fuse-js" target="_blank" rel="noopener noreffer">hugo-search-fuse-js</a>
到站点的主题目录<code>/themes/hugo-search-fuse-js</code>下，<strong>注意，目录名必须是<code>hugo-search-fuse-js</code></strong></li>
<li>把该主题组件名字添加到站点配置文件里，<strong>注意，搜索组件名字要在最前面，后面跟着的是你的主题的文件夹名字</strong>：</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">theme = [&#34;hugo-search-fuse-js&#34;, &#34;my-theme&#34;]
</code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>新建一个<code>content/search.md</code>文件，内容如下：</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">+++
title = &#34;Search&#34;
layout = &#34;search&#34;
outputs = [&#34;html&#34;, &#34;json&#34;]
[sitemap]
  priority = 0.1
+++
</code></pre></td></tr></table>
</div>
</div><h3 id="修改页面模板文件baseofhtml">修改页面模板文件baseof.html</h3>
<ol>
<li>把主题目录下的<code>\themes\LoveIt\layouts\_default\baseof.html</code>拷贝到站点根目录下的<code>\layouts\_default\baseof.html</code></li>
<li>在拷贝后的<code>baseof.html</code>的适当位置插入两段代码：<code>{{ block &quot;main&quot; . }}{{ end }}</code>和<code>{{ block &quot;footer&quot; . }}{{ end }}</code>，下面是一个修改后的样例：</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;wrapper&#34;</span><span class="p">&gt;</span>
    {{- partial &#34;header.html&#34; . -}}
    <span class="p">&lt;</span><span class="nt">main</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main&#34;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;container&#34;</span><span class="p">&gt;</span>
			{{ block &#34;main&#34; . }}{{ end }}
            {{- block &#34;content&#34; . }}{{ end -}}
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
    {{- partial &#34;footer.html&#34; . -}}
	{{ block &#34;footer&#34; . }}{{ end }}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="添加搜索按钮">添加搜索按钮</h3>
<p>在站点配置文件里添加一个新的按钮给搜索功能使用，如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[menu]
  [[menu.main]]
    pre = &#34;&lt;i class=&#39;fas fa-fw fa-search&#39;&gt;&lt;/i&gt;&#34;
    name = &#34;搜索&#34;
    weight = 7
    identifier = &#34;search&#34;
    url = &#34;/search/&#34;
</code></pre></td></tr></table>
</div>
</div><p>如果你的配置文件里的菜单属性是多语言的，样例如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[languages]
  [languages.en]
    [languages.en.menu]
      [[languages.en.menu.main]]
	    pre = &#34;&lt;i class=&#39;fas fa-fw fa-search&#39;&gt;&lt;/i&gt;&#34;
	    name = &#34;Search&#34;
	    weight = 7
	    identifier = &#34;search&#34;
	    url = &#34;/search/&#34;
</code></pre></td></tr></table>
</div>
</div><h3 id="关闭loveit主题默认的搜索插件">关闭LoveIt主题默认的搜索插件</h3>
<p>在站点配置文件里把默认的搜索插件关闭，如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[params]
  [params.app]
    [params.search]
      enable = false
</code></pre></td></tr></table>
</div>
</div><p>如果你使用的是多语言的配置，则应该把每个语言的搜索插件都关闭，如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[languages]
  [languages.en]
    [languages.en.params]
      [languages.en.params.search]
        enable = false

  [languages.zh-cn]
    [languages.zh-cn.params]
      [languages.zh-cn.params.search]
        enable = false
</code></pre></td></tr></table>
</div>
</div><h3 id="修改搜索页面的样式">修改搜索页面的样式</h3>
<p>如果对该插件生成的搜索页面样式不满意，可以自行修改，下面是我的样式代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="c">/* 搜索页面 */</span>
<span class="p">.</span><span class="nc">search</span> <span class="p">{</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">relative</span><span class="p">;</span>
    <span class="k">padding-top</span><span class="p">:</span> <span class="mf">3.5</span><span class="kt">rem</span><span class="p">;</span>
    <span class="k">padding-bottom</span><span class="p">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
    <span class="k">width</span><span class="p">:</span> <span class="mf">57.5</span><span class="kt">%</span><span class="p">;</span>
    <span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="kc">auto</span><span class="p">;</span>
    <span class="k">background</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
    <span class="k">opacity</span><span class="p">:</span> <span class="mf">.95</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">[</span><span class="nt">theme</span><span class="o">=</span><span class="nt">dark</span><span class="o">]</span> <span class="p">.</span><span class="nc">search</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="mh">#3a3535</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">[</span><span class="nt">theme</span><span class="o">=</span><span class="nt">dark</span><span class="o">]</span> <span class="p">.</span><span class="nc">search</span> <span class="nt">header</span><span class="o">,</span>
<span class="p">.</span><span class="nc">search</span> <span class="nt">header</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#f8f8f8</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">[</span><span class="nt">theme</span><span class="o">=</span><span class="nt">dark</span><span class="o">]</span> <span class="p">.</span><span class="nc">search</span> <span class="nt">header</span><span class="p">:</span><span class="nd">hover</span><span class="o">,</span>
<span class="p">.</span><span class="nc">search</span> <span class="nt">header</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
    <span class="kp">-webkit-</span><span class="k">box-shadow</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="k">box-shadow</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">search</span> <span class="nt">header</span> <span class="nt">h1</span> <span class="p">{</span>
    <span class="k">padding-left</span><span class="p">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
    <span class="k">background</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">[</span><span class="nt">theme</span><span class="o">=</span><span class="nt">dark</span><span class="o">]</span> <span class="p">.</span><span class="nc">search</span> <span class="nt">header</span> <span class="nt">h1</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="mh">#3a3535</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">[</span><span class="nt">theme</span><span class="o">=</span><span class="nt">dark</span><span class="o">]</span> <span class="p">.</span><span class="nc">search</span> <span class="nt">input</span><span class="o">,</span>
<span class="p">.</span><span class="nc">search</span> <span class="nt">input</span> <span class="p">{</span>
	<span class="k">height</span><span class="p">:</span> <span class="kc">initial</span><span class="p">;</span>
    <span class="k">width</span><span class="p">:</span> <span class="kc">initial</span><span class="p">;</span>
    <span class="k">color</span><span class="p">:</span> <span class="kc">initial</span><span class="p">;</span>
	<span class="k">background-color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
	<span class="k">margin</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
	<span class="k">border-width</span><span class="p">:</span> <span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">border-style</span><span class="p">:</span> <span class="kc">inset</span><span class="p">;</span>
    <span class="k">border-color</span><span class="p">:</span> <span class="kc">initial</span><span class="p">;</span>
    <span class="k">border-image</span><span class="p">:</span> <span class="kc">initial</span><span class="p">;</span>
	<span class="kp">-webkit-</span><span class="k">border-radius</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kp">-moz-</span><span class="k">border-radius</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">border-radius</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">search</span> <span class="p">#</span><span class="nn">search-results</span> <span class="p">{</span>
    <span class="k">padding-left</span><span class="p">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
    <span class="k">padding-right</span><span class="p">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">[</span><span class="nt">theme</span><span class="o">=</span><span class="nt">dark</span><span class="o">]</span> <span class="nt">a</span><span class="p">:</span><span class="nd">active</span><span class="o">,</span> <span class="o">[</span><span class="nt">theme</span><span class="o">=</span><span class="nt">dark</span><span class="o">]</span> <span class="nt">a</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#2d96bd</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">search</span> <span class="nt">hr</span> <span class="p">{</span>
    <span class="k">margin-left</span><span class="p">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
    <span class="k">margin-right</span><span class="p">:</span> <span class="mi">1</span><span class="kt">rem</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="优化中文搜索效果">优化中文搜索效果</h3>
<p>这个搜索功能借助了Fuse.js模糊搜索引擎，为了更好的适配中文搜索结果，需要修改模糊搜索的相关参数，相对的会导致英文搜索结果变多，不过这个可以接受。因为搜索结果变多了，总好过搜索不出来想要的中文结果。而且可以通过设置搜索结果的权重来改变结果的排序，这样越前面的搜索结果就越是我们想要的。</p>
<p>打开<code>\themes\hugo-search-fuse-js\static\js\search.js</code>，这里面配置了fuse.js的搜索配置选项，可以参考下我的配置，我已经添加了部分中文注释：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">// Options for fuse.js
let fuseOptions = {
  shouldSort: true, // 是否按分数对结果列表排序
  includeMatches: true, //  是否应将分数包含在结果集中。0分表示完全匹配，1分表示完全不匹配。
  tokenize: true,
  matchAllTokens: true,
  threshold: 0.2, // 匹配算法阈值。阈值为0.0需要完全匹配（字母和位置），阈值为1.0将匹配任何内容。
  location: 0, // 确定文本中预期找到的模式的大致位置。
  /**
   * 确定匹配与模糊位置（由位置指定）的距离。一个精确的字母匹配，即距离模糊位置很远的字符将被视为完全不匹配。
   *  距离为0要求匹配位于指定的准确位置，距离为100则要求完全匹配位于使用阈值0.2找到的位置的20个字符以内。
   */
  distance: 100,
  maxPatternLength: 64, // 模式的最大长度
  minMatchCharLength: 2, // 模式的最小字符长度
  keys: [
    {name:&#34;title&#34;,weight:0.8},
    {name:&#34;tags&#34;,weight:0.5},
    {name:&#34;categories&#34;,weight:0.5},
    {name:&#34;contents&#34;,weight:0.4}
  ]
};
</code></pre></td></tr></table>
</div>
</div><p>这里和中文搜索有关的主要就3个选项：<code>threshold</code>，<code>location</code>，<code>distance</code>。</p>
<p><code>threshold</code>是阈值，这个参数搭配<code>distance</code>使用。如果阈值填了<code>0.0</code>，相当于<code>distance</code>没有意义。<code>location</code>填0就行，<code>distance</code>填100就足够了，太大了会导致搜索到过多的结果。上面根据我个人的中文搜索测试结果，选择了这样的配置：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">  threshold: 0.2,
  location: 0,
  distance: 100
</code></pre></td></tr></table>
</div>
</div><p>可以根据个人情况来修改这几个参数的值，另外我还将<code>minMatchCharLength</code>的值改成了2，不过经过测试，和之前默认的<code>3</code>并没有什么差别。</p>
<h2 id="如何添加自定义的页面">如何添加自定义的页面</h2>
<p>除了发布草稿和正文，我们还可以添加自定义的页面page。page不会像文章那样被渲染，而是被渲染成一个单独的页面，类似于你的文档、标签页面。</p>
<p>方法很简单：</p>
<ol>
<li>在站点根目录的<code>/content/</code>目录下，新建一个文件夹，比如<code>about</code>文件夹。然后在该文件夹里新建一个<code>index.md</code>文件，该文件将作为站点访问该目录的页面，你可以将其当成一篇特殊的文章。</li>
<li>在<code>index.md</code>文件里加上下面的内容，实际上这里只需要<code>title</code>就够了，<code>date</code>这个日期属性可要可不要，因为page页面是看不到这个日期的：
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">---
title: &#34;关于&#34;
date: 2018-04-24T22:01:44+08:00
---
</code></pre></td></tr></table>
</div>
</div><p>``</p>
</li>
<li>接下来你就可以像写普通文章一样，在这个<code>index.md</code>文件里随便写你想要展示的内容就行了。</li>
</ol>
<h2 id="添加友链页面">添加友链页面</h2>
<h3 id="新建page页面">新建Page页面</h3>
<p>首先在站点根目录的<code>/content/</code>目录下，新建一个<code>friends</code>文件夹。在该文件夹里新建一个<code>index.md</code>文件，内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">---
title: &#34;友链墙&#34;
---
</code></pre></td></tr></table>
</div>
</div><p>由于博主想要将友链分类，并能使用上目录，所以不使用这种page形式的友链页面，而是直接创建一篇文章作为友链使用，文件头如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">title: &#34;友链墙&#34;
url: friends
hiddenFromHomePage: true
</code></pre></td></tr></table>
</div>
</div><h3 id="添加friendhtml">添加<code>friend.html</code></h3>
<p>我们通过自定义一个<code>shortcode</code>来实现该功能，以后就可以方便地通过这个<code>shortcode</code>快速新增友链到页面上。</p>
<p>在站点根目录下新增一个文件：<code>/layouts/shortcodes/friend.html</code>，其内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">{{ if .IsNamedParams }}
{{ $defaultImg := &#34;https://sdn.geekzu.org/avatar/d41d8cd98f00b204e9800998ecf8427e?d=retro&#34; }}
	<span class="p">&lt;</span><span class="nt">a</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">{{</span> <span class="err">.</span><span class="na">Get</span> <span class="err">&#34;</span><span class="na">url</span><span class="err">&#34;</span> <span class="err">}}</span> <span class="na">title</span><span class="o">=</span><span class="s">{{</span> <span class="err">.</span><span class="na">Get</span> <span class="err">&#34;</span><span class="na">name</span><span class="err">&#34;</span> <span class="err">}}</span><span class="na">---</span><span class="err">{{</span> <span class="err">.</span><span class="na">Get</span> <span class="err">&#34;</span><span class="na">word</span><span class="err">&#34;</span> <span class="err">}}</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;friend url&#34;</span><span class="p">&gt;</span>
	  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;friend block whole {{ .Get &#34;</span><span class="na">primary-color</span><span class="err">&#34;</span> <span class="err">|</span> <span class="na">default</span> <span class="err">&#34;</span><span class="na">default</span><span class="err">&#34;}}</span> <span class="err">{{</span> <span class="err">.</span><span class="na">Get</span> <span class="err">&#34;</span><span class="na">border-animation</span><span class="err">&#34;</span> <span class="err">|</span> <span class="na">default</span> <span class="err">&#34;</span><span class="na">shadow</span><span class="err">&#34;}}&#34;</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;friend block left&#34;</span><span class="p">&gt;</span>
		  <span class="p">&lt;</span><span class="nt">img</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;friend logo {{ .Get &#34;</span><span class="na">img-animation</span><span class="err">&#34;</span> <span class="err">|</span> <span class="na">default</span> <span class="err">&#34;</span><span class="na">rotate</span><span class="err">&#34;}}&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">{{</span> <span class="err">.</span><span class="na">Get</span> <span class="err">&#34;</span><span class="na">logo</span><span class="err">&#34;</span> <span class="err">}}</span> <span class="na">onerror</span><span class="o">=</span><span class="s">&#34;this.src=&#39;{{ $defaultImg }}&#39;&#34;</span> <span class="p">/&gt;</span>
		<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
		<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;friend block right&#34;</span><span class="p">&gt;</span>
		  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;friend name&#34;</span><span class="p">&gt;</span>{{ .Get &#34;name&#34; }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
		  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;friend info&#34;</span><span class="p">&gt;</span>&#34;{{ .Get &#34;word&#34; }}&#34;<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
		<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
	  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
	<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
{{ end }}
</code></pre></td></tr></table>
</div>
</div><h3 id="添加样式文件并引入">添加样式文件并引入</h3>
<p>在站点根目录下新增一个文件：<code>/assets/css/_partial/_single/_friend.scss</code>，内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">url</span> <span class="p">{</span>
    <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="k">color</span><span class="p">:</span> <span class="kc">black</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">logo</span> <span class="p">{</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">56</span><span class="kt">px</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="k">height</span><span class="p">:</span> <span class="mi">56</span><span class="kt">px</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="k">border-radius</span><span class="p">:</span> <span class="mi">50</span><span class="kt">%</span><span class="p">;</span>
    <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#ddd</span><span class="p">;</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">margin-top</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="k">margin-left</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">whole</span> <span class="p">{</span>
    <span class="k">height</span><span class="p">:</span> <span class="mi">92</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">margin-top</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">margin-left</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">31</span><span class="kt">%</span><span class="p">;</span>
    <span class="k">display</span><span class="p">:</span> <span class="kc">inline</span><span class="o">-</span><span class="kc">flex</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="k">border-radius</span><span class="p">:</span> <span class="mi">5</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">background</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">);</span>

    <span class="err">&amp;.shadow</span> <span class="err">{</span>
        <span class="k">margin-right</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">box-shadow</span><span class="p">:</span> <span class="mi">4</span><span class="kt">px</span> <span class="mi">4</span><span class="kt">px</span> <span class="mi">2</span><span class="kt">px</span> <span class="mi">1</span><span class="kt">px</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nc">borderFlash</span> <span class="p">{</span>
        <span class="k">border-width</span><span class="p">:</span> <span class="mf">3.5</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">border-style</span><span class="p">:</span> <span class="kc">solid</span><span class="p">;</span>
        <span class="k">animation</span><span class="p">:</span> <span class="n">borderFlash</span> <span class="mi">2</span><span class="kt">s</span> <span class="kc">infinite</span> <span class="kc">alternate</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nc">led</span> <span class="p">{</span>
        <span class="k">animation</span><span class="p">:</span> <span class="n">led</span> <span class="mi">3</span><span class="kt">s</span> <span class="kc">infinite</span> <span class="kc">alternate</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nc">bln</span> <span class="p">{</span>
        <span class="k">animation</span><span class="p">:</span> <span class="n">bln</span> <span class="mi">3</span><span class="kt">s</span> <span class="kc">infinite</span> <span class="kc">alternate</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">whole</span> <span class="p">{</span>
    <span class="err">&amp;:hover</span> <span class="err">{</span>
        <span class="k">color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
        <span class="err">&amp;</span> <span class="err">.friend.info</span> <span class="err">{</span>
            <span class="k">color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="err">}</span>

    <span class="o">&amp;</span><span class="p">.</span><span class="nc">default</span> <span class="p">{</span>
        <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#215bb3</span><span class="n">bf</span><span class="p">;</span>
        <span class="err">&amp;:hover</span> <span class="err">{</span>
            <span class="k">background</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">179</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="err">}</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nc">red</span> <span class="p">{</span>
        <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#e72638</span><span class="p">;</span>
        <span class="err">&amp;:hover</span> <span class="err">{</span>
            <span class="k">background</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">231</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="err">}</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nc">green</span> <span class="p">{</span>
        <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#2ec58d</span><span class="p">;</span>
        <span class="err">&amp;:hover</span> <span class="err">{</span>
            <span class="k">background</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">167</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="err">}</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nc">blue</span> <span class="p">{</span>
        <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#2575fc</span><span class="p">;</span>
        <span class="err">&amp;:hover</span> <span class="err">{</span>
            <span class="k">background</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">37</span><span class="p">,</span> <span class="mi">117</span><span class="p">,</span> <span class="mi">252</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="err">}</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nc">linear-red</span> <span class="p">{</span>
        <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#e72638</span><span class="p">;</span>
        <span class="err">&amp;:hover</span> <span class="err">{</span>
            <span class="k">background</span><span class="p">:</span> <span class="nb">linear-gradient</span><span class="p">(</span><span class="kc">to</span> <span class="kc">right</span><span class="p">,</span> <span class="mh">#f9cdcd</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">#e72638</span> <span class="mi">35</span><span class="kt">%</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="err">}</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nc">linear-green</span> <span class="p">{</span>
        <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#2ec58d</span><span class="p">;</span>
        <span class="err">&amp;:hover</span> <span class="err">{</span>
            <span class="k">background</span><span class="p">:</span> <span class="nb">linear-gradient</span><span class="p">(</span><span class="kc">to</span> <span class="kc">right</span><span class="p">,</span> <span class="mh">#1d7544</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">#2ec58d</span> <span class="mi">35</span><span class="kt">%</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="err">}</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nc">linear-blue</span> <span class="p">{</span>
        <span class="nv">--primary-color</span><span class="p">:</span> <span class="mh">#2575fc</span><span class="p">;</span>
        <span class="err">&amp;:hover</span> <span class="err">{</span>
            <span class="k">background</span><span class="p">:</span> <span class="nb">linear-gradient</span><span class="p">(</span><span class="kc">to</span> <span class="kc">right</span><span class="p">,</span> <span class="mh">#6a11cb</span> <span class="mi">0</span><span class="p">,</span> <span class="mh">#2575fc</span> <span class="mi">35</span><span class="kt">%</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="err">}</span>
<span class="err">}</span>

<span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">whole</span> <span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">left</span> <span class="nt">img</span> <span class="p">{</span>
    <span class="err">&amp;.auto_rotate_left</span> <span class="err">{</span>
        <span class="k">animation</span><span class="p">:</span> <span class="n">auto_rotate_left</span> <span class="mi">3</span><span class="kt">s</span> <span class="kc">linear</span> <span class="kc">infinite</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="o">&amp;</span><span class="p">.</span><span class="nc">auto_rotate_right</span> <span class="p">{</span>
        <span class="k">animation</span><span class="p">:</span> <span class="n">auto_rotate_right</span> <span class="mi">3</span><span class="kt">s</span> <span class="kc">linear</span> <span class="kc">infinite</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>
<span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">whole</span><span class="p">:</span><span class="nd">hover</span> <span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">left</span> <span class="nt">img</span> <span class="p">{</span>
    <span class="err">&amp;.rotate</span> <span class="err">{</span>
        <span class="k">transition</span><span class="p">:</span> <span class="mf">0.9</span><span class="kt">s</span> <span class="cp">!important</span><span class="p">;</span>
        <span class="kp">-webkit-</span><span class="k">transition</span><span class="p">:</span> <span class="mf">0.9</span><span class="kt">s</span> <span class="cp">!important</span><span class="p">;</span>
        <span class="kp">-moz-</span><span class="k">transition</span><span class="p">:</span> <span class="mf">0.9</span><span class="kt">s</span> <span class="cp">!important</span><span class="p">;</span>
        <span class="kp">-o-</span><span class="k">transition</span><span class="p">:</span> <span class="mf">0.9</span><span class="kt">s</span> <span class="cp">!important</span><span class="p">;</span>
        <span class="kp">-ms-</span><span class="k">transition</span><span class="p">:</span> <span class="mf">0.9</span><span class="kt">s</span> <span class="cp">!important</span><span class="p">;</span>
        <span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="mi">360</span><span class="kt">deg</span><span class="p">)</span> <span class="cp">!important</span><span class="p">;</span>
        <span class="kp">-webkit-</span><span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="mi">360</span><span class="kt">deg</span><span class="p">)</span> <span class="cp">!important</span><span class="p">;</span>
        <span class="kp">-moz-</span><span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="mi">360</span><span class="kt">deg</span><span class="p">)</span> <span class="cp">!important</span><span class="p">;</span>
        <span class="kp">-o-</span><span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="mi">360</span><span class="kt">deg</span><span class="p">)</span> <span class="cp">!important</span><span class="p">;</span>
        <span class="kp">-ms-</span><span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="mi">360</span><span class="kt">deg</span><span class="p">)</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="p">}</span>
<span class="err">}</span>

<span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">left</span> <span class="p">{</span>
    <span class="k">width</span><span class="p">:</span> <span class="mi">92</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">min-width</span><span class="p">:</span> <span class="mi">92</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">float</span><span class="p">:</span> <span class="kc">left</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">left</span> <span class="p">{</span>
    <span class="k">margin-right</span><span class="p">:</span> <span class="mi">2</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">right</span> <span class="p">{</span>
    <span class="k">margin-top</span><span class="p">:</span> <span class="mi">18</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">margin-right</span><span class="p">:</span> <span class="mi">18</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">name</span> <span class="p">{</span>
    <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
    <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bolder</span><span class="p">;</span>
    <span class="k">word-wrap</span><span class="p">:</span><span class="kc">break-word</span><span class="p">;</span>
    <span class="k">word-break</span><span class="p">:</span> <span class="n">break-all</span><span class="p">;</span>
    <span class="k">text-overflow</span><span class="p">:</span> <span class="kc">ellipsis</span><span class="p">;</span>
    <span class="k">display</span><span class="p">:</span> <span class="kp">-webkit-</span><span class="n">box</span><span class="p">;</span>
    <span class="kp">-webkit-</span><span class="n">line-clamp</span><span class="p">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kp">-webkit-</span><span class="n">box-orient</span><span class="p">:</span> <span class="kc">vertical</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">info</span> <span class="p">{</span>
    <span class="k">margin-top</span><span class="p">:</span> <span class="mi">3</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">overflow</span><span class="p">:</span> <span class="kc">hidden</span><span class="p">;</span>
    <span class="k">word-wrap</span><span class="p">:</span><span class="kc">break-word</span><span class="p">;</span>
    <span class="k">word-break</span><span class="p">:</span> <span class="n">break-all</span><span class="p">;</span>
    <span class="k">text-overflow</span><span class="p">:</span> <span class="kc">ellipsis</span><span class="p">;</span>
    <span class="k">display</span><span class="p">:</span> <span class="kp">-webkit-</span><span class="n">box</span><span class="p">;</span>
    <span class="kp">-webkit-</span><span class="n">line-clamp</span><span class="p">:</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kp">-webkit-</span><span class="n">box-orient</span><span class="p">:</span> <span class="kc">vertical</span><span class="p">;</span>
    <span class="k">line-height</span><span class="p">:</span> <span class="kc">normal</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mf">0.8</span><span class="kt">rem</span><span class="p">;</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#7a7a7a</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">media</span> <span class="nt">screen</span> <span class="nt">and</span> <span class="o">(</span><span class="nt">max-width</span><span class="o">:</span> <span class="nt">900px</span><span class="o">)</span> <span class="p">{</span>
    <span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">info</span> <span class="p">{</span>
        <span class="k">display</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">whole</span> <span class="p">{</span>
        <span class="k">width</span><span class="p">:</span> <span class="mi">45</span><span class="kt">%</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">left</span> <span class="p">{</span>
        <span class="k">width</span><span class="p">:</span> <span class="mi">84</span><span class="kt">px</span><span class="p">;</span>
        <span class="k">margin-left</span><span class="p">:</span> <span class="mi">15</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">block</span><span class="p">.</span><span class="nc">right</span> <span class="p">{</span>
        <span class="k">height</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
        <span class="k">margin</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
        <span class="k">display</span><span class="p">:</span> <span class="kc">flex</span><span class="p">;</span>
        <span class="k">align-items</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
        <span class="k">justify-content</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="p">.</span><span class="nc">friend</span><span class="p">.</span><span class="nc">name</span> <span class="p">{</span>
        <span class="k">font-size</span><span class="p">:</span> <span class="mi">14</span><span class="kt">px</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">keyframes</span> <span class="nt">bln</span> <span class="p">{</span>
	<span class="nt">0</span><span class="o">%</span> <span class="p">{</span>
		<span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span><span class="kt">px</span> <span class="kc">grey</span><span class="p">,</span><span class="kc">inset</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span><span class="kt">px</span> <span class="kc">grey</span><span class="p">,</span><span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">0</span> <span class="kc">grey</span><span class="p">;</span>
		<span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span><span class="kt">px</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary</span><span class="o">-</span><span class="kc">color</span><span class="p">,</span><span class="kc">grey</span><span class="p">),</span><span class="kc">inset</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span><span class="kt">px</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary</span><span class="o">-</span><span class="kc">color</span><span class="p">,</span><span class="kc">grey</span><span class="p">),</span><span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">0</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary</span><span class="o">-</span><span class="kc">color</span><span class="p">,</span><span class="kc">grey</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nt">to</span> <span class="p">{</span>
		<span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">16</span><span class="kt">px</span> <span class="kc">grey</span><span class="p">,</span><span class="kc">inset</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">8</span><span class="kt">px</span> <span class="kc">grey</span><span class="p">,</span><span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">0</span> <span class="kc">grey</span><span class="p">;</span>
		<span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">16</span><span class="kt">px</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary</span><span class="o">-</span><span class="kc">color</span><span class="p">,</span><span class="kc">grey</span><span class="p">),</span><span class="kc">inset</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">8</span><span class="kt">px</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary</span><span class="o">-</span><span class="kc">color</span><span class="p">,</span><span class="kc">grey</span><span class="p">),</span><span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">0</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary</span><span class="o">-</span><span class="kc">color</span><span class="p">,</span><span class="kc">grey</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">keyframes</span> <span class="nt">led</span> <span class="p">{</span>
	<span class="nt">0</span><span class="o">%</span> <span class="p">{</span>
		<span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">4</span><span class="kt">px</span> <span class="mh">#ca00ff</span>
	<span class="p">}</span>

	<span class="nt">25</span><span class="o">%</span> <span class="p">{</span>
		<span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">16</span><span class="kt">px</span> <span class="mh">#00b5e5</span>
	<span class="p">}</span>

	<span class="nt">50</span><span class="o">%</span> <span class="p">{</span>
		<span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">4</span><span class="kt">px</span> <span class="mh">#00f</span>
	<span class="p">}</span>

	<span class="nt">75</span><span class="o">%</span> <span class="p">{</span>
		<span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">16</span><span class="kt">px</span> <span class="mh">#b1da21</span>
	<span class="p">}</span>

	<span class="nt">to</span> <span class="p">{</span>
		<span class="k">box-shadow</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">4</span><span class="kt">px</span> <span class="kc">red</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">keyframes</span> <span class="nt">borderFlash</span> <span class="p">{</span>
	<span class="nt">0</span><span class="o">%</span> <span class="p">{</span>
		<span class="k">border-color</span><span class="p">:</span> <span class="kc">white</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="nt">to</span> <span class="p">{</span>
		<span class="k">border-color</span><span class="p">:</span> <span class="kc">grey</span><span class="p">;</span>
		<span class="k">border-color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">primary</span><span class="o">-</span><span class="kc">color</span><span class="p">,</span><span class="kc">grey</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">keyframes</span> <span class="nt">auto_rotate_left</span> <span class="p">{</span>
	<span class="nt">0</span><span class="o">%</span> <span class="p">{</span>
		<span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nt">to</span> <span class="p">{</span>
		<span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="mi">-1</span><span class="kt">turn</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="p">@</span><span class="k">keyframes</span> <span class="nt">auto_rotate_right</span> <span class="p">{</span>
	<span class="nt">0</span><span class="o">%</span> <span class="p">{</span>
		<span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nt">to</span> <span class="p">{</span>
		<span class="k">transform</span><span class="p">:</span> <span class="nb">rotate</span><span class="p">(</span><span class="mi">1</span><span class="kt">turn</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>请注意，该文件是<code>.scss</code>文件，只有你使用的是扩展版本的Hugo时才能生效。</p>
<p>然后把<code>\themes\LoveIt\assets\css\_page\_single.scss</code>这个文件拷贝到<code>\assets\css\_page\_single.scss</code>，然后修改我们新增的<code>_single.scss</code>，在第一行加一行新代码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-css" data-lang="css"><span class="p">@</span><span class="k">import</span> <span class="s2">&#34;../_partial/_single/friend&#34;</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p>这样Hugo就会用我们新增的这个文件来渲染友链页面了。</p>
<h3 id="另一种添加样式文件并引入的方案">另一种添加样式文件并引入的方案</h3>
<p>感谢<code>@kirito</code>的建议，原友链样式的方案会侵入原本的主题样式，并且也不是所有页面都需要这个友链样式，所以可以采用另一种方案来选择性地引入友链样式：即同样使用shortcode来引入。</p>
<p>首先创建一个<code>/assets/css/friend.scss</code>文件，内容跟上文的<code>_friend.scss</code>文件一样。然后新增一个<code>/layouts/shortcodes/friend-css.html</code>文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">{{ $options := (dict &#34;targetPath&#34; &#34;/css/friend.css&#34; &#34;outputStyle&#34; &#34;compressed&#34; &#34;enableSourceMap&#34; true) }}
{{ $style := resources.Get &#34;css/friend.scss&#34; | resources.ToCSS $options }}

<span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;stylesheet&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ $style.RelPermalink }}&#34;</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p>在需要使用友链的页面、文章中添加如下shortcode来引入友链样式即可：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">{{&lt; friend-css &gt;}}
</code></pre></td></tr></table>
</div>
</div><h3 id="在菜单栏里新增一个友链按钮">在菜单栏里新增一个友链按钮</h3>
<p>打开站点配置文件<code>config.toml</code>，添加友链按钮：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 菜单配置
[menu]
  [[menu.main]]
    pre = &#34;&lt;i class=&#39;fas fa-fw fa-fan fa-spin&#39;&gt;&lt;/i&gt;&#34;
    name = &#34;友链&#34;
    identifier = &#34;friends&#34;
    url = &#34;/friends/&#34;
    weight = 6
</code></pre></td></tr></table>
</div>
</div><h3 id="使用示例和效果展示">使用示例和效果展示</h3>
<p>在你想要引入友链的文章里使用下面的代码即可自动渲染成对应的友链：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">{{&lt; friend
name=&#34;雨临Lewis的博客&#34;
url=&#34;lewky.cn&#34;
logo=&#34;https://cdn.jsdelivr.net/gh/lewky/lewky.github.io@master/images/avatar.jpg&#34;
word=&#34;不想当写手的码农不是好咸鱼_(xз」∠)_&#34;
&gt;}}
</code></pre></td></tr></table>
</div>
</div><p>上面代码里的四个属性为必填项，还可以额外指定三个不同的属性来选择友链内置的多种样式，如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">//边框及鼠标悬停的背景颜色，允许设置渐变色
//支持7种：default、red、green、blue、linear-red、linear-green、linear-blue
primary-color=&#34;default&#34;

//头像动画：rotate(鼠标悬停时旋转，此为默认效果)、auto_rotate_left(左旋转)、auto_rotate_right(右旋转)
img-animation=&#34;rotate&#34;

//边框动画：shadow(阴影，此为默认效果)、borderFlash(边框闪现)、led(跑马灯)、bln(主颜色呼吸灯)
border-animation=&#34;shadow&#34;
</code></pre></td></tr></table>
</div>
</div><p>如果友链的头像无法正常显示，会以一个默认的Gravatar头像显示。此外，在移动端会隐藏站点描述，只显示头像和站点名称，你可以通过将当前窗口缩小到宽度最小即可看到效果。</p>
<h2 id="参考链接">参考链接</h2>
<ul>
<li><a href="https://sr-c.github.io/2020/07/21/Hugo-custom/" target="_blank" rel="noopener noreffer">自定义Hugo主题样式</a>
</li>
<li><a href="https://github.com/kaushalmodi/hugo-search-fuse-js" target="_blank" rel="noopener noreffer">kaushalmodi / hugo-search-fuse-js</a>
</li>
<li><a href="https://blog.233so.com/2020/04/friend-link-shortcodes-for-hugo-loveit/" target="_blank" rel="noopener noreffer">Hugo 篇四：添加友链卡片 shortcodes</a>
</li>
<li><a href="https://www.cnblogs.com/wxcbg/p/7459022.html" target="_blank" rel="noopener noreffer">img标签设置默认图片</a>
</li>
<li><a href="https://blog.csdn.net/weixin_46382477/article/details/108144964" target="_blank" rel="noopener noreffer">Fuse.js模糊搜索引擎</a>
</li>
<li><a href="https://www.jianshu.com/p/d0c8c3de8233" target="_blank" rel="noopener noreffer">使用fuse.js进行搜索</a>
</li>
</ul>]]></description>
</item>
<item>
    <title>免费图标</title>
    <link>https://freerun.xyz/%E5%85%8D%E8%B4%B9%E5%9B%BE%E6%A0%87/</link>
    <pubDate>Mon, 16 May 2022 14:29:09 &#43;0800</pubDate>
    <author>Ylimhs</author>
    <guid>https://freerun.xyz/%E5%85%8D%E8%B4%B9%E5%9B%BE%E6%A0%87/</guid>
    <description><![CDATA[<h1 id="介绍">介绍</h1>
<p>免费图标类列表名称及其 CSS 内容值代码</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">&#39;fa fa-cloud&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">i</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><h1 id="参考wiki">参考wiki</h1>
<p><a href="https://www.angularjswiki.com/fontawesome/arrows/" target="_blank" rel="noopener noreffer">angularjswiki</a>
</p>
<p><a href="https://fontawesome.com/v4/icon/cloud" target="_blank" rel="noopener noreffer">fontawesome</a>
</p>
]]></description>
</item>
<item>
    <title>JAVA线上故障排查全套路</title>
    <link>https://freerun.xyz/java%E7%BA%BF%E4%B8%8A%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%85%A8%E5%A5%97%E8%B7%AF/</link>
    <pubDate>Sat, 14 May 2022 15:13:40 &#43;0800</pubDate>
    <author>Ylimhs</author>
    <guid>https://freerun.xyz/java%E7%BA%BF%E4%B8%8A%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E5%85%A8%E5%A5%97%E8%B7%AF/</guid>
    <description><![CDATA[<h1 id="java线上故障排查全套路">JAVA线上故障排查全套路</h1>
<p>线上故障主要会包括cpu、磁盘、内存以及网络问题，而大多数故障可能会包含不止一个层面的问题，所以进行排查时候尽量四个方面依次排查一遍。同时例如jstack、jmap等工具也是不囿于一个方面的问题的，基本上出问题就是df、free、top 三连，然后依次jstack、jmap伺候，具体问题具体分析即可。</p>
<h2 id="cpu">CPU</h2>
<p>一般来讲我们首先会排查cpu方面的问题。cpu异常往往还是比较好定位的。原因包括业务逻辑问题(死循环)、频繁gc以及上下文切换过多。而最常见的往往是业务逻辑(或者框架逻辑)导致的，可以使用jstack来分析对应的堆栈情况。</p>
<h3 id="使用jstack分析cpu问题">使用jstack分析cpu问题</h3>
<p>我们先用ps命令找到对应进程的pid(如果你有好几个目标进程，可以先用top看一下哪个占用比较高)。接着用<code>top -H -p pid</code>来找到cpu使用率比较高的一些线程</p>
<p>然后将占用最高的pid转换为16进制<code>printf '%x\n' pid</code>得到nid</p>
<p></p>
<p>接着直接在jstack中找到相应的堆栈信息<code>jstack pid |grep 'nid' -C5 –color</code></p>
<p></p>
<p>可以看到我们已经找到了nid为0x42的堆栈信息，接着只要仔细分析一番即可。</p>
<p>当然更常见的是我们对整个jstack文件进行分析，通常我们会比较关注WAITING和TIMED_WAITING的部分，BLOCKED就不用说了。我们可以使用命令<code>cat jstack.log | grep &quot;java.lang.Thread.State&quot; | sort -nr | uniq -c</code>来对jstack的状态有一个整体的把握，如果WAITING之类的特别多，那么多半是有问题啦。</p>
<p></p>
<h3 id="频繁gc">频繁gc</h3>
<p>当然我们还是会使用jstack来分析问题，但有时候我们可以先确定下gc是不是太频繁，使用<code>jstat -gc pid 1000</code>命令来对gc分代变化情况进行观察，1000表示采样间隔(ms)，S0C/S1C、S0U/S1U、EC/EU、OC/OU、MC/MU分别代表两个Survivor区、Eden区、老年代、元数据区的容量和使用量。YGC/YGT、FGC/FGCT、GCT则代表YoungGc、FullGc的耗时和次数以及总耗时。如果看到gc比较频繁，再针对gc方面做进一步分析，具体可以参考一下gc章节的描述。</p>
<p></p>
<h3 id="上下文切换">上下文切换</h3>
<p>针对频繁上下文问题，我们可以使用<code>vmstat</code>命令来进行查看</p>
<p></p>
<p>cs(context switch)一列则代表了上下文切换的次数。如果我们希望对特定的pid进行监控那么可以使用 <code>pidstat -w pid</code>命令，cswch和nvcswch表示自愿及非自愿切换。</p>
<p></p>
<h2 id="磁盘">磁盘</h2>
<p>磁盘问题和cpu一样是属于比较基础的。首先是磁盘空间方面，我们直接使用<code>df -hl</code>来查看文件系统状态</p>
<p></p>
<p>更多时候，磁盘问题还是性能上的问题。我们可以通过iostat<code>iostat -d -k -x</code>来进行分析</p>
<p></p>
<p>最后一列<code>%util</code>可以看到每块磁盘写入的程度，而<code>rrqpm/s</code>以及<code>wrqm/s</code>分别表示读写速度，一般就能帮助定位到具体哪块磁盘出现问题了。</p>
<p>另外我们还需要知道是哪个进程在进行读写，一般来说开发自己心里有数，或者用<code>iotop</code>命令来进行定位文件读写的来源。</p>
<p></p>
<p>不过这边拿到的是tid，我们要转换成pid，可以通过readlink来找到pid<code>readlink -f /proc/*/task/tid/../..</code>。</p>
<p></p>
<p>找到pid之后就可以看这个进程具体的读写情况<code>cat /proc/pid/io</code></p>
<p></p>
<p>我们还可以通过lsof命令来确定具体的文件读写情况<code>lsof -p pid</code></p>
<p></p>
<h2 id="内存">内存</h2>
<p>内存问题排查起来相对比CPU麻烦一些，场景也比较多。主要包括OOM、GC问题和堆外内存。一般来讲，我们会先用<code>free</code>命令先来检查一发内存的各种情况。</p>
<p></p>
<h3 id="堆内内存">堆内内存</h3>
<p>内存问题大多还都是堆内内存问题。表象上主要分为OOM和StackOverflow。</p>
<h4 id="oom">OOM</h4>
<p>JMV中的内存不足，OOM大致可以分为以下几种：</p>
<p><strong>Exception in thread &ldquo;main&rdquo; java.lang.OutOfMemoryError: unable to create new native thread</strong>  这个意思是没有足够的内存空间给线程分配java栈，基本上还是线程池代码写的有问题，比如说忘记shutdown，所以说应该首先从代码层面来寻找问题，使用jstack或者jmap。如果一切都正常，JVM方面可以通过指定<code>Xss</code>来减少单个thread stack的大小。另外也可以在系统层面，可以通过修改<code>/etc/security/limits.conf</code>nofile和nproc来增大os对线程的限制</p>
<p></p>
<p><strong>Exception in thread &ldquo;main&rdquo; java.lang.OutOfMemoryError: Java heap space</strong>这个意思是堆的内存占用已经达到-Xmx设置的最大值，应该是最常见的OOM错误了。解决思路仍然是先应该在代码中找，怀疑存在内存泄漏，通过jstack和jmap去定位问题。如果说一切都正常，才需要通过调整<code>Xmx</code>的值来扩大内存。</p>
<p><strong>Caused by: java.lang.OutOfMemoryError: Meta space</strong>这个意思是元数据区的内存占用已经达到<code>XX:MaxMetaspaceSize</code>设置的最大值，排查思路和上面的一致，参数方面可以通过<code>XX:MaxPermSize</code>来进行调整(这里就不说1.8以前的永久代了)。</p>
<h4 id="stack-overflow">Stack Overflow</h4>
<p>栈内存溢出，这个大家见到也比较多。<strong>Exception in thread &ldquo;main&rdquo; java.lang.StackOverflowError</strong>表示线程栈需要的内存大于Xss值，同样也是先进行排查，参数方面通过<code>Xss</code>来调整，但调整的太大可能又会引起OOM。</p>
<h4 id="使用jmap定位代码内存泄漏">使用JMAP定位代码内存泄漏</h4>
<p>上述关于OOM和StackOverflow的代码排查方面，我们一般使用JMAP<code>jmap -dump:format=b,file=filename pid</code>来导出dump文件</p>
<p></p>
<p>通过mat(Eclipse Memory Analysis Tools)导入dump文件进行分析，内存泄漏问题一般我们直接选Leak Suspects即可，mat给出了内存泄漏的建议。另外也可以选择Top Consumers来查看最大对象报告。和线程相关的问题可以选择thread overview进行分析。除此之外就是选择Histogram类概览来自己慢慢分析，大家可以搜搜mat的相关教程。</p>
<p></p>
<p>日常开发中，代码产生内存泄漏是比较常见的事，并且比较隐蔽，需要开发者更加关注细节。比如说每次请求都new对象，导致大量重复创建对象；进行文件流操作但未正确关闭；手动不当触发gc；ByteBuffer缓存分配不合理等都会造成代码OOM。</p>
<p>另一方面，我们可以在启动参数中指定<code>-XX:+HeapDumpOnOutOfMemoryError</code>来保存OOM时的dump文件。</p>
<h4 id="gc问题和线程">gc问题和线程</h4>
<p>gc问题除了影响cpu也会影响内存，排查思路也是一致的。一般先使用jstat来查看分代变化情况，比如youngGC或者fullGC次数是不是太多呀；EU、OU等指标增长是不是异常呀等。线程的话太多而且不被及时gc也会引发oom，大部分就是之前说的<code>unable to create new native thread</code>。除了jstack细细分析dump文件外，我们一般先会看下总体线程，通过<code>pstreee -p pid |wc -l</code>。</p>
<p></p>
<p>或者直接通过查看<code>/proc/pid/task</code>的数量即为线程数量。</p>
<p></p>
<h3 id="堆外内存">堆外内存</h3>
<p>如果碰到堆外内存溢出，那可真是太不幸了。首先堆外内存溢出表现就是物理常驻内存增长快，报错的话视使用方式都不确定，如果由于使用Netty导致的，那错误日志里可能会出现<code>OutOfDirectMemoryError</code>错误，如果直接是DirectByteBuffer，那会报<code>OutOfMemoryError: Direct buffer memory</code>。</p>
<p>堆外内存溢出往往是和NIO的使用相关，一般我们先通过pmap来查看下进程占用的内存情况<code>pmap -x pid | sort -rn -k3 | head -30</code>，这段意思是查看对应pid倒序前30大的内存段。这边可以再一段时间后再跑一次命令看看内存增长情况，或者和正常机器比较可疑的内存段在哪里。</p>
<p></p>
<p>我们如果确定有可疑的内存端，需要通过gdb来分析<code>gdb --batch --pid {pid} -ex &quot;dump memory filename.dump {内存起始地址} {内存起始地址+内存块大小}&quot;</code></p>
<p></p>
<p>获取dump文件后可用heaxdump进行查看<code>hexdump -C filename | less</code>，不过大多数看到的都是二进制乱码。</p>
<p>NMT是Java7U40引入的HotSpot新特性，配合jcmd命令我们就可以看到具体内存组成了。需要在启动参数中加入 <code>-XX:NativeMemoryTracking=summary</code> 或者 <code>-XX:NativeMemoryTracking=detail</code>，会有略微性能损耗。</p>
<p>一般对于堆外内存缓慢增长直到爆炸的情况来说，可以先设一个基线<code>jcmd pid VM.native_memory baseline</code>。</p>
<p></p>
<p>然后等放一段时间后再去看看内存增长的情况，通过<code>jcmd pid VM.native_memory detail.diff(summary.diff)</code>做一下summary或者detail级别的diff。</p>
<p></p>
<p></p>
<p>可以看到jcmd分析出来的内存十分详细，包括堆内、线程以及gc(所以上述其他内存异常其实都可以用nmt来分析)，这边堆外内存我们重点关注Internal的内存增长，如果增长十分明显的话那就是有问题了。detail级别的话还会有具体内存段的增长情况，如下图。</p>
<p></p>
<p>此外在系统层面，我们还可以使用strace命令来监控内存分配 <code>strace -f -e &quot;brk,mmap,munmap&quot; -p pid</code>这边内存分配信息主要包括了pid和内存地址。</p>
<p></p>
<p>不过其实上面那些操作也很难定位到具体的问题点，关键还是要看错误日志栈，找到可疑的对象，搞清楚它的回收机制，然后去分析对应的对象。比如DirectByteBuffer分配内存的话，是需要full GC或者手动system.gc来进行回收的(所以最好不要使用<code>-XX:+DisableExplicitGC</code>)。那么其实我们可以跟踪一下DirectByteBuffer对象的内存情况，通过<code>jmap -histo:live pid</code>手动触发fullGC来看看堆外内存有没有被回收。如果被回收了，那么大概率是堆外内存本身分配的太小了，通过<code>-XX:MaxDirectMemorySize</code>进行调整。如果没有什么变化，那就要使用jmap去分析那些不能被gc的对象，以及和DirectByteBuffer之间的引用关系了。</p>
<h2 id="gc问题">GC问题</h2>
<p>堆内内存泄漏总是和GC异常相伴。不过GC问题不只是和内存问题相关，还有可能引起CPU负载、网络问题等系列并发症，只是相对来说和内存联系紧密些，所以我们在此单独总结一下GC相关问题。</p>
<p>我们在cpu章介绍了使用jstat来获取当前GC分代变化信息。而更多时候，我们是通过GC日志来排查问题的，在启动参数中加上<code>-verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps</code>来开启GC日志。常见的Young GC、Full GC日志含义在此就不做赘述了。</p>
<p>针对gc日志，我们就能大致推断出youngGC与fullGC是否过于频繁或者耗时过长，从而对症下药。我们下面将对G1垃圾收集器来做分析，这边也建议大家使用G1<code>-XX:+UseG1GC</code>。</p>
<p><strong>youngGC过频繁</strong>youngGC频繁一般是短周期小对象较多，先考虑是不是Eden区/新生代设置的太小了，看能否通过调整-Xmn、-XX:SurvivorRatio等参数设置来解决问题。如果参数正常，但是young gc频率还是太高，就需要使用Jmap和MAT对dump文件进行进一步排查了。</p>
<p><strong>youngGC耗时过长</strong>耗时过长问题就要看GC日志里耗时耗在哪一块了。以G1日志为例，可以关注Root Scanning、Object Copy、Ref Proc等阶段。Ref Proc耗时长，就要注意引用相关的对象。Root Scanning耗时长，就要注意线程数、跨代引用。Object Copy则需要关注对象生存周期。而且耗时分析它需要横向比较，就是和其他项目或者正常时间段的耗时比较。比如说图中的Root Scanning和正常时间段比增长较多，那就是起的线程太多了。</p>
<p></p>
<p><strong>触发fullGC</strong>G1中更多的还是mixedGC，但mixedGC可以和youngGC思路一样去排查。触发fullGC了一般都会有问题，G1会退化使用Serial收集器来完成垃圾的清理工作，暂停时长达到秒级别，可以说是半跪了。fullGC的原因可能包括以下这些，以及参数调整方面的一些思路：</p>
<ul>
<li>并发阶段失败：在并发标记阶段，MixGC之前老年代就被填满了，那么这时候G1就会放弃标记周期。这种情况，可能就需要增加堆大小，或者调整并发标记线程数<code>-XX:ConcGCThreads</code>。</li>
<li>晋升失败：在GC的时候没有足够的内存供存活/晋升对象使用，所以触发了Full GC。这时候可以通过<code>-XX:G1ReservePercent</code>来增加预留内存百分比，减少<code>-XX:InitiatingHeapOccupancyPercent</code>来提前启动标记，<code>-XX:ConcGCThreads</code>来增加标记线程数也是可以的。</li>
<li>大对象分配失败：大对象找不到合适的region空间进行分配，就会进行fullGC，这种情况下可以增大内存或者增大<code>-XX:G1HeapRegionSize</code>。</li>
<li>程序主动执行System.gc()：不要随便写就对了。</li>
</ul>
<p>另外，我们可以在启动参数中配置<code>-XX:HeapDumpPath=/xxx/dump.hprof</code>来dump fullGC相关的文件，并通过jinfo来进行gc前后的dump</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">jinfo -flag +HeapDumpBeforeFullGC pid 
jinfo -flag +HeapDumpAfterFullGC pid
</code></pre></td></tr></table>
</div>
</div><p>这样得到2份dump文件，对比后主要关注被gc掉的问题对象来定位问题。</p>
<h2 id="网络">网络</h2>
<p>涉及到网络层面的问题一般都比较复杂，场景多，定位难，成为了大多数开发的噩梦，应该是最复杂的了。这里会举一些例子，并从tcp层、应用层以及工具的使用等方面进行阐述。</p>
<h3 id="超时">超时</h3>
<p>超时错误大部分处在应用层面，所以这块着重理解概念。超时大体可以分为连接超时和读写超时，某些使用连接池的客户端框架还会存在获取连接超时和空闲连接清理超时。</p>
<ul>
<li>读写超时。readTimeout/writeTimeout，有些框架叫做so_timeout或者socketTimeout，均指的是数据读写超时。注意这边的超时大部分是指逻辑上的超时。soa的超时指的也是读超时。读写超时一般都只针对客户端设置。</li>
<li>连接超时。connectionTimeout，客户端通常指与服务端建立连接的最大时间。服务端这边connectionTimeout就有些五花八门了，jetty中表示空闲连接清理时间，tomcat则表示连接维持的最大时间。</li>
<li>其他。包括连接获取超时connectionAcquireTimeout和空闲连接清理超时idleConnectionTimeout。多用于使用连接池或队列的客户端或服务端框架。</li>
</ul>
<p>我们在设置各种超时时间中，需要确认的是尽量保持客户端的超时小于服务端的超时，以保证连接正常结束。</p>
<p>在实际开发中，我们关心最多的应该是接口的读写超时了。</p>
<p>如何设置合理的接口超时是一个问题。如果接口超时设置的过长，那么有可能会过多地占用服务端的tcp连接。而如果接口设置的过短，那么接口超时就会非常频繁。</p>
<p>服务端接口明明rt降低，但客户端仍然一直超时又是另一个问题。这个问题其实很简单，客户端到服务端的链路包括网络传输、排队以及服务处理等，每一个环节都可能是耗时的原因。</p>
<h3 id="tcp队列溢出">TCP队列溢出</h3>
<p>tcp队列溢出是个相对底层的错误，它可能会造成超时、rst等更表层的错误。因此错误也更隐蔽，所以我们单独说一说。</p>
<p></p>
<p>如上图所示，这里有两个队列：syns queue(半连接队列）、accept queue（全连接队列）。三次握手，在server收到client的syn后，把消息放到syns queue，回复syn+ack给client，server收到client的ack，如果这时accept queue没满，那就从syns queue拿出暂存的信息放入accept queue中，否则按tcp_abort_on_overflow指示的执行。</p>
<p>tcp_abort_on_overflow 0表示如果三次握手第三步的时候accept queue满了那么server扔掉client发过来的ack。tcp_abort_on_overflow 1则表示第三步的时候如果全连接队列满了，server发送一个rst包给client，表示废掉这个握手过程和这个连接，意味着日志里可能会有很多<code>connection reset / connection reset by peer</code>。</p>
<p>那么在实际开发中，我们怎么能快速定位到tcp队列溢出呢？</p>
<p><strong>netstat命令，执行</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">netstat -s <span class="p">|</span> egrep <span class="s2">&#34;listen|LISTEN&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p></p>
<p>如上图所示，overflowed表示全连接队列溢出的次数，sockets dropped表示半连接队列溢出的次数。</p>
<p><strong>ss命令，执行</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">ss -lnt
</code></pre></td></tr></table>
</div>
</div><p></p>
<p>上面看到Send-Q 表示第三列的listen端口上的全连接队列最大为5，第一列Recv-Q为全连接队列当前使用了多少。</p>
<p>接着我们看看怎么设置全连接、半连接队列大小吧：</p>
<p>全连接队列的大小取决于min(backlog, somaxconn)。backlog是在socket创建的时候传入的，somaxconn是一个os级别的系统参数。而半连接队列的大小取决于max(64, /proc/sys/net/ipv4/tcp_max_syn_backlog)。</p>
<p>在日常开发中，我们往往使用servlet容器作为服务端，所以我们有时候也需要关注容器的连接队列大小。在tomcat中backlog叫做<code>acceptCount</code>，在jetty里面则是<code>acceptQueueSize</code>。</p>
<h3 id="rst异常">RST异常</h3>
<p>RST包表示连接重置，用于关闭一些无用的连接，通常表示异常关闭，区别于四次挥手。</p>
<p>在实际开发中，我们往往会看到<code>connection reset / connection reset by peer</code>错误，这种情况就是RST包导致的。</p>
<p><strong>端口不存在</strong></p>
<p>如果像不存在的端口发出建立连接SYN请求，那么服务端发现自己并没有这个端口则会直接返回一个RST报文，用于中断连接。</p>
<p><strong>主动代替FIN终止连接</strong></p>
<p>一般来说，正常的连接关闭都是需要通过FIN报文实现，然而我们也可以用RST报文来代替FIN，表示直接终止连接。实际开发中，可设置SO_LINGER数值来控制，这种往往是故意的，来跳过TIMED_WAIT，提供交互效率，不闲就慎用。</p>
<p><strong>客户端或服务端有一边发生了异常，该方向对端发送RST以告知关闭连接</strong></p>
<p>我们上面讲的tcp队列溢出发送RST包其实也是属于这一种。这种往往是由于某些原因，一方无法再能正常处理请求连接了(比如程序崩了，队列满了)，从而告知另一方关闭连接。</p>
<p><strong>接收到的TCP报文不在已知的TCP连接内</strong></p>
<p>比如，一方机器由于网络实在太差TCP报文失踪了，另一方关闭了该连接，然后过了许久收到了之前失踪的TCP报文，但由于对应的TCP连接已不存在，那么会直接发一个RST包以便开启新的连接。</p>
<p><strong>一方长期未收到另一方的确认报文，在一定时间或重传次数后发出RST报文</strong></p>
<p>这种大多也和网络环境相关了，网络环境差可能会导致更多的RST报文。</p>
<p>之前说过RST报文多会导致程序报错，在一个已关闭的连接上读操作会报<code>connection reset</code>，而在一个已关闭的连接上写操作则会报<code>connection reset by peer</code>。通常我们可能还会看到<code>broken pipe</code>错误，这是管道层面的错误，表示对已关闭的管道进行读写，往往是在收到RST，报出<code>connection reset</code>错后继续读写数据报的错，这个在glibc源码注释中也有介绍。</p>
<p>我们在排查故障时候怎么确定有RST包的存在呢？当然是使用tcpdump命令进行抓包，并使用wireshark进行简单分析了。<code>tcpdump -i en0 tcp -w xxx.cap</code>，en0表示监听的网卡。</p>
<p></p>
<p>接下来我们通过<code>wireshark</code>打开抓到的包，可能就能看到如下图所示，红色的就表示<code>RST</code>包了。</p>
<p></p>
<h3 id="time_wait和close_wait">TIME_WAIT和CLOSE_WAIT</h3>
<p>TIME_WAIT和CLOSE_WAIT是啥意思相信大家都知道。在线上时，我们可以直接用命令<code>netstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'</code>来查看time-wait和close_wait的数量</p>
<p>用ss命令会更快<code>ss -ant | awk '{++S[$1]} END {for(a in S) print a, S[a]}'</code></p>
<p></p>
<h4 id="time_wait">TIME_WAIT</h4>
<p>time_wait的存在一是为了丢失的数据包被后面连接复用，二是为了在<code>2MSL</code>的时间范围内正常关闭连接。它的存在其实会大大减少RST包的出现。</p>
<p>过多的time_wait在短连接频繁的场景比较容易出现。这种情况可以在服务端做一些内核参数调优:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh"><span class="c1">#表示开启重用。允许将TIME-WAIT sockets重新用于新的TCP连接，默认为0，表示关闭</span>
net.ipv4.tcp_tw_reuse <span class="o">=</span> <span class="m">1</span>
<span class="c1">#表示开启TCP连接中TIME-WAIT sockets的快速回收，默认为0，表示关闭</span>
net.ipv4.tcp_tw_recycle <span class="o">=</span> <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><p>当然我们不要忘记在NAT环境下因为时间戳错乱导致数据包被拒绝的坑了，另外的办法就是改小<code>tcp_max_tw_buckets</code>，超过这个数的time_wait都会被干掉，不过这也会导致报<code>time wait bucket table overflow</code>的错。</p>
<h4 id="close_wait">CLOSE_WAIT</h4>
<p>close_wait往往都是因为应用程序写的有问题，没有在<code>ACK</code>后再次发起FIN报文。close_wait出现的概率甚至比time_wait要更高，后果也更严重。往往是由于某个地方阻塞住了，没有正常关闭连接，从而渐渐地消耗完所有的线程。</p>
<p>想要定位这类问题，最好是通过<code>jstack</code>来分析线程堆栈来排查问题，具体可参考上述章节。这里仅举一个例子。</p>
<p>开发同学说应用上线后CLOSE_WAIT就一直增多，直到挂掉为止，<code>jstack</code>后找到比较可疑的堆栈是大部分线程都卡在了<code>countdownlatch.await</code>方法，找开发同学了解后得知使用了多线程但是确没有catch异常，修改后发现异常仅仅是最简单的升级sdk后常出现的<code>class not found</code>。</p>
]]></description>
</item>
<item>
    <title>LoveIt主题配置与使用</title>
    <link>https://freerun.xyz/loveit%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/</link>
    <pubDate>Thu, 12 May 2022 21:48:15 &#43;0800</pubDate>
    <author>Ylimhs</author>
    <guid>https://freerun.xyz/loveit%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/</guid>
    <description><![CDATA[<h1 id="hugo-loveit主题配置与使用">Hugo LoveIt主题配置与使用</h1>
<h2 id="1-安装主题">1. 安装主题</h2>
<p>把这个主题克隆到 <code>themes</code> 目录:</p>
<h2 id="2-配置主题">2. 配置主题</h2>
<h3 id="21-站点配置文件的修改">2.1. 站点配置文件的修改</h3>
<p>将<code>根目录\themes\LoveIt\exampleSite</code>路径下的<code>config.toml</code>文件复制到<a href="https://so.csdn.net/so/search?q=%e6%a0%b9%e7%9b%ae%e5%bd%95&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreffer">根目录</a>
下，覆盖掉根目录下的<code>config.toml</code>文件。然后，我们在notepad++中打开并对其作一定的修改就可以直接使用，具体可以修改的内容如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span><span class="lnt">373
</span><span class="lnt">374
</span><span class="lnt">375
</span><span class="lnt">376
</span><span class="lnt">377
</span><span class="lnt">378
</span><span class="lnt">379
</span><span class="lnt">380
</span><span class="lnt">381
</span><span class="lnt">382
</span><span class="lnt">383
</span><span class="lnt">384
</span><span class="lnt">385
</span><span class="lnt">386
</span><span class="lnt">387
</span><span class="lnt">388
</span><span class="lnt">389
</span><span class="lnt">390
</span><span class="lnt">391
</span><span class="lnt">392
</span><span class="lnt">393
</span><span class="lnt">394
</span><span class="lnt">395
</span><span class="lnt">396
</span><span class="lnt">397
</span><span class="lnt">398
</span><span class="lnt">399
</span><span class="lnt">400
</span><span class="lnt">401
</span><span class="lnt">402
</span><span class="lnt">403
</span><span class="lnt">404
</span><span class="lnt">405
</span><span class="lnt">406
</span><span class="lnt">407
</span><span class="lnt">408
</span><span class="lnt">409
</span><span class="lnt">410
</span><span class="lnt">411
</span><span class="lnt">412
</span><span class="lnt">413
</span><span class="lnt">414
</span><span class="lnt">415
</span><span class="lnt">416
</span><span class="lnt">417
</span><span class="lnt">418
</span><span class="lnt">419
</span><span class="lnt">420
</span><span class="lnt">421
</span><span class="lnt">422
</span><span class="lnt">423
</span><span class="lnt">424
</span><span class="lnt">425
</span><span class="lnt">426
</span><span class="lnt">427
</span><span class="lnt">428
</span><span class="lnt">429
</span><span class="lnt">430
</span><span class="lnt">431
</span><span class="lnt">432
</span><span class="lnt">433
</span><span class="lnt">434
</span><span class="lnt">435
</span><span class="lnt">436
</span><span class="lnt">437
</span><span class="lnt">438
</span><span class="lnt">439
</span><span class="lnt">440
</span><span class="lnt">441
</span><span class="lnt">442
</span><span class="lnt">443
</span><span class="lnt">444
</span><span class="lnt">445
</span><span class="lnt">446
</span><span class="lnt">447
</span><span class="lnt">448
</span><span class="lnt">449
</span><span class="lnt">450
</span><span class="lnt">451
</span><span class="lnt">452
</span><span class="lnt">453
</span><span class="lnt">454
</span><span class="lnt">455
</span><span class="lnt">456
</span><span class="lnt">457
</span><span class="lnt">458
</span><span class="lnt">459
</span><span class="lnt">460
</span><span class="lnt">461
</span><span class="lnt">462
</span><span class="lnt">463
</span><span class="lnt">464
</span><span class="lnt">465
</span><span class="lnt">466
</span><span class="lnt">467
</span><span class="lnt">468
</span><span class="lnt">469
</span><span class="lnt">470
</span><span class="lnt">471
</span><span class="lnt">472
</span><span class="lnt">473
</span><span class="lnt">474
</span><span class="lnt">475
</span><span class="lnt">476
</span><span class="lnt">477
</span><span class="lnt">478
</span><span class="lnt">479
</span><span class="lnt">480
</span><span class="lnt">481
</span><span class="lnt">482
</span><span class="lnt">483
</span><span class="lnt">484
</span><span class="lnt">485
</span><span class="lnt">486
</span><span class="lnt">487
</span><span class="lnt">488
</span><span class="lnt">489
</span><span class="lnt">490
</span><span class="lnt">491
</span><span class="lnt">492
</span><span class="lnt">493
</span><span class="lnt">494
</span><span class="lnt">495
</span><span class="lnt">496
</span><span class="lnt">497
</span><span class="lnt">498
</span><span class="lnt">499
</span><span class="lnt">500
</span><span class="lnt">501
</span><span class="lnt">502
</span><span class="lnt">503
</span><span class="lnt">504
</span><span class="lnt">505
</span><span class="lnt">506
</span><span class="lnt">507
</span><span class="lnt">508
</span><span class="lnt">509
</span><span class="lnt">510
</span><span class="lnt">511
</span><span class="lnt">512
</span><span class="lnt">513
</span><span class="lnt">514
</span><span class="lnt">515
</span><span class="lnt">516
</span><span class="lnt">517
</span><span class="lnt">518
</span><span class="lnt">519
</span><span class="lnt">520
</span><span class="lnt">521
</span><span class="lnt">522
</span><span class="lnt">523
</span><span class="lnt">524
</span><span class="lnt">525
</span><span class="lnt">526
</span><span class="lnt">527
</span><span class="lnt">528
</span><span class="lnt">529
</span><span class="lnt">530
</span><span class="lnt">531
</span><span class="lnt">532
</span><span class="lnt">533
</span><span class="lnt">534
</span><span class="lnt">535
</span><span class="lnt">536
</span><span class="lnt">537
</span><span class="lnt">538
</span><span class="lnt">539
</span><span class="lnt">540
</span><span class="lnt">541
</span><span class="lnt">542
</span><span class="lnt">543
</span><span class="lnt">544
</span><span class="lnt">545
</span><span class="lnt">546
</span><span class="lnt">547
</span><span class="lnt">548
</span><span class="lnt">549
</span><span class="lnt">550
</span><span class="lnt">551
</span><span class="lnt">552
</span><span class="lnt">553
</span><span class="lnt">554
</span><span class="lnt">555
</span><span class="lnt">556
</span><span class="lnt">557
</span><span class="lnt">558
</span><span class="lnt">559
</span><span class="lnt">560
</span><span class="lnt">561
</span><span class="lnt">562
</span><span class="lnt">563
</span><span class="lnt">564
</span><span class="lnt">565
</span><span class="lnt">566
</span><span class="lnt">567
</span><span class="lnt">568
</span><span class="lnt">569
</span><span class="lnt">570
</span><span class="lnt">571
</span><span class="lnt">572
</span><span class="lnt">573
</span><span class="lnt">574
</span><span class="lnt">575
</span><span class="lnt">576
</span><span class="lnt">577
</span><span class="lnt">578
</span><span class="lnt">579
</span><span class="lnt">580
</span><span class="lnt">581
</span><span class="lnt">582
</span><span class="lnt">583
</span><span class="lnt">584
</span><span class="lnt">585
</span><span class="lnt">586
</span><span class="lnt">587
</span><span class="lnt">588
</span><span class="lnt">589
</span><span class="lnt">590
</span><span class="lnt">591
</span><span class="lnt">592
</span><span class="lnt">593
</span><span class="lnt">594
</span><span class="lnt">595
</span><span class="lnt">596
</span><span class="lnt">597
</span><span class="lnt">598
</span><span class="lnt">599
</span><span class="lnt">600
</span><span class="lnt">601
</span><span class="lnt">602
</span><span class="lnt">603
</span><span class="lnt">604
</span><span class="lnt">605
</span><span class="lnt">606
</span><span class="lnt">607
</span><span class="lnt">608
</span><span class="lnt">609
</span><span class="lnt">610
</span><span class="lnt">611
</span><span class="lnt">612
</span><span class="lnt">613
</span><span class="lnt">614
</span><span class="lnt">615
</span><span class="lnt">616
</span><span class="lnt">617
</span><span class="lnt">618
</span><span class="lnt">619
</span><span class="lnt">620
</span><span class="lnt">621
</span><span class="lnt">622
</span><span class="lnt">623
</span><span class="lnt">624
</span><span class="lnt">625
</span><span class="lnt">626
</span><span class="lnt">627
</span><span class="lnt">628
</span><span class="lnt">629
</span><span class="lnt">630
</span><span class="lnt">631
</span><span class="lnt">632
</span><span class="lnt">633
</span><span class="lnt">634
</span><span class="lnt">635
</span><span class="lnt">636
</span><span class="lnt">637
</span><span class="lnt">638
</span><span class="lnt">639
</span><span class="lnt">640
</span><span class="lnt">641
</span><span class="lnt">642
</span><span class="lnt">643
</span><span class="lnt">644
</span><span class="lnt">645
</span><span class="lnt">646
</span><span class="lnt">647
</span><span class="lnt">648
</span><span class="lnt">649
</span><span class="lnt">650
</span><span class="lnt">651
</span><span class="lnt">652
</span><span class="lnt">653
</span><span class="lnt">654
</span><span class="lnt">655
</span><span class="lnt">656
</span><span class="lnt">657
</span><span class="lnt">658
</span><span class="lnt">659
</span><span class="lnt">660
</span><span class="lnt">661
</span><span class="lnt">662
</span><span class="lnt">663
</span><span class="lnt">664
</span><span class="lnt">665
</span><span class="lnt">666
</span><span class="lnt">667
</span><span class="lnt">668
</span><span class="lnt">669
</span><span class="lnt">670
</span><span class="lnt">671
</span><span class="lnt">672
</span><span class="lnt">673
</span><span class="lnt">674
</span><span class="lnt">675
</span><span class="lnt">676
</span><span class="lnt">677
</span><span class="lnt">678
</span><span class="lnt">679
</span><span class="lnt">680
</span><span class="lnt">681
</span><span class="lnt">682
</span><span class="lnt">683
</span><span class="lnt">684
</span><span class="lnt">685
</span><span class="lnt">686
</span><span class="lnt">687
</span><span class="lnt">688
</span><span class="lnt">689
</span><span class="lnt">690
</span><span class="lnt">691
</span><span class="lnt">692
</span><span class="lnt">693
</span><span class="lnt">694
</span><span class="lnt">695
</span><span class="lnt">696
</span><span class="lnt">697
</span><span class="lnt">698
</span><span class="lnt">699
</span><span class="lnt">700
</span><span class="lnt">701
</span><span class="lnt">702
</span><span class="lnt">703
</span><span class="lnt">704
</span><span class="lnt">705
</span><span class="lnt">706
</span><span class="lnt">707
</span><span class="lnt">708
</span><span class="lnt">709
</span><span class="lnt">710
</span><span class="lnt">711
</span><span class="lnt">712
</span><span class="lnt">713
</span><span class="lnt">714
</span><span class="lnt">715
</span><span class="lnt">716
</span><span class="lnt">717
</span><span class="lnt">718
</span><span class="lnt">719
</span><span class="lnt">720
</span><span class="lnt">721
</span><span class="lnt">722
</span><span class="lnt">723
</span><span class="lnt">724
</span><span class="lnt">725
</span><span class="lnt">726
</span><span class="lnt">727
</span><span class="lnt">728
</span><span class="lnt">729
</span><span class="lnt">730
</span><span class="lnt">731
</span><span class="lnt">732
</span><span class="lnt">733
</span><span class="lnt">734
</span><span class="lnt">735
</span><span class="lnt">736
</span><span class="lnt">737
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-toml" data-lang="toml"><span class="nx">baseURL</span> <span class="p">=</span> <span class="s2">&#34;https://luckly.work&#34;</span>
<span class="c"># [en, zh-cn, fr, pl, ...] determines default content language</span>
<span class="c"># [en, zh-cn, fr, pl, ...] 设置默认的语言</span>
<span class="nx">defaultContentLanguage</span> <span class="p">=</span> <span class="s2">&#34;zh-cn&#34;</span>
<span class="c"># 网站语言, 仅在这里 CN大写</span>
<span class="nx">languageCode</span> <span class="p">=</span> <span class="s2">&#34;zh-CN&#34;</span>
<span class="c"># 是否包括中日韩文字</span>
<span class="nx">hasCJKLanguage</span> <span class="p">=</span> <span class="kc">true</span>
<span class="c"># 主题</span>
<span class="nx">theme</span> <span class="p">=</span> <span class="s2">&#34;LoveIt&#34;</span>
<span class="c"># 网站标题</span>
<span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;Lucklyの博客 - 在阅读中遇见自己&#34;</span>
<span class="c"># 是否使用 robots.txt</span>
<span class="nx">enableRobotsTXT</span> <span class="p">=</span> <span class="kc">true</span>
<span class="c"># 是否使用 git 信息</span>
<span class="nx">enableGitInfo</span> <span class="p">=</span> <span class="kc">true</span>
<span class="c"># 是否使用 emoji 代码</span>
<span class="nx">enableEmoji</span> <span class="p">=</span> <span class="kc">true</span>
<span class="p">[</span><span class="nx">languages</span><span class="p">]</span>


  <span class="p">[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">]</span>
    <span class="nx">weight</span> <span class="p">=</span> <span class="mi">2</span>
    <span class="c"># 网站语言, 仅在这里 CN 大写</span>
    <span class="nx">languageCode</span> <span class="p">=</span> <span class="s2">&#34;zh-CN&#34;</span>
    <span class="c"># 语言名称</span>
    <span class="nx">languageName</span> <span class="p">=</span> <span class="s2">&#34;简体中文&#34;</span>
    <span class="c"># 是否包括中日韩文字</span>
    <span class="nx">hasCJKLanguage</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># 默认每页列表显示的文章数目</span>
    <span class="nx">paginate</span> <span class="p">=</span> <span class="mi">12</span>
    <span class="c"># [UA-XXXXXXXX-X] 谷歌分析代号</span>
    <span class="nx">googleAnalytics</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
    <span class="c"># 版权描述，仅仅用于 SEO</span>
    <span class="nx">copyright</span> <span class="p">=</span> <span class="s2">&#34;This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.&#34;</span>
    <span class="c"># 菜单配置</span>
    <span class="p">[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">menu</span><span class="p">]</span>
      <span class="p">[[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">menu</span><span class="p">.</span><span class="nx">main</span><span class="p">]]</span>
        <span class="nx">identifier</span> <span class="p">=</span> <span class="s2">&#34;posts&#34;</span>
        <span class="c"># 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标</span>
        <span class="nx">pre</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="c"># 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标</span>
        <span class="nx">post</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;所有文章&#34;</span>
        <span class="nx">url</span> <span class="p">=</span> <span class="s2">&#34;/posts/&#34;</span>
        <span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">weight</span> <span class="p">=</span> <span class="mi">1</span>
      <span class="p">[[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">menu</span><span class="p">.</span><span class="nx">main</span><span class="p">]]</span>
        <span class="nx">identifier</span> <span class="p">=</span> <span class="s2">&#34;tags&#34;</span>
        <span class="nx">pre</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">post</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;标签&#34;</span>
        <span class="nx">url</span> <span class="p">=</span> <span class="s2">&#34;/tags/&#34;</span>
        <span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">weight</span> <span class="p">=</span> <span class="mi">2</span>
      <span class="p">[[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">menu</span><span class="p">.</span><span class="nx">main</span><span class="p">]]</span>
        <span class="nx">identifier</span> <span class="p">=</span> <span class="s2">&#34;categories&#34;</span>
        <span class="nx">pre</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">post</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;分类&#34;</span>
        <span class="nx">url</span> <span class="p">=</span> <span class="s2">&#34;/categories/&#34;</span>
        <span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">weight</span> <span class="p">=</span> <span class="mi">3</span>
      <span class="p">[[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">menu</span><span class="p">.</span><span class="nx">main</span><span class="p">]]</span>
        <span class="nx">identifier</span> <span class="p">=</span> <span class="s2">&#34;documentation&#34;</span>
        <span class="nx">pre</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;文档&#34;</span>
        <span class="nx">url</span> <span class="p">=</span> <span class="s2">&#34;/categories/documentation/&#34;</span>
        <span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">weight</span> <span class="p">=</span> <span class="mi">4</span>
      <span class="p">[[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">menu</span><span class="p">.</span><span class="nx">main</span><span class="p">]]</span>
        <span class="nx">identifier</span> <span class="p">=</span> <span class="s2">&#34;about&#34;</span>
        <span class="nx">pre</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">post</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;关于&#34;</span>
        <span class="nx">url</span> <span class="p">=</span> <span class="s2">&#34;/about/&#34;</span>
        <span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">weight</span> <span class="p">=</span> <span class="mi">5</span>
      <span class="p">[[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">menu</span><span class="p">.</span><span class="nx">main</span><span class="p">]]</span>
        <span class="nx">identifier</span> <span class="p">=</span> <span class="s2">&#34;github&#34;</span>
        <span class="nx">pre</span> <span class="p">=</span> <span class="s2">&#34;&lt;i class=&#39;fab fa-github fa-fw&#39;&gt;&lt;/i&gt;&#34;</span>
        <span class="nx">post</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;Github&#34;</span>
        <span class="nx">url</span> <span class="p">=</span> <span class="s2">&#34;https://github.com/ITmxs&#34;</span>
        <span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;GitHub&#34;</span>
        <span class="nx">weight</span> <span class="p">=</span> <span class="mi">6</span>
      <span class="p">[[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">menu</span><span class="p">.</span><span class="nx">main</span><span class="p">]]</span>
        <span class="nx">identifier</span> <span class="p">=</span> <span class="s2">&#34;friend&#34;</span>
        <span class="nx">pre</span> <span class="p">=</span> <span class="s2">&#34;&lt;i class=&#39;fas fa-user-friends&#39;&gt;&lt;/i&gt;&#34;</span>
        <span class="nx">post</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;友链&#34;</span>
        <span class="nx">url</span> <span class="p">=</span> <span class="s2">&#34;/friend/&#34;</span>
        <span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">weight</span> <span class="p">=</span> <span class="mi">7</span>      
    <span class="p">[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">params</span><span class="p">]</span>
      <span class="c"># 网站描述</span>
      <span class="nx">description</span> <span class="p">=</span> <span class="s2">&#34;早起的年轻人做的网站&#34;</span>
      <span class="c"># 网站关键词</span>
      <span class="nx">keywords</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;Theme&#34;</span><span class="p">,</span> <span class="s2">&#34;Hugo&#34;</span><span class="p">]</span>
      <span class="c"># 应用图标配置</span>
      <span class="p">[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">app</span><span class="p">]</span>
        <span class="c"># 当添加到 iOS 主屏幕或者 Android 启动器时的标题, 覆盖默认标题</span>
        <span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;LoveIt&#34;</span>
        <span class="c"># 是否隐藏网站图标资源链接</span>
        <span class="nx">noFavicon</span> <span class="p">=</span> <span class="kc">false</span>
        <span class="c"># 更现代的 SVG 网站图标, 可替代旧的 .png 和 .ico 文件</span>
        <span class="nx">svgFavicon</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="c"># Android 浏览器主题色</span>
        <span class="nx">themeColor</span> <span class="p">=</span> <span class="s2">&#34;#ffffff&#34;</span>
        <span class="c"># Safari 图标颜色</span>
        <span class="nx">iconColor</span> <span class="p">=</span> <span class="s2">&#34;#5bbad5&#34;</span>
        <span class="c"># Windows v8-10 磁贴颜色</span>
        <span class="nx">tileColor</span> <span class="p">=</span> <span class="s2">&#34;#da532c&#34;</span>
      <span class="c"># 搜索配置</span>
      <span class="p">[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">search</span><span class="p">]</span>
        <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
        <span class="c"># 搜索引擎的类型 (&#34;lunr&#34;, &#34;algolia&#34;)</span>
        <span class="nx">type</span> <span class="p">=</span> <span class="s2">&#34;algolia&#34;</span>
        <span class="c"># 文章内容最长索引长度</span>
        <span class="nx">contentLength</span> <span class="p">=</span> <span class="mi">4000</span>
        <span class="c"># 搜索框的占位提示语</span>
        <span class="nx">placeholder</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="c"># 最大结果数目</span>
        <span class="nx">maxResultLength</span> <span class="p">=</span> <span class="mi">10</span>
        <span class="c"># 结果内容片段长度</span>
        <span class="nx">snippetLength</span> <span class="p">=</span> <span class="mi">50</span>
        <span class="c"># 搜索结果中高亮部分的 HTML 标签</span>
        <span class="nx">highlightTag</span> <span class="p">=</span> <span class="s2">&#34;em&#34;</span>
        <span class="c"># 是否在搜索索引中使用基于 baseURL 的绝对路径</span>
        <span class="nx">absoluteURL</span> <span class="p">=</span> <span class="kc">false</span>
        <span class="p">[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">search</span><span class="p">.</span><span class="nx">algolia</span><span class="p">]</span>
          <span class="nx">index</span> <span class="p">=</span> <span class="s2">&#34;index.zh-cn&#34;</span>
          <span class="nx">appID</span> <span class="p">=</span> <span class="s2">&#34;PASDMWALPK&#34;</span>
          <span class="nx">searchKey</span> <span class="p">=</span> <span class="s2">&#34;b42948e51daaa93df92381c8e2ac0f93&#34;</span>
      <span class="c"># 主页信息设置</span>
      <span class="p">[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">home</span><span class="p">]</span>
        <span class="c"># RSS 文章数目</span>
        <span class="nx">rss</span> <span class="p">=</span> <span class="mi">10</span>
        <span class="c"># 主页个人信息</span>
        <span class="p">[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">home</span><span class="p">.</span><span class="nx">profile</span><span class="p">]</span>
          <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
          <span class="c"># Gravatar 邮箱，用于优先在主页显示的头像</span>
          <span class="nx">gravatarEmail</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
          <span class="c"># 主页显示头像的 URL</span>
          <span class="nx">avatarURL</span> <span class="p">=</span> <span class="s2">&#34;/images/avatar.png&#34;</span>
          <span class="c"># 主页显示的网站标题 (支持 HTML 格式)</span>
          <span class="nx">title</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
          <span class="c"># 主页显示的网站副标题</span>
          <span class="nx">subtitle</span> <span class="p">=</span> <span class="s2">&#34;一个记录学习过程的网站&#34;</span>
          <span class="c"># 是否为副标题显示打字机动画</span>
          <span class="nx">typeit</span> <span class="p">=</span> <span class="kc">true</span>
          <span class="c"># 是否显示社交账号</span>
          <span class="nx">social</span> <span class="p">=</span> <span class="kc">true</span>
          <span class="c"># 免责声明 (支持 HTML 格式)</span>
          <span class="nx">disclaimer</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="c"># 主页文章列表</span>
        <span class="p">[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">home</span><span class="p">.</span><span class="nx">posts</span><span class="p">]</span>
          <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
          <span class="c"># 主页每页显示文章数量</span>
          <span class="nx">paginate</span> <span class="p">=</span> <span class="mi">6</span>
      <span class="c"># 主页的社交信息设置</span>
      <span class="p">[</span><span class="nx">languages</span><span class="p">.</span><span class="nx">zh</span><span class="err">-</span><span class="nx">cn</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">social</span><span class="p">]</span>
        <span class="nx">GitHub</span> <span class="p">=</span> <span class="s2">&#34;ITmxs&#34;</span>
        <span class="nx">Bilibili</span> <span class="p">=</span> <span class="s2">&#34;480883651&#34;</span>
        <span class="nx">Zhihu</span> <span class="p">=</span> <span class="s2">&#34;yimi-yang-guang-96-65&#34;</span>
        <span class="nx">Linkedin</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Twitter</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Instagram</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Facebook</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Telegram</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Medium</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Gitlab</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Youtubelegacy</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Youtubecustom</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Youtubechannel</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Tumblr</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Quora</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Keybase</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Pinterest</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Reddit</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Codepen</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">FreeCodeCamp</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Bitbucket</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Stackoverflow</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="c"># Weibo = &#34;xxxx&#34;</span>
        <span class="nx">Odnoklassniki</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">VK</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Flickr</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Xing</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Snapchat</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Soundcloud</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Spotify</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Bandcamp</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Paypal</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Fivehundredpx</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Mix</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Goodreads</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Lastfm</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Foursquare</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Hackernews</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Kickstarter</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Patreon</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="c"># Steam = &#34;xxxx&#34;</span>
        <span class="nx">Twitch</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Strava</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Skype</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Whatsapp</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="c"># Juejin =&#34;user/3843548384077192&#34;</span>
        <span class="c"># Douban = &#34;xxxx&#34;</span>
        <span class="nx">Angellist</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Slidershare</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Jsfiddle</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Deviantart</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Behance</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Dribbble</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Wordpress</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Vine</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Googlescholar</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Researchgate</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Mastodon</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Thingiverse</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Devto</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Gitea</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">XMPP</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">Matrix</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      
        <span class="c"># Email = &#34;852851198@qq.com&#34;</span>
        <span class="c"># RSS = true</span>


<span class="p">[</span><span class="nx">params</span><span class="p">]</span>
  <span class="c"># LoveIt theme version</span>
  <span class="c"># LoveIt 主题版本</span>
  <span class="nx">version</span> <span class="p">=</span> <span class="s2">&#34;0.2.X&#34;</span>
  <span class="c"># site default theme (&#34;light&#34;, &#34;dark&#34;, &#34;auto&#34;)</span>
  <span class="c"># 网站默认主题 (&#34;light&#34;, &#34;dark&#34;, &#34;auto&#34;)</span>
  <span class="nx">defaultTheme</span> <span class="p">=</span> <span class="s2">&#34;auto&#34;</span>
  <span class="c"># public git repo url only then enableGitInfo is true</span>
  <span class="c"># 公共 git 仓库路径，仅在 enableGitInfo 设为 true 时有效</span>
  <span class="nx">gitRepo</span> <span class="p">=</span> <span class="s2">&#34;https://github.com/dillonzq/LoveIt&#34;</span>
  <span class="c"># which hash function used for SRI, when empty, no SRI is used (&#34;sha256&#34;, &#34;sha384&#34;, &#34;sha512&#34;, &#34;md5&#34;)</span>
  <span class="c"># 哪种哈希函数用来 SRI, 为空时表示不使用 SRI (&#34;sha256&#34;, &#34;sha384&#34;, &#34;sha512&#34;, &#34;md5&#34;)</span>
  <span class="nx">fingerprint</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
  <span class="c"># date format</span>
  <span class="c"># 日期格式</span>
  <span class="nx">dateFormat</span> <span class="p">=</span> <span class="s2">&#34;2006-01-02&#34;</span>
  <span class="c"># website images for Open Graph and Twitter Cards</span>
  <span class="c"># 网站图片, 用于 Open Graph 和 Twitter Cards</span>
  <span class="nx">images</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;/logo.png&#34;</span><span class="p">]</span>
  <span class="c">#来自之前</span>
  <span class="nx">archivePaginate</span> <span class="p">=</span> <span class="mi">50</span>

  <span class="c"># show &#39;xx Posts In Total&#39; in archive page ?            # 是否在归档页显示文章的总数</span>
  <span class="nx">showArchiveCount</span> <span class="p">=</span> <span class="kc">true</span>
  <span class="c"># Header config</span>
  <span class="c"># 页面头部导航栏配置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">header</span><span class="p">]</span>
    <span class="c"># desktop header mode (&#34;fixed&#34;, &#34;normal&#34;, &#34;auto&#34;)</span>
    <span class="c"># 桌面端导航栏模式 (&#34;fixed&#34;, &#34;normal&#34;, &#34;auto&#34;)</span>
    <span class="nx">desktopMode</span> <span class="p">=</span> <span class="s2">&#34;fixed&#34;</span>
    <span class="c"># mobile header mode (&#34;fixed&#34;, &#34;normal&#34;, &#34;auto&#34;)</span>
    <span class="c"># 移动端导航栏模式 (&#34;fixed&#34;, &#34;normal&#34;, &#34;auto&#34;)</span>
    <span class="nx">mobileMode</span> <span class="p">=</span> <span class="s2">&#34;auto&#34;</span>
    <span class="c"># Header title config</span>
    <span class="c"># 页面头部导航栏标题配置</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">header</span><span class="p">.</span><span class="nx">title</span><span class="p">]</span>
      <span class="c"># URL of the LOGO</span>
      <span class="c"># LOGO 的 URL</span>
      <span class="nx">logo</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="c"># title name</span>
      <span class="c"># 标题名称</span>
      <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;早起的年轻人&#34;</span>
      <span class="c"># you can add extra information before the name (HTML format is supported), such as icons</span>
      <span class="c"># 你可以在名称 (允许 HTML 格式) 之前添加其他信息, 例如图标</span>
      <span class="nx">pre</span> <span class="p">=</span> <span class="s2">&#34;&lt;i class=&#39;far fa-kiss-wink-heart fa-fw&#39;&gt;&lt;/i&gt;&#34;</span>
      <span class="c"># you can add extra information after the name (HTML format is supported), such as icons</span>
      <span class="c"># 你可以在名称 (允许 HTML 格式) 之后添加其他信息, 例如图标</span>
      <span class="nx">post</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="c"># whether to use typeit animation for title name</span>
      <span class="c"># 是否为标题显示打字机动画</span>
      <span class="nx">typeit</span> <span class="p">=</span> <span class="kc">true</span>

  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">busuanzi</span><span class="p">]</span>         <span class="c"># count web traffic by busuanzi                             # 是否使用不蒜子统计站点访问量</span>
    <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="nx">siteUV</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="nx">sitePV</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="nx">pagePV</span> <span class="p">=</span> <span class="kc">true</span>

  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">reward</span><span class="p">]</span>                                         <span class="c"># 文章打赏</span>
    <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="nx">wechat</span> <span class="p">=</span> <span class="s2">&#34;/path/to/your/wechat-qr-code.png&#34;</span>           <span class="c"># 微信二维码</span>
    <span class="nx">alipay</span> <span class="p">=</span> <span class="s2">&#34;/path/to/your/alipay-qr-code.png&#34;</span>    
  <span class="c"># Footer config</span>
  <span class="c"># 页面底部信息配置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">footer</span><span class="p">]</span>
    <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># Custom content (HTML format is supported)</span>
    <span class="c"># 自定义内容 (支持 HTML 格式)</span>
    <span class="nx">custom</span> <span class="p">=</span> <span class="s1">&#39;&#39;</span>
    <span class="c"># whether to show Hugo and theme info</span>
    <span class="c"># 是否显示 Hugo 和主题信息</span>
    <span class="nx">hugo</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># whether to show copyright info</span>
    <span class="c"># 是否显示版权信息</span>
    <span class="nx">copyright</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># whether to show the author</span>
    <span class="c"># 是否显示作者</span>
    <span class="nx">author</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># site creation time</span>
    <span class="c"># 网站创立年份</span>
    <span class="nx">since</span> <span class="p">=</span> <span class="mi">2021</span>
    <span class="c"># ICP info only in China (HTML format is supported)</span>
    <span class="c"># ICP 备案信息，仅在中国使用 (支持 HTML 格式)</span>
    <span class="nx">icp</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
    <span class="c"># license info (HTML format is supported)</span>
    <span class="c"># 许可协议信息 (支持 HTML 格式)</span>
    <span class="nx">license</span><span class="p">=</span> <span class="s1">&#39;&lt;a rel=&#34;license external nofollow noopener noreffer&#34; href=&#34;https://creativecommons.org/licenses/by-nc/4.0/&#34; target=&#34;_blank&#34;&gt;CC BY-NC 4.0&lt;/a&gt;&#39;</span>

  <span class="c"># Section (all posts) page config</span>
  <span class="c"># Section (所有文章) 页面配置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">section</span><span class="p">]</span>
    <span class="c"># special amount of posts in each section page</span>
    <span class="c"># section 页面每页显示文章数量</span>
    <span class="nx">paginate</span> <span class="p">=</span> <span class="mi">20</span>
    <span class="c"># date format (month and day)</span>
    <span class="c"># 日期格式 (月和日)</span>
    <span class="nx">dateFormat</span> <span class="p">=</span> <span class="s2">&#34;01-02&#34;</span>
    <span class="c"># amount of RSS pages</span>
    <span class="c"># RSS 文章数目</span>
    <span class="nx">rss</span> <span class="p">=</span> <span class="mi">10</span>

  <span class="c"># List (category or tag) page config</span>
  <span class="c"># List (目录或标签) 页面配置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">list</span><span class="p">]</span>
    <span class="c"># special amount of posts in each list page</span>
    <span class="c"># list 页面每页显示文章数量</span>
    <span class="nx">paginate</span> <span class="p">=</span> <span class="mi">20</span>
    <span class="c"># date format (month and day)</span>
    <span class="c"># 日期格式 (月和日)</span>
    <span class="nx">dateFormat</span> <span class="p">=</span> <span class="s2">&#34;01-02&#34;</span>
    <span class="c"># amount of RSS pages</span>
    <span class="c"># RSS 文章数目</span>
    <span class="nx">rss</span> <span class="p">=</span> <span class="mi">10</span>

  <span class="c"># Page config</span>
  <span class="c"># 文章页面配置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span>
    <span class="c"># whether to hide a page from home page</span>
    <span class="c"># 是否在主页隐藏一篇文章</span>
    <span class="nx">hiddenFromHomePage</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="c"># whether to hide a page from search results</span>
    <span class="c"># 是否在搜索结果中隐藏一篇文章</span>
    <span class="nx">hiddenFromSearch</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="c"># whether to enable twemoji</span>
    <span class="c"># 是否使用 twemoji</span>
    <span class="nx">twemoji</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="c"># whether to enable lightgallery</span>
    <span class="c"># 是否使用 lightgallery</span>
    <span class="nx">lightgallery</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="c"># whether to enable the ruby extended syntax</span>
    <span class="c"># 是否使用 ruby 扩展语法</span>
    <span class="nx">ruby</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># whether to enable the fraction extended syntax</span>
    <span class="c"># 是否使用 fraction 扩展语法</span>
    <span class="nx">fraction</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># whether to enable the fontawesome extended syntax</span>
    <span class="c"># 是否使用 fontawesome 扩展语法</span>
    <span class="nx">fontawesome</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># whether to show link to Raw Markdown content of the content</span>
    <span class="c"># 是否显示原始 Markdown 文档内容的链接</span>
    <span class="nx">linkToMarkdown</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># whether to show the full text content in RSS</span>
    <span class="c"># 是否在 RSS 中显示全文内容</span>
    <span class="nx">rssFullText</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="c"># Table of the contents config</span>
    <span class="c"># 目录配置</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">toc</span><span class="p">]</span>
      <span class="c"># whether to enable the table of the contents</span>
      <span class="c"># 是否使用目录</span>
      <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="c"># whether to keep the static table of the contents in front of the post</span>
      <span class="c"># 是否保持使用文章前面的静态目录</span>
      <span class="nx">keepStatic</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="c"># whether to make the table of the contents in the sidebar automatically collapsed</span>
      <span class="c"># 是否使侧边目录自动折叠展开</span>
      <span class="nx">auto</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># Code config</span>
    <span class="c"># 代码配置</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">code</span><span class="p">]</span>
      <span class="c"># whether to show the copy button of the code block</span>
      <span class="c"># 是否显示代码块的复制按钮</span>
      <span class="nx">copy</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="c"># the maximum number of lines of displayed code by default</span>
      <span class="c"># 默认展开显示的代码行数</span>
      <span class="nx">maxShownLines</span> <span class="p">=</span> <span class="mi">10</span>
    <span class="c"># KaTeX mathematical formulas config (KaTeX https://katex.org/)</span>
    <span class="c"># KaTeX 数学公式配置 (KaTeX https://katex.org/)</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">math</span><span class="p">]</span>
      <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="c"># default block delimiter is $$ ... $$ and \\[ ... \\]</span>
      <span class="c"># 默认块定界符是 $$ ... $$ 和 \\[ ... \\]</span>
      <span class="nx">blockLeftDelimiter</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="nx">blockRightDelimiter</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="c"># default inline delimiter is $ ... $ and \\( ... \\)</span>
      <span class="c"># 默认行内定界符是 $ ... $ 和 \\( ... \\)</span>
      <span class="nx">inlineLeftDelimiter</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="nx">inlineRightDelimiter</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="c"># KaTeX extension copy_tex</span>
      <span class="c"># KaTeX 插件 copy_tex</span>
      <span class="nx">copyTex</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="c"># KaTeX extension mhchem</span>
      <span class="c"># KaTeX 插件 mhchem</span>
      <span class="nx">mhchem</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># Mapbox GL JS config (Mapbox GL JS https://docs.mapbox.com/mapbox-gl-js)</span>
    <span class="c"># Mapbox GL JS 配置 (Mapbox GL JS https://docs.mapbox.com/mapbox-gl-js)</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">mapbox</span><span class="p">]</span>
      <span class="c"># access token of Mapbox GL JS</span>
      <span class="c"># Mapbox GL JS 的 access token</span>
      <span class="nx">accessToken</span> <span class="p">=</span> <span class="s2">&#34;pk.eyJ1IjoiZGlsbG9uenEiLCJhIjoiY2s2czd2M2x3MDA0NjNmcGxmcjVrZmc2cyJ9.aSjv2BNuZUfARvxRYjSVZQ&#34;</span>
      <span class="c"># style for the light theme</span>
      <span class="c"># 浅色主题的地图样式</span>
      <span class="nx">lightStyle</span> <span class="p">=</span> <span class="s2">&#34;mapbox://styles/mapbox/light-v10?optimize=true&#34;</span>
      <span class="c"># style for the dark theme</span>
      <span class="c"># 深色主题的地图样式</span>
      <span class="nx">darkStyle</span> <span class="p">=</span> <span class="s2">&#34;mapbox://styles/mapbox/dark-v10?optimize=true&#34;</span>
      <span class="c"># whether to add NavigationControl (https://docs.mapbox.com/mapbox-gl-js/api/#navigationcontrol)</span>
      <span class="c"># 是否添加 NavigationControl (https://docs.mapbox.com/mapbox-gl-js/api/#navigationcontrol)</span>
      <span class="nx">navigation</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="c"># whether to add GeolocateControl (https://docs.mapbox.com/mapbox-gl-js/api/#geolocatecontrol)</span>
      <span class="c"># 是否添加 GeolocateControl (https://docs.mapbox.com/mapbox-gl-js/api/#geolocatecontrol)</span>
      <span class="nx">geolocate</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="c"># whether to add ScaleControl (https://docs.mapbox.com/mapbox-gl-js/api/#scalecontrol)</span>
      <span class="c"># 是否添加 ScaleControl (https://docs.mapbox.com/mapbox-gl-js/api/#scalecontrol)</span>
      <span class="nx">scale</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="c"># whether to add FullscreenControl (https://docs.mapbox.com/mapbox-gl-js/api/#fullscreencontrol)</span>
      <span class="c"># 是否添加 FullscreenControl (https://docs.mapbox.com/mapbox-gl-js/api/#fullscreencontrol)</span>
      <span class="nx">fullscreen</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># Social share links in post page</span>
    <span class="c"># 文章页面的分享信息设置</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">share</span><span class="p">]</span>
      <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">Twitter</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">Facebook</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">Linkedin</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Whatsapp</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Pinterest</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Tumblr</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">HackerNews</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">Reddit</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">VK</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Buffer</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Xing</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Line</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">Instapaper</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Pocket</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Digg</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Stumbleupon</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Flipboard</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Weibo</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">Renren</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Myspace</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Blogger</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Baidu</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Odnoklassniki</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Evernote</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Skype</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Trello</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">Mix</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="c"># Comment config</span>
    <span class="c"># 评论系统设置</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">comment</span><span class="p">]</span>
      <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="c"># Disqus comment config (https://disqus.com/)</span>
      <span class="c"># Disqus 评论系统设置 (https://disqus.com/)</span>
      <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">comment</span><span class="p">.</span><span class="nx">disqus</span><span class="p">]</span>
        <span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span>
        <span class="c"># Disqus shortname to use Disqus in posts</span>
        <span class="c"># Disqus 的 shortname，用来在文章中启用 Disqus 评论系统</span>
        <span class="nx">shortname</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="c"># Gitalk comment config (https://github.com/gitalk/gitalk)</span>
      <span class="c"># Gitalk 评论系统设置 (https://github.com/gitalk/gitalk)</span>
      <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">comment</span><span class="p">.</span><span class="nx">gitalk</span><span class="p">]</span>
        <span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span>
        <span class="nx">owner</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">repo</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">clientId</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">clientSecret</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="c"># Valine comment config (https://github.com/xCss/Valine)</span>
      <span class="c"># Valine 评论系统设置 (https://github.com/xCss/Valine)</span>
      <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">comment</span><span class="p">.</span><span class="nx">valine</span><span class="p">]</span>
        <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
        <span class="nx">appId</span> <span class="p">=</span> <span class="s1">&#39;cIRpq8figzQxyGz5LyAdUahJ-gzGzoHsz&#39;</span>
        <span class="nx">appKey</span> <span class="p">=</span> <span class="s1">&#39;T9YWfgGhznKaXXx7TCLxzS3C&#39;</span>
        <span class="nx">notify</span> <span class="p">=</span> <span class="kc">true</span>  <span class="c"># mail notifier , https://github.com/xCss/Valine/wiki</span>
        <span class="nx">verify</span> <span class="p">=</span> <span class="kc">false</span> <span class="c"># Verification code</span>
        <span class="nx">avatar</span> <span class="p">=</span> <span class="s1">&#39;robohash&#39;</span>
        <span class="nx">placeholder</span> <span class="p">=</span> <span class="s1">&#39;说点什么吧...&#39;</span>
        <span class="nx">visitor</span> <span class="p">=</span> <span class="kc">true</span>
        <span class="nx">path</span> <span class="p">=</span> <span class="kc">true</span>
        <span class="nx">meta</span> <span class="p">=</span> <span class="kc">true</span>
        <span class="nx">pageSize</span> <span class="p">=</span> <span class="kc">true</span>
        <span class="nx">lang</span> <span class="p">=</span> <span class="kc">true</span>
        <span class="nx">enableQQ</span> <span class="p">=</span> <span class="kc">true</span>
        <span class="c"># Facebook comment config (https://developers.facebook.com/docs/plugins/comments)</span>
        <span class="c"># Facebook 评论系统设置 (https://developers.facebook.com/docs/plugins/comments)</span>
      <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">comment</span><span class="p">.</span><span class="nx">facebook</span><span class="p">]</span>
        <span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span>
        <span class="nx">width</span> <span class="p">=</span> <span class="s2">&#34;100%&#34;</span>
        <span class="nx">numPosts</span> <span class="p">=</span> <span class="mi">10</span>
        <span class="nx">appId</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">languageCode</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="c"># Telegram comments config (https://comments.app/)</span>
      <span class="c"># Telegram comments 评论系统设置 (https://comments.app/)</span>
      <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">comment</span><span class="p">.</span><span class="nx">telegram</span><span class="p">]</span>
        <span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span>
        <span class="nx">siteID</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">limit</span> <span class="p">=</span> <span class="mi">5</span>
        <span class="nx">height</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">color</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">colorful</span> <span class="p">=</span> <span class="kc">true</span>
        <span class="nx">dislikes</span> <span class="p">=</span> <span class="kc">false</span>
        <span class="nx">outlined</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="c"># Commento comment config (https://commento.io/)</span>
      <span class="c"># Commento comment 评论系统设置 (https://commento.io/)</span>
      <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">comment</span><span class="p">.</span><span class="nx">commento</span><span class="p">]</span>
        <span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="c"># Utterances comment config (https://utteranc.es/)</span>
      <span class="c"># Utterances comment 评论系统设置 (https://utteranc.es/)</span>
      <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">comment</span><span class="p">.</span><span class="nx">utterances</span><span class="p">]</span>
        <span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span>
        <span class="c"># owner/repo</span>
        <span class="nx">repo</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">issueTerm</span> <span class="p">=</span> <span class="s2">&#34;pathname&#34;</span>
        <span class="nx">label</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
        <span class="nx">lightTheme</span> <span class="p">=</span> <span class="s2">&#34;github-light&#34;</span>
        <span class="nx">darkTheme</span> <span class="p">=</span> <span class="s2">&#34;github-dark&#34;</span>
    <span class="c"># Third-party library config</span>
    <span class="c"># 第三方库配置</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">library</span><span class="p">]</span>
      <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">library</span><span class="p">.</span><span class="nx">css</span><span class="p">]</span>
        <span class="c"># someCSS = &#34;some.css&#34;</span>
        <span class="c"># located in &#34;assets/&#34; 位于 &#34;assets/&#34;</span>
        <span class="c"># Or 或者</span>
        <span class="c"># someCSS = &#34;https://cdn.example.com/some.css&#34;</span>
      <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">library</span><span class="p">.</span><span class="nx">js</span><span class="p">]</span>
        <span class="c"># someJavascript = &#34;some.js&#34;</span>
        <span class="c"># located in &#34;assets/&#34; 位于 &#34;assets/&#34;</span>
        <span class="c"># Or 或者</span>
        <span class="c"># someJavascript = &#34;https://cdn.example.com/some.js&#34;</span>
    <span class="c"># Page SEO config</span>
    <span class="c"># 页面 SEO 配置</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">seo</span><span class="p">]</span>
      <span class="c"># image URL</span>
      <span class="c"># 图片 URL</span>
      <span class="nx">images</span> <span class="p">=</span> <span class="p">[]</span>
      <span class="c"># Publisher info</span>
      <span class="c"># 出版者信息</span>
      <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">page</span><span class="p">.</span><span class="nx">seo</span><span class="p">.</span><span class="nx">publisher</span><span class="p">]</span>
        <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;xxxx&#34;</span>
        <span class="nx">logoUrl</span> <span class="p">=</span> <span class="s2">&#34;/images/avatar.png&#34;</span>

  <span class="c"># TypeIt config</span>
  <span class="c"># TypeIt 配置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">typeit</span><span class="p">]</span>
    <span class="c"># typing speed between each step (measured in milliseconds)</span>
    <span class="c"># 每一步的打字速度 (单位是毫秒)</span>
    <span class="nx">speed</span> <span class="p">=</span> <span class="mi">100</span>
    <span class="c"># blinking speed of the cursor (measured in milliseconds)</span>
    <span class="c"># 光标的闪烁速度 (单位是毫秒)</span>
    <span class="nx">cursorSpeed</span> <span class="p">=</span> <span class="mi">1000</span>
    <span class="c"># character used for the cursor (HTML format is supported)</span>
    <span class="c"># 光标的字符 (支持 HTML 格式)</span>
    <span class="nx">cursorChar</span> <span class="p">=</span> <span class="s2">&#34;|&#34;</span>
    <span class="c"># cursor duration after typing finishing (measured in milliseconds, &#34;-1&#34; means unlimited)</span>
    <span class="c"># 打字结束之后光标的持续时间 (单位是毫秒, &#34;-1&#34; 代表无限大)</span>
    <span class="nx">duration</span> <span class="p">=</span> <span class="mi">-1</span>

  <span class="c"># Site verification code for Google/Bing/Yandex/Pinterest/Baidu</span>
  <span class="c"># 网站验证代码，用于 Google/Bing/Yandex/Pinterest/Baidu</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">verification</span><span class="p">]</span>
    <span class="nx">google</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
    <span class="nx">bing</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
    <span class="nx">yandex</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
    <span class="nx">pinterest</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
    <span class="nx">baidu</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>

  <span class="c"># Site SEO config</span>
  <span class="c"># 网站 SEO 配置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">seo</span><span class="p">]</span>
    <span class="c"># image URL</span>
    <span class="c"># 图片 URL</span>
    <span class="nx">image</span> <span class="p">=</span> <span class="s2">&#34;/images/Apple-Devices-Preview.png&#34;</span>
    <span class="c"># thumbnail URL</span>
    <span class="c"># 缩略图 URL</span>
    <span class="nx">thumbnailUrl</span> <span class="p">=</span> <span class="s2">&#34;/images/screenshot.png&#34;</span>

  <span class="c"># Analytics config</span>
  <span class="c"># 网站分析配置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">analytics</span><span class="p">]</span>
    <span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="c"># Google Analytics</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">analytics</span><span class="p">.</span><span class="nx">google</span><span class="p">]</span>
      <span class="nx">id</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="c"># whether to anonymize IP</span>
      <span class="c"># 是否匿名化用户 IP</span>
      <span class="nx">anonymizeIP</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># Fathom Analytics</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">analytics</span><span class="p">.</span><span class="nx">fathom</span><span class="p">]</span>
      <span class="nx">id</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="c"># server url for your tracker if you&#39;re self hosting</span>
      <span class="c"># 自行托管追踪器时的主机路径</span>
      <span class="nx">server</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>

  <span class="c"># Cookie consent config</span>
  <span class="c"># Cookie 许可配置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">cookieconsent</span><span class="p">]</span>
    <span class="nx">enable</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="c"># text strings used for Cookie consent banner</span>
    <span class="c"># 用于 Cookie 许可横幅的文本字符串</span>
    <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">cookieconsent</span><span class="p">.</span><span class="nx">content</span><span class="p">]</span>
      <span class="nx">message</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="nx">dismiss</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>
      <span class="nx">link</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>

  <span class="c"># CDN config for third-party library files</span>
  <span class="c"># 第三方库文件的 CDN 设置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">cdn</span><span class="p">]</span>
    <span class="c"># CDN data file name, disabled by default</span>
    <span class="c"># (&#34;jsdelivr.yml&#34;)</span>
    <span class="c"># located in &#34;themes/LoveIt/assets/data/cdn/&#34; directory</span>
    <span class="c"># you can store your own data files in the same path under your project:</span>
    <span class="c"># &#34;assets/data/cdn/&#34;</span>
    <span class="c"># CDN 数据文件名称, 默认不启用</span>
    <span class="c"># (&#34;jsdelivr.yml&#34;)</span>
    <span class="c"># 位于 &#34;themes/LoveIt/assets/data/cdn/&#34; 目录</span>
    <span class="c"># 可以在你的项目下相同路径存放你自己的数据文件:</span>
    <span class="c"># &#34;assets/data/cdn/&#34;</span>
    <span class="nx">data</span> <span class="p">=</span> <span class="s2">&#34;jsdelivr.yml&#34;</span>

  <span class="c"># Compatibility config</span>
  <span class="c"># 兼容性设置</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">compatibility</span><span class="p">]</span>
    <span class="c"># whether to use Polyfill.io to be compatible with older browsers</span>
    <span class="c"># 是否使用 Polyfill.io 来兼容旧式浏览器</span>
    <span class="nx">polyfill</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="c"># whether to use object-fit-images to be compatible with older browsers</span>
    <span class="c"># 是否使用 object-fit-images 来兼容旧式浏览器</span>
    <span class="nx">objectFit</span> <span class="p">=</span> <span class="kc">false</span>

<span class="c"># Markup related configuration in Hugo</span>
<span class="c"># Hugo 解析文档的配置</span>
<span class="p">[</span><span class="nx">markup</span><span class="p">]</span>
  <span class="c"># Syntax Highlighting (https://gohugo.io/content-management/syntax-highlighting)</span>
  <span class="c"># 语法高亮设置 (https://gohugo.io/content-management/syntax-highlighting)</span>
  <span class="p">[</span><span class="nx">markup</span><span class="p">.</span><span class="nx">highlight</span><span class="p">]</span>
    <span class="nx">codeFences</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="nx">guessSyntax</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="nx">lineNos</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="nx">lineNumbersInTable</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="c"># false is a necessary configuration (https://github.com/dillonzq/LoveIt/issues/158)</span>
    <span class="c"># false 是必要的设置 (https://github.com/dillonzq/LoveIt/issues/158)</span>
    <span class="nx">noClasses</span> <span class="p">=</span> <span class="kc">false</span>
  <span class="c"># Goldmark is from Hugo 0.60 the default library used for Markdown</span>
  <span class="c"># Goldmark 是 Hugo 0.60 以来的默认 Markdown 解析库</span>
  <span class="p">[</span><span class="nx">markup</span><span class="p">.</span><span class="nx">goldmark</span><span class="p">]</span>
    <span class="p">[</span><span class="nx">markup</span><span class="p">.</span><span class="nx">goldmark</span><span class="p">.</span><span class="nx">extensions</span><span class="p">]</span>
      <span class="nx">definitionList</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">footnote</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">linkify</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">strikethrough</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">table</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">taskList</span> <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">typographer</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="p">[</span><span class="nx">markup</span><span class="p">.</span><span class="nx">goldmark</span><span class="p">.</span><span class="nx">renderer</span><span class="p">]</span>
      <span class="c"># whether to use HTML tags directly in the document</span>
      <span class="c"># 是否在文档中直接使用 HTML 标签</span>
      <span class="nx">unsafe</span> <span class="p">=</span> <span class="kc">true</span>
  <span class="c"># Table Of Contents settings</span>
  <span class="c"># 目录设置</span>
  <span class="p">[</span><span class="nx">markup</span><span class="p">.</span><span class="nx">tableOfContents</span><span class="p">]</span>
    <span class="nx">startLevel</span> <span class="p">=</span> <span class="mi">1</span>
    <span class="nx">endLevel</span> <span class="p">=</span> <span class="mi">6</span>

<span class="c"># Author config</span>
<span class="c"># 作者配置</span>
<span class="p">[</span><span class="nx">author</span><span class="p">]</span>
  <span class="nx">name</span> <span class="p">=</span> <span class="s2">&#34;早起的年轻人&#34;</span>
  <span class="nx">email</span> <span class="p">=</span> <span class="s2">&#34;852851198@qq.com&#34;</span>
  <span class="nx">link</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>

<span class="c"># Sitemap config</span>
<span class="c"># 网站地图配置</span>
<span class="p">[</span><span class="nx">sitemap</span><span class="p">]</span>
  <span class="nx">changefreq</span> <span class="p">=</span> <span class="s2">&#34;weekly&#34;</span>
  <span class="nx">filename</span> <span class="p">=</span> <span class="s2">&#34;sitemap.xml&#34;</span>
  <span class="nx">priority</span> <span class="p">=</span> <span class="mf">0.5</span>

<span class="c"># Permalinks config (https://gohugo.io/content-management/urls/#permalinks)</span>
<span class="c"># Permalinks 配置 (https://gohugo.io/content-management/urls/#permalinks)</span>
<span class="p">[</span><span class="nx">Permalinks</span><span class="p">]</span>
  <span class="c"># posts = &#34;:year/:month/:filename&#34;</span>
  <span class="nx">posts</span> <span class="p">=</span> <span class="s2">&#34;:filename&#34;</span>

<span class="c"># Privacy config (https://gohugo.io/about/hugo-and-gdpr/)</span>
<span class="c"># 隐私信息配置 (https://gohugo.io/about/hugo-and-gdpr/)</span>
<span class="p">[</span><span class="nx">privacy</span><span class="p">]</span>
  <span class="c"># privacy of the Google Analytics (replaced by params.analytics.google)</span>
  <span class="c"># Google Analytics 相关隐私 (被 params.analytics.google 替代)</span>
  <span class="p">[</span><span class="nx">privacy</span><span class="p">.</span><span class="nx">googleAnalytics</span><span class="p">]</span>
    <span class="c"># ...</span>
  <span class="p">[</span><span class="nx">privacy</span><span class="p">.</span><span class="nx">twitter</span><span class="p">]</span>
    <span class="nx">enableDNT</span> <span class="p">=</span> <span class="kc">true</span>
  <span class="p">[</span><span class="nx">privacy</span><span class="p">.</span><span class="nx">youtube</span><span class="p">]</span>
    <span class="nx">privacyEnhanced</span> <span class="p">=</span> <span class="kc">true</span>

<span class="c"># Options to make output .md files</span>
<span class="c"># 用于输出 Markdown 格式文档的设置</span>
<span class="c"># [mediaTypes]</span>
<span class="c">#   [mediaTypes.&#34;text/plain&#34;]</span>
<span class="c">#     suffixes = [&#34;md&#34;]</span>

<span class="c"># # Options to make output .md files</span>
<span class="c"># # 用于输出 Markdown 格式文档的设置</span>
<span class="c"># [outputFormats.MarkDown]</span>
<span class="c">#   mediaType = &#34;text/plain&#34;</span>
<span class="c">#   isPlainText = false</span>
<span class="c">#   isHTML = true</span>

<span class="c"># # Options to make hugo output files</span>
<span class="c"># # 用于 Hugo 输出文档的设置</span>
<span class="c"># [outputs]</span>
<span class="c">#   home = [&#34;HTML&#34;, &#34;RSS&#34;, &#34;JSON&#34;]</span>
<span class="c">#   page = [&#34;HTML&#34;, &#34;MarkDown&#34;]</span>
<span class="c">#   section = [&#34;HTML&#34;, &#34;RSS&#34;]</span>
<span class="c">#   taxonomy = [&#34;HTML&#34;, &#34;RSS&#34;]</span>
<span class="c">#   taxonomyTerm = [&#34;HTML&#34;]</span>

</code></pre></td></tr></table>
</div>
</div><p>其中搜索和评论部分，要根据实际情况修改。</p>
<h3 id="22-默认文章模板的修改">2.2. 默认文章模板的修改</h3>
<p>将根目录<code>\archetypes</code>下的<code>default.md</code>修改如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">title</span><span class="o">:</span> &#34;{{ <span class="n">replace</span> .<span class="n">TranslationBaseName</span> &#34;-&#34; &#34; &#34; <span class="p">|</span> <span class="n">title</span> }}&#34;
<span class="nf">subtitle</span><span class="o">:</span> &#34;&#34;
<span class="nf">date</span><span class="o">:</span> {{ .<span class="n">Date</span> }}
<span class="nf">lastmod</span><span class="o">:</span> {{ .<span class="n">Date</span> }}
<span class="nf">draft</span><span class="o">:</span> <span class="n">false</span>
<span class="nf">toc</span><span class="o">:</span>
  enable: <span class="nb">true</span>
<span class="nf">weight</span><span class="o">:</span> <span class="n">false</span>
<span class="nf">categories</span><span class="o">:</span> [&#34;&#34;]
<span class="nf">tags</span><span class="o">:</span> [&#34;&#34;]
</code></pre></td></tr></table>
</div>
</div><h3 id="23-loveit主题官方前置参数">2.3. LoveIt主题官方前置参数</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-makefile" data-lang="makefile"><span class="err">---</span>
<span class="nf">title</span><span class="o">:</span> &#34;我的第一篇文章&#34;
<span class="nf">subtitle</span><span class="o">:</span> &#34;&#34;
<span class="nf">date</span><span class="o">:</span> 2020-03-04<span class="n">T</span>15:58:26+08:00
<span class="nf">lastmod</span><span class="o">:</span> 2020-03-04<span class="n">T</span>15:58:26+08:00
<span class="nf">draft</span><span class="o">:</span> <span class="n">true</span>
<span class="nf">author</span><span class="o">:</span> &#34;&#34;
<span class="nf">authorLink</span><span class="o">:</span> &#34;&#34;
<span class="nf">description</span><span class="o">:</span> &#34;&#34;
<span class="nf">license</span><span class="o">:</span> &#34;&#34;
<span class="nf">images</span><span class="o">:</span> []

<span class="nf">tags</span><span class="o">:</span> []
<span class="nf">categories</span><span class="o">:</span> []
<span class="nf">featuredImage</span><span class="o">:</span> &#34;&#34;
<span class="nf">featuredImagePreview</span><span class="o">:</span> &#34;&#34;

<span class="nf">hiddenFromHomePage</span><span class="o">:</span> <span class="n">false</span>
<span class="nf">hiddenFromSearch</span><span class="o">:</span> <span class="n">false</span>
<span class="nf">twemoji</span><span class="o">:</span> <span class="n">false</span>
<span class="nf">lightgallery</span><span class="o">:</span> <span class="n">true</span>
<span class="nf">ruby</span><span class="o">:</span> <span class="n">true</span>
<span class="nf">fraction</span><span class="o">:</span> <span class="n">true</span>
<span class="nf">fontawesome</span><span class="o">:</span> <span class="n">true</span>
<span class="nf">linkToMarkdown</span><span class="o">:</span> <span class="n">true</span>
<span class="nf">rssFullText</span><span class="o">:</span> <span class="n">false</span>

<span class="nf">toc</span><span class="o">:</span>
  enable: <span class="nb">true</span>
  auto: <span class="nb">true</span>
<span class="nf">code</span><span class="o">:</span>
  copy: <span class="nb">true</span>
  <span class="c1"># ...</span>
<span class="nf">math</span><span class="o">:</span>
  enable: <span class="nb">true</span>
  <span class="c1"># ...</span>
<span class="nf">mapbox</span><span class="o">:</span>
  accessToken: <span class="s2">&#34;&#34;</span>
  <span class="c1"># ...</span>
<span class="nf">share</span><span class="o">:</span>
  enable: <span class="nb">true</span>
  <span class="c1"># ...</span>
<span class="nf">comment</span><span class="o">:</span>
  enable: <span class="nb">true</span>
  <span class="c1"># ...</span>
<span class="nf">library</span><span class="o">:</span>
  css:
    <span class="c1"># someCSS = &#34;some.css&#34;</span>
    <span class="c1"># 位于 &#34;assets/&#34;</span>
    <span class="c1"># 或者</span>
    <span class="c1"># someCSS = &#34;https://cdn.example.com/some.css&#34;</span>
  js:
    <span class="c1"># someJS = &#34;some.js&#34;</span>
    <span class="c1"># 位于 &#34;assets/&#34;</span>
    <span class="c1"># 或者</span>
    <span class="c1"># someJS = &#34;https://cdn.example.com/some.js&#34;</span>
<span class="nf">seo</span><span class="o">:</span>
  images: <span class="o">[]</span>
  <span class="c1"># ...</span>
<span class="err">---</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>title</strong>: 文章标题.</li>
<li><strong>subtitle</strong>: 文章副标题.</li>
<li><strong>date</strong>: 这篇文章创建的日期时间. 它通常是从文章的前置参数中的 date 字段获取的, 但是也可以在 网站配置 中设置.</li>
<li><strong>lastmod</strong>: 上次修改内容的日期时间.</li>
<li><strong>draft</strong>: 如果设为 true, 除非 hugo 命令使用了 &ndash;buildDrafts/-D 参数, 这篇文章不会被渲染.</li>
<li><strong>author</strong>: 文章作者.</li>
<li><strong>authorLink</strong>: 文章作者的链接.</li>
<li><strong>description</strong>: 文章内容的描述.</li>
<li><strong>license</strong>: 这篇文章特殊的许可.</li>
<li><strong>images</strong>: 页面图片, 用于 Open Graph 和 Twitter Cards.</li>
<li><strong>tags</strong>: 文章的标签.</li>
<li><strong>categories</strong>: 文章所属的类别.</li>
<li><strong>featuredImage</strong>: 文章的特色图片.</li>
<li><strong>featuredImagePreview</strong>: 用在主页预览的文章特色图片.</li>
<li><strong>hiddenFromHomePage</strong>: 如果设为 true, 这篇文章将不会显示在主页上.</li>
<li><strong>hiddenFromSearch</strong>: 如果设为 true, 这篇文章将不会显示在搜索结果中.</li>
<li><strong>twemoji</strong>: 如果设为 true, 这篇文章会使用 twemoji.</li>
<li><strong>lightgallery</strong>: 如果设为 true, 文章中的图片将可以按照画廊形式呈现.</li>
<li><strong>ruby</strong>: 如果设为 true, 这篇文章会使用 上标注释扩展语法.</li>
<li><strong>fraction</strong>: 如果设为 true, 这篇文章会使用 分数扩展语法.</li>
<li><strong>fontawesome</strong>: 如果设为 true, 这篇文章会使用 Font Awesome 扩展语法.</li>
<li><strong>linkToMarkdown</strong>: 如果设为 true, 内容的页脚将显示指向原始 Markdown 文件的链接.</li>
<li><strong>rssFullText</strong>: 如果设为 true, 在 RSS 中将会显示全文内容.</li>
<li><strong>toc</strong>: 和<a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/#site-configuration" target="_blank" rel="noopener noreffer">网站配置</a>
 中的 params.page.toc 部分相同.</li>
<li><strong>code</strong>: 和<a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/#site-configuration" target="_blank" rel="noopener noreffer">网站配置</a>
中的 params.page.code 部分相同.</li>
<li><strong>math</strong>: 和<a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/#site-configuration" target="_blank" rel="noopener noreffer">网站配置</a>
中的 params.page.math 部分相同.</li>
<li><strong>mapbox</strong>: 和<a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/#site-configuration" target="_blank" rel="noopener noreffer">网站配置</a>
中的 params.page.mapbox 部分相同.</li>
<li><strong>share</strong>: 和 <a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/#site-configuration" target="_blank" rel="noopener noreffer">网站配置</a>
中的 params.page.share 部分相同.</li>
<li><strong>comment</strong>: 和<a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/#site-configuration" target="_blank" rel="noopener noreffer">网站配置</a>
 中的 params.page.comment 部分相同.</li>
<li><strong>library</strong>: 和<a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/#site-configuration" target="_blank" rel="noopener noreffer">网站配置</a>
中的 params.page.library 部分相同.</li>
<li><strong>seo</strong>: 和<a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/#site-configuration" target="_blank" rel="noopener noreffer">网站配置</a>
中的 params.page.seo 部分相同.</li>
</ul>
<h3 id="24-添加友情链接-shortcodes">2.4. 添加友情链接 shortcodes</h3>
<h4 id="241-代码部分">2.4.1. 代码部分</h4>
<p><code>LoveIt/layouts/shortcodes/ </code>下面新建 <code>friend.html</code> 文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html">{{ if .IsNamedParams }}
<span class="p">&lt;</span><span class="nt">a</span> <span class="na">target</span><span class="o">=</span><span class="s">&#34;_blank&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">{{</span> <span class="err">.</span><span class="na">Get</span> <span class="err">&#34;</span><span class="na">url</span><span class="err">&#34;</span> <span class="err">}}</span> <span class="na">title</span><span class="o">=</span><span class="s">{{</span> <span class="err">.</span><span class="na">Get</span> <span class="err">&#34;</span><span class="na">name</span><span class="err">&#34;</span> <span class="err">}}</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;friendurl&#34;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;frienddiv&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;frienddivleft&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">img</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;myfriend&#34;</span> <span class="na">src</span><span class="o">=</span><span class="s">{{</span> <span class="err">.</span><span class="na">Get</span> <span class="err">&#34;</span><span class="na">logo</span><span class="err">&#34;</span> <span class="err">}}</span> <span class="p">/&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;frienddivright&#34;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;friendname&#34;</span><span class="p">&gt;</span>{{ .Get &#34;name&#34; }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;friendinfo&#34;</span><span class="p">&gt;</span>{{ .Get &#34;word&#34; }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
{{ end }}
</code></pre></td></tr></table>
</div>
</div><p><code>LoveIt/assets/css/_partial/_single/ </code>下面新建 <code>_friend.scss </code>文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scss" data-lang="scss"><span class="nc">.friendurl</span> <span class="p">{</span>
 <span class="nt">text-decoration</span><span class="nd">:</span> <span class="nt">none</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">color</span><span class="nd">:</span> <span class="nt">black</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.myfriend</span> <span class="p">{</span>
 <span class="nt">width</span><span class="nd">:</span> <span class="nt">56px</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">height</span><span class="nd">:</span> <span class="nt">56px</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">border-radius</span><span class="nd">:</span> <span class="nt">50</span><span class="err">%</span><span class="p">;</span>
 <span class="nt">border</span><span class="nd">:</span> <span class="nt">1px</span> <span class="nt">solid</span> <span class="nn">#ddd</span><span class="p">;</span>
 <span class="nt">padding</span><span class="nd">:</span> <span class="nt">2px</span><span class="p">;</span>
 <span class="nt">box-shadow</span><span class="nd">:</span> <span class="nt">1px</span> <span class="nt">1px</span> <span class="nt">1px</span> <span class="nt">rgba</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span> <span class="nt">0</span><span class="o">,</span> <span class="nt">0</span><span class="o">,</span> <span class="nt">0</span><span class="nc">.15</span><span class="o">)</span><span class="p">;</span>
 <span class="nt">margin-top</span><span class="nd">:</span> <span class="nt">14px</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">margin-left</span><span class="nd">:</span> <span class="nt">14px</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">background-color</span><span class="nd">:</span> <span class="nn">#fff</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.frienddiv</span> <span class="p">{</span>
 <span class="nt">height</span><span class="nd">:</span> <span class="nt">92px</span><span class="p">;</span>
 <span class="nt">margin-top</span><span class="nd">:</span> <span class="nt">10px</span><span class="p">;</span>
 <span class="nt">width</span><span class="nd">:</span> <span class="nt">48</span><span class="err">%</span><span class="p">;</span>
 <span class="nt">display</span><span class="nd">:</span> <span class="nt">inline-block</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">border-radius</span><span class="nd">:</span> <span class="nt">5px</span><span class="p">;</span>
 <span class="nt">background</span><span class="nd">:</span> <span class="nt">rgba</span><span class="o">(</span><span class="nt">255</span><span class="o">,</span> <span class="nt">255</span><span class="o">,</span> <span class="nt">255</span><span class="o">,</span> <span class="nt">0</span><span class="nc">.2</span><span class="o">)</span><span class="p">;</span>
 <span class="nt">box-shadow</span><span class="nd">:</span> <span class="nt">4px</span> <span class="nt">4px</span> <span class="nt">2px</span> <span class="nt">1px</span> <span class="nt">rgba</span><span class="o">(</span><span class="nt">0</span><span class="o">,</span> <span class="nt">0</span><span class="o">,</span> <span class="nt">255</span><span class="o">,</span> <span class="nt">0</span><span class="nc">.2</span><span class="o">)</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.frienddiv</span><span class="nd">:hover</span> <span class="p">{</span>
 <span class="nt">background</span><span class="nd">:</span> <span class="nt">rgba</span><span class="o">(</span><span class="nt">87</span><span class="o">,</span> <span class="nt">142</span><span class="o">,</span> <span class="nt">224</span><span class="o">,</span> <span class="nt">0</span><span class="nc">.15</span><span class="o">)</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.frienddiv</span><span class="nd">:hover</span> <span class="nc">.frienddivleft</span> <span class="nt">img</span> <span class="p">{</span>
 <span class="nt">transition</span><span class="nd">:</span> <span class="nt">0</span><span class="nc">.9s</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">-webkit-transition</span><span class="nd">:</span> <span class="nt">0</span><span class="nc">.9s</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">-moz-transition</span><span class="nd">:</span> <span class="nt">0</span><span class="nc">.9s</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">-o-transition</span><span class="nd">:</span> <span class="nt">0</span><span class="nc">.9s</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">-ms-transition</span><span class="nd">:</span> <span class="nt">0</span><span class="nc">.9s</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">transform</span><span class="nd">:</span> <span class="nt">rotate</span><span class="o">(</span><span class="nt">360deg</span><span class="o">)</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">-webkit-transform</span><span class="nd">:</span> <span class="nt">rotate</span><span class="o">(</span><span class="nt">360deg</span><span class="o">)</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">-moz-transform</span><span class="nd">:</span> <span class="nt">rotate</span><span class="o">(</span><span class="nt">360deg</span><span class="o">)</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">-o-transform</span><span class="nd">:</span> <span class="nt">rotate</span><span class="o">(</span><span class="nt">360deg</span><span class="o">)</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
 <span class="nt">-ms-transform</span><span class="nd">:</span> <span class="nt">rotate</span><span class="o">(</span><span class="nt">360deg</span><span class="o">)</span> <span class="o">!</span><span class="nt">important</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.frienddivleft</span> <span class="p">{</span>
 <span class="nt">width</span><span class="nd">:</span> <span class="nt">92px</span><span class="p">;</span>
 <span class="nt">float</span><span class="nd">:</span> <span class="nt">left</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.frienddivleft</span> <span class="p">{</span>
 <span class="nt">margin-right</span><span class="nd">:</span> <span class="nt">2px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.frienddivright</span> <span class="p">{</span>
 <span class="nt">margin-top</span><span class="nd">:</span> <span class="nt">18px</span><span class="p">;</span>
 <span class="nt">margin-right</span><span class="nd">:</span> <span class="nt">18px</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.friendname</span> <span class="p">{</span>
 <span class="nt">text-overflow</span><span class="nd">:</span> <span class="nt">ellipsis</span><span class="p">;</span>
 <span class="nt">overflow</span><span class="nd">:</span> <span class="nt">hidden</span><span class="p">;</span>
 <span class="nt">white-space</span><span class="nd">:</span> <span class="nt">nowrap</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.friendinfo</span> <span class="p">{</span>
 <span class="nt">text-overflow</span><span class="nd">:</span> <span class="nt">ellipsis</span><span class="p">;</span>
 <span class="nt">overflow</span><span class="nd">:</span> <span class="nt">hidden</span><span class="p">;</span>
 <span class="nt">white-space</span><span class="nd">:</span> <span class="nt">nowrap</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@media</span> <span class="n">screen</span> <span class="ow">and</span> <span class="p">(</span><span class="no">max-width</span><span class="o">:</span> <span class="mi">600</span><span class="kt">px</span><span class="p">)</span> <span class="p">{</span>
 <span class="nc">.friendinfo</span> <span class="p">{</span>
  <span class="nt">display</span><span class="nd">:</span> <span class="nt">none</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="nc">.frienddivleft</span> <span class="p">{</span>
  <span class="nt">width</span><span class="nd">:</span> <span class="nt">84px</span><span class="p">;</span>
  <span class="nt">margin</span><span class="nd">:</span> <span class="nt">auto</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="nc">.frienddivright</span> <span class="p">{</span>
  <span class="nt">height</span><span class="nd">:</span> <span class="nt">100</span><span class="err">%</span><span class="p">;</span>
  <span class="nt">margin</span><span class="nd">:</span> <span class="nt">auto</span><span class="p">;</span>
  <span class="nt">display</span><span class="nd">:</span> <span class="nt">flex</span><span class="p">;</span>
  <span class="nt">align-items</span><span class="nd">:</span> <span class="nt">center</span><span class="p">;</span>
  <span class="nt">justify-content</span><span class="nd">:</span> <span class="nt">center</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="nc">.friendname</span> <span class="p">{</span>
  <span class="nt">font-size</span><span class="nd">:</span> <span class="nt">14px</span><span class="p">;</span>
 <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>LoveIt/assets/css/_page/ </code>下面修改 <code>_single.scss</code>，引入下面一行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-scss" data-lang="scss"><span class="k">@import</span> <span class="s2">&#34;../_partial/_single/friend&#34;</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="242-展示效果">2.4.2. 展示效果</h4>
<p>使用示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">{{\&lt; friend name=&#34;Dillon&#34; url=&#34;https://github.com/dillonzq/&#34; logo=&#34;https://avatars0.githubusercontent.com/u/30786232?s=460&amp;u=5fc878f67c869ce6628cf65121b8d73e1733f941&amp;v=4&#34; word=&#34;LoveIt主题作者&#34; &gt;}}
</code></pre></td></tr></table>
</div>
</div><h2 id="3官方文档">3.官方文档</h2>
<p>更多内容可查看官方文档：</p>
<p><a href="https://hugoloveit.com/zh-cn/theme-documentation-basics/" target="_blank" rel="noopener noreffer">主题文档 - 基本概念</a>

<a href="https://hugoloveit.com/zh-cn/theme-documentation-content/" target="_blank" rel="noopener noreffer">主题文档 - 内容</a>
</p>
<ol start="4">
<li>参考链接
<a href="https://blog.233so.com/2020/04/friend-link-shortcodes-for-hugo-loveit/" target="_blank" rel="noopener noreffer">Hugo 篇四：添加友链卡片 shortcodes</a>

图标网址：</li>
</ol>
<p><a href="https://fontawesome.com/icons/user-friends?style=solid">https://fontawesome.com/icons/user-friends?style=solid</a></p>
<p>自定义配置：</p>
<p><a href="https://blog.csdn.net/lislie_/article/details/96597743">https://blog.csdn.net/lislie_/article/details/96597743</a></p>
]]></description>
</item>
<item>
    <title>Docker Compose的一些常用命令</title>
    <link>https://freerun.xyz/docker-compose%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</link>
    <pubDate>Fri, 15 Apr 2022 12:44:39 &#43;0800</pubDate>
    <author>Ylimhs</author>
    <guid>https://freerun.xyz/docker-compose%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</guid>
    <description><![CDATA[<h1 id="docker-compose的一些常用命令">Docker-Compose的一些常用命令</h1>
<h2 id="一docker-compose简介">一、Docker-Compose简介</h2>
<h3 id="1docker-compose简介">1、Docker-Compose简介</h3>
<p>Docker-Compose项目是Docker官方的开源项目，负责实现对Docker容器集群的快速编排。 Docker-Compose将所管理的容器分为三层，分别是工程（project），服务（service）以及容器（container）。Docker-Compose运行目录下的所有文件（docker-compose.yml，extends文件或环境变量文件等）组成一个工程，若无特殊指定工程名即为当前目录名。一个工程当中可包含多个服务，每个服务中定义了容器运行的镜像，参数，依赖。一个服务当中可包括多个容器实例，Docker-Compose并没有解决<a href="https://cloud.tencent.com/product/clb?from=10680" target="_blank" rel="noopener noreffer">负载均衡</a>
的问题，因此需要借助其它工具实现服务发现及负载均衡。 Docker-Compose的工程配置文件默认为docker-compose.yml，可通过环境变量COMPOSE_FILE或-f参数自定义配置文件，其定义了多个有依赖关系的服务及每个服务运行的容器。 使用一个Dockerfile模板文件，可以让用户很方便的定义一个单独的应用容器。在工作中，经常会碰到需要多个容器相互配合来完成某项任务的情况。例如要实现一个Web项目，除了Web服务容器本身，往往还需要再加上后端的<a href="https://cloud.tencent.com/solution/database?from=10680" target="_blank" rel="noopener noreffer">数据库</a>
服务容器，甚至还包括负载均衡容器等。 Compose允许用户通过一个单独的docker-compose.yml模板文件（YAML 格式）来定义一组相关联的应用容器为一个项目（project）。 Docker-Compose项目由Python编写，调用Docker服务提供的API来对容器进行管理。因此，只要所操作的平台支持Docker API，就可以在其上利用Compose来进行编排管理。</p>
<h4 id="11-安装docker-compose前提是要安装docker">1.1 安装docker-compose前提是要安装docker</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">#下载阿里源</span>
curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo

<span class="c1">#建yum缓存</span>
yum makecache fast

<span class="c1">#安装docker一些必备工具</span>
yum install -y yum-utils device-mapper-persistent-data lvm2 net-tools

<span class="c1">#下载docker源</span>
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

<span class="c1">#安装docker</span>
yum install -y docker-ce docker-ce-cli containerd.io

<span class="c1">#如果想安装指定的docker版本，Docker-CE: (VERSION例如17.03.0.ce.1-1.el7.centos) yum -y install docker-ce-[VERSION]</span>
yum list docker-ce.x86_64 --showduplicates <span class="p">|</span> sort -r

<span class="c1">#启动docker并且下次开启自启</span>
systemctl start docker <span class="o">&amp;&amp;</span> systemctl <span class="nb">enable</span> docker

<span class="c1">#查询版本</span>
docker --version
</code></pre></td></tr></table>
</div>
</div><p><strong>下载离线包</strong>  <a href="../../down/docker20.10.tar.gz" rel="">安装包</a>
</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">#下载离线docker安装包,并上传到服务器</span>
<span class="c1">#解压</span>
tar -zxvf docker20.10.tar.gz

<span class="c1">#安装docker</span>
rpm -ivh *.rpm --force –nodeps

<span class="c1">#启动docker并且下次开启自启</span>
systemctl start docker <span class="o">&amp;&amp;</span> systemctl <span class="nb">enable</span> docker

<span class="c1">#查询版本</span>
docker --version
</code></pre></td></tr></table>
</div>
</div><h3 id="2docker-compose安装">2、Docker-Compose安装</h3>
<p><strong>安装方法一： 在线Docker-Compose：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sudo curl -L https://github.com/docker/compose/releases/download/1.23.0-rc3/docker-compose-<span class="sb">`</span>uname -s<span class="sb">`</span>-<span class="sb">`</span>uname -m<span class="sb">`</span> -o /usr/local/bin/docker-compose

<span class="c1">#安装Docker-Compose：</span>
sudo chmod +x /usr/local/bin/docker-compose

<span class="c1">#查看版本 :</span>
docker-compose version
</code></pre></td></tr></table>
</div>
</div><p><strong>安装方法二：docker-compose离线安装</strong></p>
<p><strong>下载离线包</strong>    <a href="../../down/docker-compose" rel="">安装包</a>
</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">#上传至服务器</span>

<span class="c1">#给执行权限，然后去移动到程序执行的目录</span>
<span class="o">[</span>root@node02 ~<span class="o">]</span><span class="c1"># chmod +x docker-compose </span>
<span class="o">[</span>root@node02 ~<span class="o">]</span><span class="c1"># mv docker-compose /usr/local/bin/</span>

<span class="c1">#验证是否安装成功</span>
<span class="o">[</span>root@node02 ~<span class="o">]</span><span class="c1"># docker-compose --version</span>

<span class="c1">#注意：如果/usr/local/bin下面不可以，可以尝试/usr/bin/</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="二docker-compose常用命令">二、Docker-Compose常用命令</h2>
<h3 id="1docker-compose命令格式">1、Docker-Compose命令格式</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">docker-compose <span class="o">[</span>-f &lt;arg&gt;...<span class="o">]</span> <span class="o">[</span>options<span class="o">]</span> <span class="o">[</span>COMMAND<span class="o">]</span> <span class="o">[</span>ARGS...<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>命令选项如下： -f，–file FILE指定Compose模板文件，默认为docker-compose.yml，可以多次指定。 -p，–project-name NAME指定项目名称，默认将使用所在目录名称作为项目名。 -x-network-driver 使用Docker的可拔插网络后端特性（需要Docker 1.9+版本） -x-network-driver DRIVER指定网络后端的驱动，默认为bridge（需要Docker 1.9+版本） -verbose输出更多调试信息 -v，–version打印版本并退出</p>
<h3 id="2docker-compose-up-这个命令一定要记住每次启动都要用到只要学会使用的人记住这个就好了">2、docker-compose up 这个命令一定要记住，每次启动都要用到，只要学会使用的人记住这个就好了</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">docker</span><span class="o">-</span><span class="nx">compose</span> <span class="nx">up</span> <span class="p">[</span><span class="nx">options</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="nx">scale</span> <span class="nx">SERVICE</span><span class="o">=</span><span class="nx">NUM</span><span class="p">...]</span> <span class="p">[</span><span class="nx">SERVICE</span><span class="p">...]</span>
</code></pre></td></tr></table>
</div>
</div><p>选项包括：</p>
<p>-d 在后台运行服务容器</p>
<p>–no-color 不使用颜色来区分不同的服务的控制输出</p>
<p>–no-deps 不启动服务所链接的容器</p>
<p>–force-recreate 强制重新创建容器，不能与–no-recreate同时使用</p>
<p>–no-recreate 如果容器已经存在，则不重新创建，不能与–force-recreate同时使用</p>
<p>–no-build 不自动构建缺失的服务镜像</p>
<p>–build 在启动容器前构建服务镜像 –</p>
<p>abort-on-container-exit 停止所有容器，如果任何一个容器被停止，不能与-d同时使用</p>
<p>-t, –timeout TIMEOUT 停止容器时候的超时（默认为10秒）</p>
<p>–remove-orphans 删除服务中没有在compose文件中定义的容器</p>
<p>–scale SERVICE=NUM 设置服务运行容器的个数，将覆盖在compose中通过scale指定的参数</p>
<p>​			<code>docker-compose up</code> 启动所有服务</p>
<p>​			<code>docker-compose up -d</code> 在后台所有启动服务</p>
<p>​			-f 指定使用的Compose模板文件，默认为docker-compose.yml，可以多次指定。</p>
<p>​			<code>docker-compose -f docker-compose.yml up -d</code></p>
<h3 id="3docker-compose-ps">3、docker-compose ps</h3>
<p><code>docker-compose ps [options] [SERVICE...]</code> <code>docker-compose ps</code> 列出项目中目前的所有容器</p>
<h3 id="3docker-compose-ps-1">3、docker-compose ps</h3>
<p><code>docker-compose ps [options] [SERVICE...]</code> <code>docker-compose ps</code> 列出项目中目前的所有容器</p>
<h3 id="4docker-compose-stop">4、docker-compose stop</h3>
<p><code>docker-compose stop [options] [SERVICE...]</code> 选项包括： -t, –timeout TIMEOUT 停止容器时候的超时（默认为10秒） <code>docker-compose stop</code> 停止正在运行的容器，可以通过docker-compose start 再次启动</p>
<h3 id="5docker-compose--h">5、docker-compose -h</h3>
<p><code>docker-compose -h</code> 查看帮助</p>
<h3 id="6docker-compose-down">6、docker-compose down</h3>
<p><code>docker-compose down [options]</code> 停止和删除容器、网络、卷、镜像。 选项包括： –rmi type，删除镜像，类型必须是：all，删除compose文件中定义的所有镜像；local，删除镜像名为空的镜像 -v, –volumes，删除已经在compose文件中定义的和匿名的附在容器上的数据卷 –remove-orphans，删除服务中没有在compose中定义的容器 <code>docker-compose down</code> 停用移除所有容器以及网络相关</p>
<h3 id="7docker-compose-logs">7、docker-compose logs</h3>
<p><code>docker-compose logs [options] [SERVICE...]</code> 查看服务容器的输出。默认情况下，docker-compose将对不同的服务输出使用不同的颜色来区分。可以通过–no-color来关闭颜色。 <code>docker-compose logs</code> 查看服务容器的输出</p>
<h3 id="8docker-compose-build">8、docker-compose build</h3>
<p><code>docker-compose build [options] [--build-arg key=val...] [SERVICE...]</code> 构建（重新构建）项目中的服务容器。 选项包括： –compress 通过gzip压缩构建上下环境 –force-rm 删除构建过程中的临时容器 –no-cache 构建镜像过程中不使用缓存 –pull 始终尝试通过拉取操作来获取更新版本的镜像 -m, –memory MEM为构建的容器设置内存大小 –build-arg key=val为服务设置build-time变量 服务容器一旦构建后，将会带上一个标记名。可以随时在项目目录下运行docker-compose build来重新构建服务</p>
<h3 id="9docker-compose-pull">9、docker-compose pull</h3>
<p><code>docker-compose pull [options] [SERVICE...]</code> 拉取服务依赖的镜像。 选项包括： –ignore-pull-failures，忽略拉取镜像过程中的错误 –parallel，多个镜像同时拉取 –quiet，拉取镜像过程中不打印进度信息 <code>docker-compose pull</code> 拉取服务依赖的镜像</p>
<h3 id="10docker-compose-restart">10、docker-compose restart</h3>
<p><code>docker-compose restart [options] [SERVICE...]</code> 重启项目中的服务。 选项包括： -t, –timeout TIMEOUT，指定重启前停止容器的超时（默认为10秒） <code>docker-compose restart</code> 重启项目中的服务</p>
<h3 id="11docker-compose-rm">11、docker-compose rm</h3>
<p><code>docker-compose rm [options] [SERVICE...]</code> 删除所有（停止状态的）服务容器。 选项包括： –f, –force，强制直接删除，包括非停止状态的容器 -v，删除容器所挂载的数据卷 <code>docker-compose rm</code> 删除所有（停止状态的）服务容器。推荐先执行docker-compose stop命令来停止容器。</p>
<h3 id="12docker-compose-start">12、docker-compose start</h3>
<p><code>docker-compose start [SERVICE...]</code> <code>docker-compose start</code> 启动已经存在的服务容器。</p>
<h3 id="13docker-compose-run">13、docker-compose run</h3>
<p><code>docker-compose run [options] [-v VOLUME...] [-p PORT...] [-e KEY=VAL...] SERVICE [COMMAND] [ARGS...]</code> 在指定服务上执行一个命令。 <code>docker-compose run ubuntu ping www.baidu.com</code> 在指定容器上执行一个ping命令。</p>
<h3 id="14docker-compose-scale">14、docker-compose scale</h3>
<p><code>docker-compose scale web=3 db=2</code> 设置指定服务运行的容器个数。通过service=num的参数来设置数量</p>
<h3 id="15docker-compose-pause">15、docker-compose pause</h3>
<p><code>docker-compose pause [SERVICE...]</code> 暂停一个服务容器</p>
<h3 id="16docker-compose-kill">16、docker-compose kill</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker-compose kill [options] [SERVICE...]` 通过发送SIGKILL信号来强制停止服务容器。 支持通过-s参数来指定发送的信号，例如通过如下指令发送SIGINT信号： `docker-compose kill -s SIGINT
</code></pre></td></tr></table>
</div>
</div><h3 id="17dokcer-compose-config">17、dokcer-compose config</h3>
<p><code>docker-compose config [options]</code> 验证并查看compose文件配置。 选项包括： –resolve-image-digests 将镜像标签标记为摘要 -q, –quiet 只验证配置，不输出。 当配置正确时，不输出任何内容，当文件配置错误，输出错误信息 –services 打印服务名，一行一个 –volumes 打印数据卷名，一行一个</p>
<h3 id="18docker-compose-create">18、docker-compose create</h3>
<p><code>docker-compose create [options] [SERVICE...]</code> 为服务创建容器。 选项包括： –force-recreate：重新创建容器，即使配置和镜像没有改变，不兼容–no-recreate参数 –no-recreate：如果容器已经存在，不需要重新创建，不兼容–force-recreate参数 –no-build：不创建镜像，即使缺失 –build：创建容器前，生成镜像</p>
<h3 id="19docker-compose-exec">19、docker-compose exec</h3>
<p><code>docker-compose exec [options] SERVICE COMMAND [ARGS...]</code> 选项包括： -d 分离模式，后台运行命令。 –privileged 获取特权。 –user USER 指定运行的用户。 -T 禁用分配TTY，默认docker-compose exec分配TTY。 –index=index，当一个服务拥有多个容器时，可通过该参数登陆到该服务下的任何服务，例如：docker-compose exec –index=1 web /bin/bash ，web服务中包含多个容器</p>
<h3 id="20docker-compose-port">20、docker-compose port</h3>
<p><code>docker-compose port [options] SERVICE PRIVATE_PORT</code> 显示某个容器端口所映射的公共端口。 选项包括： –protocol=proto，指定端口协议，TCP（默认值）或者UDP –index=index，如果同意服务存在多个容器，指定命令对象容器的序号（默认为1）</p>
<h3 id="21docker-compose-push">21、docker-compose push</h3>
<p><code>docker-compose push [options] [SERVICE...]</code> 推送服务依的镜像。 选项包括： –ignore-push-failures 忽略推送镜像过程中的错误</p>
<h3 id="22docker-compose-stop">22、docker-compose stop</h3>
<p><code>docker-compose stop [options] [SERVICE...]</code> 显示各个容器运行的进程情况。</p>
<h3 id="23docker-compose-unpause">23、docker-compose unpause</h3>
<p><code>docker-compose unpause [SERVICE...]</code> 恢复处于暂停状态中的服务。</p>
<h3 id="24docker-compose-version">24、docker-compose version</h3>
<p><code>docker-compose version</code> 打印版本信息。</p>
<h2 id="三docker-compose模板文件">三、Docker-Compose模板文件</h2>
<h3 id="1docker-compose模板文件简介">1、Docker-Compose模板文件简介</h3>
<p>Compose允许用户通过一个docker-compose.yml模板文件（YAML 格式）来定义一组相关联的应用容器为一个项目（project）。 Compose模板文件是一个定义服务、网络和卷的YAML文件。Compose模板文件默认路径是当前目录下的docker-compose.yml，可以使用.yml或.yaml作为文件扩展名。 Docker-Compose标准模板文件应该包含version、services、networks 三大部分，最关键的是services和networks两个部分。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">version</span><span class="o">:</span> <span class="s1">&#39;2&#39;</span>
<span class="nx">services</span><span class="o">:</span>
  <span class="nx">web</span><span class="o">:</span>
    <span class="nx">image</span><span class="o">:</span> <span class="nx">dockercloud</span><span class="o">/</span><span class="nx">hello</span><span class="o">-</span><span class="nx">world</span>
    <span class="nx">ports</span><span class="o">:</span>
      <span class="o">-</span> <span class="mi">8080</span>
    <span class="nx">networks</span><span class="o">:</span>
      <span class="o">-</span> <span class="nx">front</span><span class="o">-</span><span class="nx">tier</span>
      <span class="o">-</span> <span class="nx">back</span><span class="o">-</span><span class="nx">tier</span>

  <span class="nx">redis</span><span class="o">:</span>
    <span class="nx">image</span><span class="o">:</span> <span class="nx">redis</span>
    <span class="nx">links</span><span class="o">:</span>
      <span class="o">-</span> <span class="nx">web</span>
    <span class="nx">networks</span><span class="o">:</span>
      <span class="o">-</span> <span class="nx">back</span><span class="o">-</span><span class="nx">tier</span>

  <span class="nx">lb</span><span class="o">:</span>
    <span class="nx">image</span><span class="o">:</span> <span class="nx">dockercloud</span><span class="o">/</span><span class="nx">haproxy</span>
    <span class="nx">ports</span><span class="o">:</span>
      <span class="o">-</span> <span class="mi">80</span><span class="o">:</span><span class="mi">80</span>
    <span class="nx">links</span><span class="o">:</span>
      <span class="o">-</span> <span class="nx">web</span>
    <span class="nx">networks</span><span class="o">:</span>
      <span class="o">-</span> <span class="nx">front</span><span class="o">-</span><span class="nx">tier</span>
      <span class="o">-</span> <span class="nx">back</span><span class="o">-</span><span class="nx">tier</span>
    <span class="nx">volumes</span><span class="o">:</span>
      <span class="o">-</span> <span class="err">/var/run/docker.sock:/var/run/docker.sock </span>

<span class="nx">networks</span><span class="o">:</span>
  <span class="nx">front</span><span class="o">-</span><span class="nx">tier</span><span class="o">:</span>
    <span class="nx">driver</span><span class="o">:</span> <span class="nx">bridge</span>
  <span class="nx">back</span><span class="o">-</span><span class="nx">tier</span><span class="o">:</span>
    <span class="nx">driver</span><span class="o">:</span> <span class="nx">bridge</span>
</code></pre></td></tr></table>
</div>
</div><p>复制</p>
<p>Compose目前有三个版本分别为Version 1，Version 2，Version 3，Compose区分Version 1和Version 2（Compose 1.6.0+，Docker Engine 1.10.0+）。Version 2支持更多的指令。Version 1将来会被弃用。</p>
<h3 id="2image">2、image</h3>
<p>image是指定服务的镜像名称或镜像ID。如果镜像在本地不存在，Compose将会尝试拉取镜像。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">services</span><span class="o">:</span> 
    <span class="nx">web</span><span class="o">:</span> 
        <span class="nx">image</span><span class="o">:</span> <span class="nx">hello</span><span class="o">-</span><span class="nx">world</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="3build">3、build</h3>
<p>服务除了可以基于指定的镜像，还可以基于一份Dockerfile，在使用up启动时执行构建任务，构建标签是build，可以指定Dockerfile所在文件夹的路径。Compose将会利用Dockerfile自动构建镜像，然后使用镜像启动服务容器。</p>
<p><code>build: /path/to/build/dir</code></p>
<p>也可以是相对路径，只要上下文确定就可以读取到Dockerfile。</p>
<p><code>build: ./dir</code></p>
<p>设定上下文根目录，然后以该目录为准指定Dockerfile。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">build</span><span class="o">:</span>
  <span class="nx">context</span><span class="o">:</span> <span class="p">..</span><span class="o">/</span>
  <span class="nx">dockerfile</span><span class="o">:</span> <span class="nx">path</span><span class="o">/</span><span class="k">of</span><span class="err">/Dockerfile</span>
</code></pre></td></tr></table>
</div>
</div><p>build都是一个目录，如果要指定Dockerfile文件需要在build标签的子级标签中使用dockerfile标签指定。 如果同时指定image和build两个标签，那么Compose会构建镜像并且把镜像命名为image值指定的名字。</p>
<h3 id="4context">4、context</h3>
<p>context选项可以是Dockerfile的文件路径，也可以是到链接到git仓库的url，当提供的值是相对路径时，被解析为相对于撰写文件的路径，此目录也是发送到Docker守护进程的context</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">build</span><span class="o">:</span>
  <span class="nx">context</span><span class="o">:</span> <span class="p">.</span><span class="o">/</span><span class="nx">dir</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="5dockerfile">5、dockerfile</h3>
<p>使用dockerfile文件来构建，必须指定构建路径</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">build</span><span class="o">:</span>
  <span class="nx">context</span><span class="o">:</span> <span class="p">.</span>
  <span class="nx">dockerfile</span><span class="o">:</span> <span class="nx">Dockerfile</span><span class="o">-</span><span class="nx">alternate</span>
</code></pre></td></tr></table>
</div>
</div><p>dockerfile指令不能跟image同时使用，否则Compose将不确定根据哪个指令来生成最终的服务镜像。</p>
<h3 id="6command">6、command</h3>
<p>使用command可以覆盖容器启动后默认执行的命令。</p>
<p><code>command: bundle exec thin -p 3000</code></p>
<h3 id="7container_name">7、container_name</h3>
<p>Compose的容器名称格式是：&lt;项目名称&gt;&lt;服务名称&gt;&lt;序号&gt; 可以自定义项目名称、服务名称，但如果想完全控制容器的命名，可以使用标签指定：</p>
<p><code>container_name: app</code></p>
<h3 id="8depends_on">8、depends_on</h3>
<p>在使用Compose时，最大的好处就是少打启动命令，但一般项目容器启动的顺序是有要求的，如果直接从上到下启动容器，必然会因为容器依赖问题而启动失败。例如在没启动数据库容器的时候启动应用容器，应用容器会因为找不到数据库而退出。depends_on标签用于解决容器的依赖、启动先后的问题。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;2&#39;</span><span class="w">
</span><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">web</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l">.</span><span class="w">
</span><span class="w">    </span><span class="nt">depends_on</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="l">db</span><span class="w">
</span><span class="w">      </span>- <span class="l">redis</span><span class="w">
</span><span class="w">  </span><span class="nt">redis</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">redis</span><span class="w">
</span><span class="w">  </span><span class="nt">db</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">postgres</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>上述YAML文件定义的容器会先启动redis和db两个服务，最后才启动web 服务。</p>
<h3 id="9pid">9、pid</h3>
<p><code>pid: &quot;host&quot;</code></p>
<p>将PID模式设置为主机PID模式，跟主机系统共享进程命名空间。容器使用pid标签将能够访问和操纵其他容器和<a href="https://cloud.tencent.com/product/cdh?from=10680" target="_blank" rel="noopener noreffer">宿主机</a>
的名称空间。</p>
<h3 id="10ports">10、ports</h3>
<p>ports用于映射端口的标签。 使用HOST:CONTAINER格式或者只是指定容器的端口，宿主机会随机映射端口。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">ports</span><span class="o">:</span>
 <span class="o">-</span> <span class="s2">&#34;3000&#34;</span>
 <span class="o">-</span> <span class="s2">&#34;8000:8000&#34;</span>
 <span class="o">-</span> <span class="s2">&#34;49100:22&#34;</span>
 <span class="o">-</span> <span class="s2">&#34;127.0.0.1:8001:8001&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>当使用HOST:CONTAINER格式来映射端口时，如果使用的容器端口小于60可能会得到错误得结果，因为YAML将会解析xx:yy这种数字格式为60进制。所以建议采用字符串格式。</p>
<h3 id="11extra_hosts">11、extra_hosts</h3>
<p>添加主机名的标签，会在/etc/hosts文件中添加一些记录。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">extra_hosts</span><span class="p">:</span><span class="w">
</span><span class="w"> </span>- <span class="s2">&#34;somehost:162.242.195.82&#34;</span><span class="w">
</span><span class="w"> </span>- <span class="s2">&#34;otherhost:50.31.209.229&#34;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>启动后查看容器内部hosts：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="mf">162.242.195.82</span>  <span class="nx">somehost</span>
<span class="mf">50.31.209.229</span>   <span class="nx">otherhost</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="12volumes">12、volumes</h3>
<p>挂载一个目录或者一个已存在的数据卷容器，可以直接使用 [HOST:CONTAINER]格式，或者使用[HOST:CONTAINER:ro]格式，后者对于容器来说，数据卷是只读的，可以有效保护宿主机的文件系统。 Compose的数据卷指定路径可以是相对路径，使用 . 或者 .. 来指定相对目录。 数据卷的格式可以是下面多种形式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="l">// 只是指定一个路径，Docker 会自动在创建一个数据卷（这个路径是容器内部的）。</span><span class="w">
</span><span class="w">  </span>- <span class="l">/var/lib/mysql</span><span class="w">
</span><span class="w">  </span><span class="l">// 使用绝对路径挂载数据卷</span><span class="w">
</span><span class="w">  </span>- <span class="l">/opt/data:/var/lib/mysql</span><span class="w">
</span><span class="w">  </span><span class="l">// 以 Compose 配置文件为中心的相对路径作为数据卷挂载到容器。</span><span class="w">
</span><span class="w">  </span>- <span class="l">./cache:/tmp/cache</span><span class="w">
</span><span class="w">  </span><span class="l">// 使用用户的相对路径（~/ 表示的目录是 /home/&lt;用户目录&gt;/ 或者 /root/）。</span><span class="w">
</span><span class="w">  </span>- <span class="l">~/configs:/etc/configs/:ro</span><span class="w">
</span><span class="w">  </span><span class="l">// 已经存在的命名的数据卷。</span><span class="w">
</span><span class="w">  </span>- <span class="l">datavolume:/var/lib/mysql</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>如果不使用宿主机的路径，可以指定一个volume_driver。</p>
<p><code>volume_driver: mydriver</code></p>
<h3 id="13volumes_from">13、volumes_from</h3>
<p>从另一个服务或容器挂载其数据卷：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">volumes_from</span><span class="p">:</span><span class="w">
</span><span class="w">   </span>- <span class="l">service_name    </span><span class="w">
</span><span class="w">     </span>- <span class="l">container_name</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="14dns">14、dns</h3>
<p>自定义DNS服务器。可以是一个值，也可以是一个列表。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="l">dns：8.8.8.8</span><span class="w">
</span><span class="w"></span><span class="l">dns：</span><span class="w">
</span><span class="w">    </span>- <span class="m">8.8.8.8</span><span class="w">    
</span><span class="w">      </span>- <span class="m">9.9.9.9</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="15dns_search">15、dns_search</h3>
<p>配置DNS搜索域。可以是一个值，也可以是一个列表。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="l">dns_search：example.com</span><span class="w">
</span><span class="w"></span><span class="l">dns_search：</span><span class="w">
</span><span class="w">    </span>- <span class="l">domain1.example.com</span><span class="w">
</span><span class="w">    </span>- <span class="l">domain2.example.com</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="16entrypoint">16、entrypoint</h3>
<p>在Dockerfile中有一个指令叫做ENTRYPOINT指令，用于指定接入点。 在docker-compose.yml中可以定义接入点，覆盖Dockerfile中的定义：</p>
<p><code>entrypoint: /code/entrypoint.sh</code></p>
<h3 id="17env_file">17、env_file</h3>
<p>在docker-compose.yml中可以定义一个专门存放变量的文件。 如果通过docker-compose -f FILE指定配置文件，则env_file中路径会使用配置文件路径。 如果有变量名称与environment指令冲突，则以后者为准。格式如下： <code>env_file: .env</code> 或者根据docker-compose.yml设置多个：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">env_file</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="l">./common.env</span><span class="w">
</span><span class="w">  </span>- <span class="l">./apps/web.env</span><span class="w">
</span><span class="w">  </span>- <span class="l">/opt/secrets.env</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>如果在配置文件中有build操作，变量并不会进入构建过程中。</p>
<h3 id="18cap_add">18、cap_add</h3>
<p>增加指定容器的内核能力（capacity）。 让容器具有所有能力可以指定：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">cap_add</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="l">ALL</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="19cap_drop">19、cap_drop</h3>
<p>去掉指定容器的内核能力（capacity）。 去掉NET_ADMIN能力可以指定：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">cap_drop</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="l">NET_ADMIN</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="20cgroup_parent">20、cgroup_parent</h3>
<p>创建了一个cgroup组名称为cgroups_1:</p>
<p><code>cgroup_parent: cgroups_1</code></p>
<h3 id="21devices">21、devices</h3>
<p>指定设备映射关系，例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">devices</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="s2">&#34;/dev/ttyUSB1:/dev/ttyUSB0&#34;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="22expose">22、expose</h3>
<p>暴露端口，但不映射到宿主机，只允许能被连接的服务访问。仅可以指定内部端口为参数，如下所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">expose</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="s2">&#34;3000&#34;</span><span class="w">
</span><span class="w">    </span>- <span class="s2">&#34;8000&#34;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="23extends">23、extends</h3>
<p>基于其它模板文件进行扩展。例如，对于webapp服务定义了一个基础模板文件为common.yml：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="c"># common.yml</span><span class="w">
</span><span class="w"></span><span class="nt">webapp</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l">./webapp</span><span class="w">
</span><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span><span class="w">        </span>- <span class="l">DEBUG=false</span><span class="w">
</span><span class="w">        </span>- <span class="l">SEND_EMAILS=false</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>再编写一个新的development.yml文件，使用common.yml中的webapp服务进行扩展：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="c"># development.yml</span><span class="w">
</span><span class="w"></span><span class="nt">web</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">extends</span><span class="p">:</span><span class="w">
</span><span class="w">        </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l">common.yml</span><span class="w">
</span><span class="w">        </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l">webapp</span><span class="w">
</span><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span><span class="w">        </span>- <span class="s2">&#34;8000:8000&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">links</span><span class="p">:</span><span class="w">
</span><span class="w">        </span>- <span class="l">db</span><span class="w">
</span><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span><span class="w">        </span>- <span class="l">DEBUG=true</span><span class="w">
</span><span class="w"></span><span class="nt">db</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">mysql</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>后者会自动继承common.yml中的webapp服务及环境变量定义。 extends限制如下：</p>
<p>A、要避免出现循环依赖</p>
<p>B、extends不会继承links和volumes_from中定义的容器和数据卷资源 推荐在基础模板中只定义一些可以共享的镜像和环境变量，在扩展模板中具体指定应用变量、链接、数据卷等信息</p>
<h3 id="24external_links">24、external_links</h3>
<p>链接到docker-compose.yml外部的容器，可以是非Compose管理的外部容器。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">external_links</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="l">redis_1</span><span class="w">
</span><span class="w">    </span>- <span class="l">project_db_1:mysql</span><span class="w">
</span><span class="w">    </span>- <span class="l">project_db_1:postgresql</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="25labels">25、labels</h3>
<p>为容器添加Docker元数据（metadata）信息。例如，可以为容器添加辅助说明信息：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="l">labels：</span><span class="w">
</span><span class="w">    </span><span class="nt">com.startupteam.description</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;webapp for a strtup team&#34;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="26links">26、links</h3>
<p>链接到其它服务中的容器。使用服务名称（同时作为别名），或者“服务名称:服务别名”（如 SERVICE:ALIAS），例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">links</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="l">db</span><span class="w">
</span><span class="w">    </span>- <span class="l">db:database</span><span class="w">
</span><span class="w">    </span>- <span class="l">redis</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>使用别名将会自动在服务容器中的/etc/hosts里创建。例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="mf">172.17.2.186</span>  <span class="nx">db</span>
<span class="mf">172.17.2.186</span>  <span class="nx">database</span>
<span class="mf">172.17.2.187</span>  <span class="nx">redis</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="27log_driver">27、log_driver</h3>
<p>指定日志驱动类型。目前支持三种日志驱动类型：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">log_driver</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;json-file&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">log_driver</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;syslog&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">log_driver</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;none&#34;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="28log_opt">28、log_opt</h3>
<p>日志驱动的相关参数。例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">log_driver</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;syslog&#34;</span><span class="nt">log_opt</span><span class="p">:</span><span class="w"> 
</span><span class="w">    </span><span class="nt">syslog-address</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;tcp://192.168.0.42:123&#34;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="29net">29、net</h3>
<p>设置网络模式。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">net</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;bridge&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">net</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;none&#34;</span><span class="w">
</span><span class="w"></span><span class="nt">net</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;host&#34;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="30security_opt">30、security_opt</h3>
<p>指定容器模板标签（label）机制的默认属性（用户、角色、类型、级别等）。例如，配置标签的用户名和角色名：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">security_opt</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="l">label:user:USER</span><span class="w">
</span><span class="w">    </span>- <span class="l">label:role:ROLE</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="31环境变量">31、环境变量</h3>
<p>环境变量可以用来配置Docker-Compose的行为。</p>
<p>COMPOSE_PROJECT_NAME</p>
<p>设置通过Compose启动的每一个容器前添加的项目名称，默认是当前工作目录的名字。</p>
<p>COMPOSE_FILE</p>
<p>设置docker-compose.yml模板文件的路径。默认路径是当前工作目录。</p>
<p>DOCKER_HOST</p>
<p>设置Docker daemon的地址。默认使用unix:///var/run/docker.sock。 DOCKER_TLS_VERIFY 如果设置不为空，则与Docker daemon交互通过TLS进行。</p>
<p>DOCKER_CERT_PATH 配置TLS通信所需要的验证(ca.pem、cert.pem 和 key.pem)文件的路径，默认是 ~/.docker 。</p>
<h2 id="四docker-compose模板文件示例">四、Docker-Compose模板文件示例</h2>
<h3 id="1docker-compose模板文件编写">1、docker-compose模板文件编写</h3>
<p>docker-compose.yaml文件如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;2&#39;</span><span class="w">
</span><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">web1</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w"> 
</span><span class="w">      </span>- <span class="s2">&#34;6061:80&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;web1&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="l">dev</span><span class="w">
</span><span class="w">  </span><span class="nt">web2</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w"> 
</span><span class="w">      </span>- <span class="s2">&#34;6062:80&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;web2&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="l">dev</span><span class="w">
</span><span class="w">      </span>- <span class="l">pro</span><span class="w">
</span><span class="w">  </span><span class="nt">web3</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">
</span><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w"> 
</span><span class="w">      </span>- <span class="s2">&#34;6063:80&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;web3&#34;</span><span class="w">
</span><span class="w">    </span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span><span class="w">      </span>- <span class="l">pro</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="nt">networks</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">dev</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l">bridge</span><span class="w">
</span><span class="w">  </span><span class="nt">pro</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l">bridge</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c">#volumes:</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>docker-compose.yaml文件指定了三个web服务。</p>
<h3 id="2启动应用">2、启动应用</h3>
<p>创建一个webapp目录，将docker-compose.yaml文件拷贝到webapp目录下，使用docker-compose启动应用。 <code>docker-compose up -d</code></p>
<h3 id="3服务访问">3、服务访问</h3>
<p>通过浏览器访问web1，web2，web3服务: <a href="http://127.0.0.1:6061/" target="_blank" rel="noopener noreffer">http://127.0.0.1:6061</a>
 <a href="http://127.0.0.1:6062/" target="_blank" rel="noopener noreffer">http://127.0.0.1:6062</a>
 <a href="http://127.0.0.1:6063/" target="_blank" rel="noopener noreffer">http://127.0.0.1:6063</a>
</p>
]]></description>
</item>
<item>
    <title>时间同步的问题和解决方法</title>
    <link>https://freerun.xyz/%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E7%9A%84%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</link>
    <pubDate>Thu, 07 Apr 2022 16:17:17 &#43;0800</pubDate>
    <author>Ylimhs</author>
    <guid>https://freerun.xyz/%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E7%9A%84%E9%97%AE%E9%A2%98%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</guid>
    <description><![CDATA[<h1 id="时间同步的问题和解决方法">时间同步的问题和解决方法</h1>
<h2 id="一虚拟服务器时间同步设置">一、虚拟服务器时间同步设置</h2>
<p><strong>使用条件</strong>： 主机已经与授时服务器进行时间同步</p>
<p>配置VMware虚拟服务器的“同步客户机与主机时间”选项，实现虚拟服务器与主机的时间同步。</p>
<p>方法如下：</p>
<ul>
<li>启动VMware vClient 客户端</li>
<li>选择虚拟主机，打开编辑设置&ndash;&gt;选项&mdash;-&gt;vmware tools &mdash;-&gt;同步客户机时间与主机时间</li>
</ul>
<h2 id="二物理服务器时间同步设置">二、物理服务器时间同步设置</h2>
<h3 id="21-ntpdate工具的使用"><strong>2.1 ntpdate工具的使用</strong></h3>
<p><strong>使用条件：</strong> 服务器可访直接问互联网并且支持UDP协议</p>
<p><strong>在线安装</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">yum install ntpdate -y
</code></pre></td></tr></table>
</div>
</div><p><strong>离线安装</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">rpm -ivh ntpdate-4.2.6p5-28.el7.centos.x86_64.rpm
</code></pre></td></tr></table>
</div>
</div><p><strong>注意：</strong> 本文以centos 7.6的安装为基准，在其它版本中安装可能会出现兼容问题，导致不能成功安装。可到http://vault.centos.org/站点选择下载对应版本的安装包。</p>
<p><strong>手动测试</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">/usr/sbin/ntpdate ntp.ntsc.ac.cn  <span class="c1">#后边的域名或IP为授时服务器，ntp.ntsc.ac.cn为国家授时中心域名 </span>
/sbin/hwclock –w 					<span class="c1">#写入物理时钟</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>自动运行，在crontab的最后一行，添加脚本如下：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1">#crontab –e </span>
<span class="c1">#每30分钟执行一次，如果是局域网内，请注意修改ntp.ntsc.ac.cn为对应的内网ntpd服务器IP地址。 </span>
*/30 * * * * /usr/sbin/ntpdate ntp.ntsc.ac.cn <span class="p">;</span>/sbin/hwclock -w &gt; /dev/null <span class="c1">#2&gt;&amp;1</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>验证crond执行时间同步的情况</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">cat /var/log/cron<span class="p">|</span>grep ntpdate
</code></pre></td></tr></table>
</div>
</div><h3 id="22-rdate工具的使用">2.2 rdate工具的使用</h3>
<p><strong>使用条件：</strong> 服务器在内网区，可访问互联网（可通过接入网关），但只支持TCP协议通信</p>
<p><strong>在线安装</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">yum install rdate -y
</code></pre></td></tr></table>
</div>
</div><p><strong>注意：</strong> rdate命令同时支持TCP和UDP通信协议，使用的time协议，但支持time协议的授时服务器不多。</p>
<p><strong>离线安装</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">rpm -ivh rdate-1.4-25.el7.x86_64.rpm
</code></pre></td></tr></table>
</div>
</div><p><strong>注意：</strong> 本文以centos 7.6的安装为基准，在其它版本中安装可能会出现兼容问题，导致不能成功安装。可到http://vault.centos.org/站点选择下载对应版本的安装包。</p>
<p><strong>自动运行</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1">#crontab –e </span>
<span class="c1"># 每30分钟执行一次 </span>
*/30 * * * * /usr/bin/rdate -s time.nist.gov <span class="p">;</span>/sbin/hwclock -w &gt; /dev/null <span class="c1">#2&gt;&amp;1</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="三服务器处于隔离网络时方法">三、服务器处于隔离网络时方法</h2>
<p><strong>情况1：</strong> 服务器处于隔离网络，但内网有授时服务器，此时可参照第二节的方法</p>
<p><strong>情况2：</strong> 服务器处于离网络时，无内网授时服务器，这种情况下，我们选择自建ntpd或chrony服务器</p>
<h3 id="31-ntpd服务端">3.1 ntpd服务端</h3>
<h4 id="311-ntp安装">3.1.1 ntp安装</h4>
<ul>
<li>在线安装</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">yum install ntp ntpdate -y
</code></pre></td></tr></table>
</div>
</div><ul>
<li>离线安装</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">rpm -ivh autogen-libopts-5.18-5.el7.x86_64.rpm ntp-4.2.6p5-28.el7.centos.x86_64.rpm ntpdate-4.2.6p5-28.el7.centos.x86_64.rpm
</code></pre></td></tr></table>
</div>
</div><p><strong>注意：</strong> 本文以centos 7.6的安装为基准，在其它版本中安装可能会出现兼容问题，导致不能成功安装。可到http://vault.centos.org/站点选择下载对应版本的安装包。</p>
<h4 id="312-ntpd服务器配置">3.1.2 ntpd服务器配置</h4>
<ul>
<li>修改配置/etc/ntp.conf文件，（此配置文件请按照实际的来修改，主要修改restrict的配置）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">driftfile /var/lib/ntp/drift 
restrict default kod nomodify notrap nopeer noquery 
restrict 127.0.0.1 
restrict ::1 
restrict 192.168.0.0 mask 255.255.0.0 nomodify notrap <span class="c1">#对192.168.0.0/16网段授权访问 </span>
restrict 10.0.0.0 mask 255.0.0.0 nomodify notrap <span class="c1">#对10.0.0.0/8网段授权访问 </span>
restrict 172.16.1.100 mask 255.255.255.255 nomodify notrap <span class="c1">#只对IP为172.16.1.10授权访问 </span>
fudge 127.0.0.1 stratum <span class="m">10</span> <span class="c1">#设置本地时间级别是10，如果上级时间服务器均失效，对外发布本地时间。</span>
server 127.0.0.1 <span class="c1"># 如果公网NTP不可用时，将使用Local时间作为NTP服务提供给NTP Client。 </span>
server ntp.ntsc.ac.cn iburst prefer <span class="c1">#国家授时中心 </span>
server 0.centos.pool.ntp.org iburst 
server 1.centos.pool.ntp.org iburst 
server 2.centos.pool.ntp.org iburst 
server 3.centos.pool.ntp.org iburst 

includefile /etc/ntp/crypto/pw 
cdisable monitor
</code></pre></td></tr></table>
</div>
</div><ul>
<li>restrict参数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">kod 使用kod技术防范“kiss of death”攻击 
ignore 拒绝任何NTP连接 
nomodify 用户端不能使用ntpc,ntpq修改时间服务器参数，可以进行网络校时 
noquery 用户端不能使用ntpc,ntpq查询时间服务器参数，可以进行网络校时 
notrap 不提供远程日志功能 
notrust 拒绝没有认证的客户端 
restrict ip 或者 restrict IP地址 + mask + 子网掩码 + 参数 例如:restrict default nomodify notrap nopeer noquery <span class="c1">#默认拒绝所有访问 只可以同步时间 </span>
restrict 211.71.14.254 mask 255.255.255.0 <span class="c1">#添加允许211.71.14.254/24网段访问 </span>
restrict 10.111.1.1 mask 255.0.0.0 nomodify <span class="c1">#添加10.0.0.0/8网段访问</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>server 参数</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">server    用于设定ntp同步时间的外网时间服务器 
prefer    默认上级时间服务器 
burst     当一个运程NTP服务器可用时，向它发送一系列的并发包进行检测。 
iburst    当一个运程NTP服务器不可用时，向它发送一系列的并发包进行检测
</code></pre></td></tr></table>
</div>
</div><h4 id="313-ntpd启动和验证">3.1.3 ntpd启动和验证</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">systemctl <span class="nb">enable</span> ntpd 
systemctl start ntpd
</code></pre></td></tr></table>
</div>
</div><ul>
<li>验证ntpd运行情况</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@localhost packages<span class="o">]</span><span class="c1"># netstat -nap|grep ntpd </span>
udp 	<span class="m">0</span> 	<span class="m">0</span> 192.168.56.101:123 	  	0.0.0.0:* 			16037/ntpd 
udp 	<span class="m">0</span> 	<span class="m">0</span> 127.0.0.1:123 		  	0.0.0.0:* 			16037/ntpd 
udp 	<span class="m">0</span> 	<span class="m">0</span> 0.0.0.0:123 			  	0.0.0.0:* 			16037/ntpd 
udp6 	<span class="m">0</span> 	<span class="m">0</span> fe80::1c7b:80ff:fe2:123 	:::* 				16037/ntpd 
udp6 	<span class="m">0</span> 	<span class="m">0</span> ::1:123 				  	:::* 				16037/ntpd 
udp6 	<span class="m">0</span> 	<span class="m">0</span> fe80::a00:27ff:fe46:123 	:::* 				16037/ntpd 
udp6 	<span class="m">0</span> 	<span class="m">0</span> :::123 				  	:::* 				16037/ntpd
</code></pre></td></tr></table>
</div>
</div><h4 id="314-ntpdate客户端安装">3.1.4 ntpdate客户端安装</h4>
<p>请参考第二节的ntpdate工具的使用</p>
<p>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-分割线&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;-</p>
<h3 id="32-chrony服务端">3.2 chrony服务端</h3>
<h4 id="321-chrony安装">3.2.1 chrony安装</h4>
<ul>
<li>在线安装(chrony需要在所有服务端和客户端中执行安装)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">yum install chrony -y
</code></pre></td></tr></table>
</div>
</div><ul>
<li>离线安装</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">rpm -ivh chrony-3.2-2.el7.x86_64.rpm
</code></pre></td></tr></table>
</div>
</div><p><strong>注意：</strong> 本文以centos 7.6的安装为基准，在其它版本中安装可能会出现兼容问题，导致不能成功安装。可到http://vault.centos.org/站点选择下载对应版本的安装包。</p>
<h4 id="322-chrony服务器配置">3.2.2 chrony服务器配置</h4>
<ul>
<li>修改配置/etc/chrony.conf文件 （带注释的为重要配置）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">server ntp.ntsc.ac.cn iburst <span class="c1">#国家授时中心 </span>
server 0.centos.pool.ntp.org iburst 
server 1.centos.pool.ntp.org iburst 
server 2.centos.pool.ntp.org iburst 
server 3.centos.pool.ntp.org iburst 

driftfile /var/lib/chrony/drift 
makestep 1.0 <span class="m">3</span> 
rtcsync 

allow 192.168.0.0/16 <span class="c1">#允许被访问的IP段，请根据实际情况修改 </span>
allow 192.168.56.101/24 <span class="c1">#允许被访问的IP </span>

<span class="nb">local</span> stratum <span class="m">10</span> <span class="c1">#设置本地时间级别是10，如果上级时间服务器均失效，对外发布本地时间。 </span>

logdir /var/log/chrony
</code></pre></td></tr></table>
</div>
</div><h4 id="323-chrony客户端配置">3.2.3 chrony客户端配置</h4>
<ul>
<li>修改配置文件/etc/chrony.conf（有注释行为重要配置）</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">server 192.168.56.101 iburst <span class="c1">#根据实际情况，指向本地授时服务器的IP地址 </span>

driftfile /var/lib/chrony/drift 
makestep 1.0 <span class="m">3</span> 
rtcsync 
logdir /var/log/chrony
</code></pre></td></tr></table>
</div>
</div><h4 id="324-启动服务">3.2.4 启动服务</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">systemctl <span class="nb">enable</span> chronyd.service <span class="c1">#开机自启动 </span>
systemctl start chronyd.service <span class="c1">#启动chrony </span>
systemctl status chronyd.service <span class="c1">#查看chrony服务状态</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="325-验证时间同步状态">3.2.5 验证时间同步状态</h4>
<ul>
<li>MS列中包含^*的行，指明NTP服务当前同步的服务器。当前同步的源为114.118.7.163：</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># chronyc sources </span>
<span class="m">210</span> Number of <span class="nv">sources</span> <span class="o">=</span> <span class="m">2</span> 
MS Name/IP address 			Stratum Poll Reach LastRx Last <span class="nv">sample</span> <span class="o">===============================================================================</span> 
^- stratum2-1.ntp.sea03.us.&gt; 	<span class="m">2</span> 	<span class="m">6</span> 	<span class="m">377</span> 	<span class="m">6</span> 	+40ms<span class="o">[</span> +40ms<span class="o">]</span> +/- 160ms 
^* 114.118.7.163 				<span class="m">2</span> 	<span class="m">6</span> 	<span class="m">77</span> 		<span class="m">16</span> 	-908us<span class="o">[</span>-1190us<span class="o">]</span> +/- 51ms
</code></pre></td></tr></table>
</div>
</div><ul>
<li>查看当前时间是否准确，其中NTP synchronized: yes说明同步成功</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># timedatectl </span>
		Local time: 四 2019-05-30 13:25:29 CST 
	Universal time: 四 2019-05-30 05:25:29 UTC 
		  RTC time: 三 2019-05-29 11:57:46 
		 Time zone: Asia/Shanghai <span class="o">(</span>CST, +0800<span class="o">)</span> 
	   NTP enabled: yes 
  NTP synchronized: yes 
   RTC in <span class="nb">local</span> TZ: no 
        DST active: n/a
</code></pre></td></tr></table>
</div>
</div>]]></description>
</item>
<item>
    <title>Linux系统下提示磁盘空间满,但实际占用却很小</title>
    <link>https://freerun.xyz/linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E6%8F%90%E7%A4%BA%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E6%BB%A1%E4%BD%86%E5%AE%9E%E9%99%85%E5%8D%A0%E7%94%A8%E5%8D%B4%E5%BE%88%E5%B0%8F/</link>
    <pubDate>Wed, 16 Mar 2022 20:14:51 &#43;0800</pubDate>
    <author>Ylimhs</author>
    <guid>https://freerun.xyz/linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E6%8F%90%E7%A4%BA%E7%A3%81%E7%9B%98%E7%A9%BA%E9%97%B4%E6%BB%A1%E4%BD%86%E5%AE%9E%E9%99%85%E5%8D%A0%E7%94%A8%E5%8D%B4%E5%BE%88%E5%B0%8F/</guid>
    <description><![CDATA[<p>因为公司放在测试服务器上的服务比较多，磁盘经常性会满。以前满过几次，因为时间比较赶，每次只是草率的删掉一点log或者临时文件，到今天早上又发生一起事故，依然是磁盘空间满，看了一下好像没什么东西可以删了，才静下心来慢慢研究解决。</p>
<p>系统：Ubuntu14.04 x64
磁盘名称：/data
磁盘空间：200G</p>
<h4 id="错误描述">错误描述：</h4>
<pre><code>今早发现磁盘空间满，服务数据写不进数据库中，使用du -h --max-depth=1命令查看大文件，
发现文件只占100G，然而使用df -h 命令查看时，磁盘用了200G占用了百分之一百。其中100G的空间莫名其妙就没有了
</code></pre>
<h4 id="解决方法">解决方法：</h4>
<pre><code>用lsof检查后才发现原因是，有文件被删除，而进程还活着，因而造成还占用空间的现象。可以通过命令 lsof |grep deleted 来进行查看
</code></pre>
<p></p>
<p>把这些进程删掉就可以了，批量杀死进程命令</p>
<p>lsof |grep delete | grep -v grep | awk &lsquo;{print $2}&rsquo; | xargs kill -9</p>
<p>期间可能会等一段时间，等杀完后，重新 df -h 查看，磁盘空间多出来了87G</p>
<p></p>
]]></description>
</item>
<item>
    <title>普罗米修斯Prometheus</title>
    <link>https://freerun.xyz/prometheus-%E7%9B%91%E6%8E%A7%E9%83%A8%E7%BD%B2-last/</link>
    <pubDate>Wed, 20 Oct 2021 11:40:40 &#43;0800</pubDate>
    <author>Ylimhs</author>
    <guid>https://freerun.xyz/prometheus-%E7%9B%91%E6%8E%A7%E9%83%A8%E7%BD%B2-last/</guid>
    <description><![CDATA[<h2 id="1prometheus-主服务的下载与部署">1、prometheus 主服务的下载与部署</h2>
<h3 id="11创建安装目录和下载部署包并解压--下载x86安装包packageprometheus-2271linux-amd64targz">1.1创建安装目录和下载部署包并解压  <a href="/package/prometheus-2.27.1.linux-amd64.tar.gz" rel="">下载x86安装包</a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mkdir -p /data/monitor/prometheus
<span class="c1">#下载prometheus包，pakage文件夹中有下载好的包</span>
<span class="c1">#wget https://github.com/prometheus/prometheus/releases/download/v2.27.1/prometheus-2.27.1.linux-amd64.tar.gz</span>

<span class="c1">#解压prometheus包，并且解压后/data/monitor/prometheus里去除prometheus-2.27.1.linux-amd64文件目录</span>
tar -zxvf prometheus-2.27.1.linux-amd64.tar.gz -C /data/monitor/prometheus --strip-components <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="12配置prometheus启动文件">1.2配置Prometheus启动文件</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">cat &gt; /etc/systemd/system/prometheus.service <span class="s">&lt;&lt; EOF
</span><span class="s">[Unit]
</span><span class="s">Description=prometheus Service
</span><span class="s">After=network.target
</span><span class="s">After=network-online.target
</span><span class="s">Wants=network-online.target
</span><span class="s">[Service]
</span><span class="s">Type=simple
</span><span class="s">WorkingDirectory=/data/monitor/prometheus
</span><span class="s">ExecStart=/data/monitor/prometheus/prometheus --config.file=prometheus.yml --web.enable-lifecycle --web.external-url=https://freerun.xyz/prometheus
</span><span class="s">ExecStop=/usr/bin/curl -X POST http://localhost:9090/prometheus/-/quit
</span><span class="s">Restart=on-failure
</span><span class="s">RestartSec=5
</span><span class="s">LimitNOFILE=65536
</span><span class="s">[Install]
</span><span class="s">WantedBy=multi-user.target
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>注：可以把启动文件直接放到/etc/systemd/system/目录下</strong>    <a href="/%e5%90%af%e5%8a%a8%e6%96%87%e4%bb%b6/prometheus.service" rel="">下载prometheus启动文件</a>
</p>
<p></p>
<h3 id="13-设置prometheus开机自启动">1.3 设置Prometheus开机自启动</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">systemctl daemon-reload
systemctl <span class="nb">enable</span> prometheus
systemctl start prometheus
</code></pre></td></tr></table>
</div>
</div><h3 id="14-测试验证prometheus是否启动成功访问-ip9090prometheus">1.4 测试，验证Prometheus是否启动成功：访问 IP:9090/prometheus/</h3>
<p></p>
<h2 id="2部署-exporter采集节点信息">2、部署 exporter采集节点信息</h2>
<h3 id="21创建安装目录和下载部署包并解压--下载x86安装包packagenode_exporter-112linux-amd64targz-使用-uname--a查询架构下载arm安装包packagenode_exporter-112linux-arm64targz">2.1创建安装目录和下载部署包并解压  <a href="/package/node_exporter-1.1.2.linux-amd64.tar.gz" rel="">下载x86安装包</a>
 使用 uname -a查询架构，<a href="/package/node_exporter-1.1.2.linux-arm64.tar.gz" rel="">下载arm安装包</a>
</h3>
<p><strong>(其他版本下载地址：https://github.com/prometheus/node_exporter/releases)</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mkdir -p /data/monitor/node_exporter
<span class="c1">#wget https://github.com/prometheus/node_exporter/releases/download/v1.1.2/node_exporter-1.1.2.linux-amd64.tar.gz</span>
tar -zxvf node_exporter-1.1.2.linux-amd64.tar.gz -C /data/monitor/node_exporter --strip-components <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="22配置node_exporter-服务">2.2配置node_exporter 服务</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">cat &gt; /etc/systemd/system/node_exporter.service <span class="s">&lt;&lt;EOF
</span><span class="s">[Unit]
</span><span class="s">Description=node-exporter Service
</span><span class="s">After=network.target
</span><span class="s">After=network-online.target
</span><span class="s">Wants=network-online.target
</span><span class="s">[Service]
</span><span class="s">Type=simple
</span><span class="s">WorkingDirectory=/data/monitor/node_exporter
</span><span class="s">ExecStart=/data/monitor/node_exporter/node_exporter --web.listen-address=0.0.0.0:9100
</span><span class="s">Restart=on-failure
</span><span class="s">RestartSec=5
</span><span class="s">LimitNOFILE=65536
</span><span class="s">[Install]
</span><span class="s">WantedBy=multi-user.target
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>注：可以把启动文件直接放到/etc/systemd/system/目录下</strong>     <a href="/%e5%90%af%e5%8a%a8%e6%96%87%e4%bb%b6/node-exporter.service" rel="">下载node-exporter启动文件</a>
</p>
<p></p>
<h3 id="23-设置node_exporter开机自启动">2.3 设置node_exporter开机自启动</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">systemctl daemon-reload
systemctl <span class="nb">enable</span> node-exporter
systemctl start node-exporter
</code></pre></td></tr></table>
</div>
</div><h3 id="24-测试验证node_exporter是否启动成功访问-ip9100">2.4 测试，验证node_exporter是否启动成功：访问 IP:9100</h3>
<p></p>
<h3 id="25-把-node_exporter-这个采集程序接配置到prometheusyml">2.5 把 node_exporter 这个采集程序接⼊配置到prometheus.yml</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="c"># my global config</span><span class="w">
</span><span class="w"></span><span class="nt">global</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w">     </span><span class="l">15s</span><span class="w"> </span><span class="c"># Set the scrape interval to every 15 seconds. Default is every 1 minute.</span><span class="w">
</span><span class="w">  </span><span class="nt">evaluation_interval</span><span class="p">:</span><span class="w"> </span><span class="l">15s</span><span class="w"> </span><span class="c"># Evaluate rules every 15 seconds. The default is every 1 minute.</span><span class="w">
</span><span class="w">  </span><span class="c"># scrape_timeout is set to the global default (10s).</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># Alertmanager configuration</span><span class="w">
</span><span class="w"></span><span class="nt">alerting</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">alertmanagers</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="nt">static_configs</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="nt">targets</span><span class="p">:</span><span class="w">
</span><span class="w">      </span><span class="c"># - alertmanager:9093</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># Load rules once and periodically evaluate them according to the global &#39;evaluation_interval&#39;.</span><span class="w">
</span><span class="w"></span><span class="nt">rule_files</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="c"># - &#34;first_rules.yml&#34;</span><span class="w">
</span><span class="w">  </span><span class="c"># - &#34;second_rules.yml&#34;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c"># A scrape configuration containing exactly one endpoint to scrape:</span><span class="w">
</span><span class="w"></span><span class="c"># Here it&#39;s Prometheus itself.</span><span class="w">
</span><span class="w"></span><span class="nt">scrape_configs</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="c"># The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.</span><span class="w">
</span><span class="w">  </span>- <span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;prometheus&#39;</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="c"># metrics_path defaults to &#39;/metrics&#39;</span><span class="w">
</span><span class="w">    </span><span class="c"># scheme defaults to &#39;http&#39;.</span><span class="w">
</span><span class="w">
</span><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;localhost:9090&#39;</span><span class="p">]</span><span class="w">
</span><span class="w">    
</span><span class="w">  </span>- <span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;node-exporter&#39;</span><span class="w">
</span><span class="w">    
</span><span class="w">    </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l">5s</span><span class="w">
</span><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;localhost:9100&#39;</span><span class="p">,</span><span class="s1">&#39;10.9.0.1:9100&#39;</span><span class="p">]</span><span class="w">
</span><span class="w">      </span><span class="nt">labels</span><span class="p">:</span><span class="w"> 
</span><span class="w">        </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;web&#39;</span><span class="w">
</span><span class="w">        </span><span class="nt">annotation</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;节点信息采集&#39;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p><strong>导⼊node_exporter 后，重新载⼊配置 :</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">curl -X POST http://localhost:9090/prometheus/-/reload
</code></pre></td></tr></table>
</div>
</div><h2 id="3安装grafana展示">3、安装grafana展示</h2>
<h3 id="31-创建安装目录与下载部署包--下载x86安装包packagegrafana-757linux-amd64targz">3.1 创建安装目录与下载部署包  <a href="/package/grafana-7.5.7.linux-amd64.tar.gz" rel="">下载x86安装包</a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mkdir -p /data/monitor/grafana
<span class="c1">#wget https://dl.grafana.com/oss/release/grafana-7.5.7.linux-amd64.tar.gz</span>
tar -zxvf grafana-7.5.7.linux-amd64.tar.gz -C /data/monitor/grafana --strip-components <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="32-配置grafana-服务--下载grafana启动文件启动文件grafanaservice">3.2 配置grafana 服务  <a href="/%e5%90%af%e5%8a%a8%e6%96%87%e4%bb%b6/grafana.service" rel="">下载grafana启动文件</a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">cat &gt; /etc/systemd/system/grafana.service <span class="s">&lt;&lt;EOF
</span><span class="s">[Unit]
</span><span class="s">Description=grafana Service
</span><span class="s">After=network.target
</span><span class="s">After=network-online.target
</span><span class="s">Wants=network-online.target
</span><span class="s">[Service]
</span><span class="s">Type=simple
</span><span class="s">WorkingDirectory=/data/monitor/grafana
</span><span class="s">ExecStart=/data/monitor/grafana/bin/grafana-server web
</span><span class="s">Restart=on-failure
</span><span class="s">RestartSec=5
</span><span class="s">LimitNOFILE=65536
</span><span class="s">[Install]
</span><span class="s">WantedBy=multi-user.target
</span><span class="s">EOF</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="33-设置grafana-开机自启动">3.3 设置grafana 开机自启动</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">systemctl daemon-reload
systemctl <span class="nb">enable</span> grafanasy
stemctl start grafana
</code></pre></td></tr></table>
</div>
</div><h3 id="34-测试访问ip3000默认登录账户和密码都是admin进后界面如下">3.4 测试，访问：ip:3000（默认登录账户和密码都是admin，进⼊后界面如下）</h3>
<p></p>
<h2 id="4监控配置">4、监控配置</h2>
<h3 id="41-查看prometheus管理后台是否有采集到服务器的信息">4.1 查看Prometheus管理后台是否有采集到服务器的信息</h3>
<p></p>
<h3 id="42-配置grafana管理后台">4.2 配置grafana管理后台</h3>
<p></p>
<p></p>
<h3 id="43-导监控模板保存基础监控大盘官网下载地址httpsgrafanacomgrafanadashboards8919-注释与官网下载的基础监控大盘一样选择一个下载就行大盘配置基础监控大盘json">4.3 导⼊监控模板，保存。<a href="https://grafana.com/grafana/dashboards/8919" target="_blank" rel="noopener noreffer">基础监控大盘官网下载地址</a>
 注释：<a href="/%e5%a4%a7%e7%9b%98%e9%85%8d%e7%bd%ae/%e5%9f%ba%e7%a1%80%e7%9b%91%e6%8e%a7%e5%a4%a7%e7%9b%98.json" rel="">与官网下载的基础监控大盘一样，选择一个下载就行</a>
</h3>
<p></p>
<p></p>
<h3 id="44查看服务器的基础监控">4.4查看服务器的基础监控</h3>
<p></p>
<h2 id="5监控里约网关接调用情况">5、监控里约网关接⼝调用情况</h2>
<h3 id="1添加-es-数据源">1.添加 ES 数据源</h3>
<p></p>
<p></p>
<h3 id="2导-json-模板rio-sg-access日志大盘-1617280890686json下载日志大盘大盘配置rio-sg-access日志大盘-1617280890686json">2.导⼊ json 模板（Rio-SG-Access日志大盘-1617280890686.json）<a href="/%e5%a4%a7%e7%9b%98%e9%85%8d%e7%bd%ae/Rio-SG-Access%e6%97%a5%e5%bf%97%e5%a4%a7%e7%9b%98-1617280890686.json" rel="">下载日志大盘</a>
</h3>
<p></p>
<p></p>
<h2 id="6部署部-mysqld_exporter采集节点信息"><strong>6</strong>、部署部 mysqld_exporter采集节点信息</h2>
<h3 id="61在数据库服务器上执行以下操作在">6.1在数据库服务器上执行以下操作在</h3>
<h4 id="611官网下载包httpsprometheusiodownloadmysqld_exporter----注释与官网下载的安装包一样选一个下载就行packagemysqld_exporter-0130linux-amd64targz"><strong>6.1.1</strong><a href="https://prometheus.io/download/#mysqld_exporter" target="_blank" rel="noopener noreffer">官网下载包</a>
    注释：<a href="/package/mysqld_exporter-0.13.0.linux-amd64.tar.gz" rel="">与官网下载的安装包一样，选一个下载就行</a>
</h4>
<p></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mkdir -p /data/monitor/mysqld_exporter
tar -zxvf mysqld_exporter-0.13.0.linux-amd64.tar.gz -C /data/monitor/mysqld_exporter/ --strip-components <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="612配置mycnf"><strong>6.1.2</strong>配置.my.cnf</h4>
<p>.my.cnf默认放置在启动用户的家目录，启动时无需指定；也可以随意放置在任意目录，在启动时通过 <code>--config.my-cnf={conf_dir}/.my.cnf</code>指定配置文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">#正常这里没有.my.cnf文件，需要创建.my.cnf文件</span>
vim /data/monitor/mysqld_exporter/.my.cnf
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">[client]
host=localhost
user=root
port=3306
password=root # 数据库密码
</code></pre></td></tr></table>
</div>
</div><h4 id="613启动">6.1.3启动</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> /data/monitor/mysqld_exporter/
<span class="c1">#创建start.sh脚本</span>
vim start.sh
</code></pre></td></tr></table>
</div>
</div><p><strong>start.sh脚本内容如下：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="cp">#!/bin/bash
</span><span class="cp"></span>nohup ./mysqld_exporter --config.my-cnf<span class="o">=</span>/data/monitor/mysqld_exporter/.my.cnf <span class="p">&amp;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">chmod <span class="m">744</span> start.sh
</code></pre></td></tr></table>
</div>
</div><p><strong>注册服务</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">#创建启动文件</span>
vim /etc/systemd/system/mysqld_exporter.service
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>mysqld_exporter service
<span class="nv">After</span><span class="o">=</span>network.target
<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">Type</span><span class="o">=</span>forking
<span class="nv">WorkingDirectory</span><span class="o">=</span>/data/monitor/mysqld_exporter
<span class="nv">ExecStart</span><span class="o">=</span>/data/monitor/mysqld_exporter/start.sh
<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">#设置开机自启</span>
systemctl daemon-reload
systemctl <span class="nb">enable</span> mysqld_exporter
stemctl start mysqld_exporter
</code></pre></td></tr></table>
</div>
</div><h4 id="614-启动后的访问端是-启-9104访问访-http数据库服务器-数-ip9104metrics">6.1.4 启动后的访问端⼝是 启 9104：访问访 http://数据库服务器 数 ip:9104/metrics</h4>
<p></p>
<h3 id="62-把-mysql_exporter-这个采集程序接配置到-这-prometheusyml-参照下图参考文件prometheusyml">6.2 把 mysql_exporter 这个采集程序接⼊配置到 这 prometheus.yml 参照下图<a href="/prometheus.yml" rel="">参考文件</a>
</h3>
<p></p>
<p><strong>导⼊node_exporter 后，重新载⼊配置 :</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">curl -X POST http://localhost:9090/prometheus/-/reload
</code></pre></td></tr></table>
</div>
</div><h3 id="63配置配-grafana管理后台这一步可以省略">6.3配置配 grafana管理后台(这一步可以省略)</h3>
<p></p>
<h4 id="631-上传上-mysql监控模板--下载更多面板链接httpsgrafanacomgrafanadashboardssearchmysql">6.3.1 上传上 mysql监控模板  <a href="https://grafana.com/grafana/dashboards?search=mysql" target="_blank" rel="noopener noreffer">下载更多面板链接</a>
</h4>
<p></p>
<p><strong>注：<a href="/%e5%a4%a7%e7%9b%98%e9%85%8d%e7%bd%ae/mysql.json" rel="">下载文mysql大盘</a>
</strong></p>
<p></p>
<p></p>
<h2 id="7-设置邮件告警">7、 设置邮件告警</h2>
<p><strong>1、 修改修 grafana 告警配置文件 告 SMTP 邮箱配置修改邮箱相关的配置，例如下面。重启 grafan 系统。 vim /data/monitor/grafana/conf/defaults.ini</strong></p>
<p></p>
<h3 id="2配置通知邮箱-配-在-grafana">2、配置通知邮箱 配 在 grafana</h3>
<p></p>
<p></p>
<p></p>
<p><strong>关键字： Template variables are not supported in alert queries</strong></p>
<p><strong>分析： 分 由于Prometheus 告警不支持变量，而模板面板使用了⼤量变量，导致不可使用告警。 解决办法：单独配置个告警的视图，用正则匹配出所有的主机 或者每台主机单独⼀个查询 语句</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-xml" data-lang="xml">(1 - (node_memory_MemAvailable_bytes{instance=&#34;101.133.173.223:9100&#34;} / (node_memory_MemTotal_bytes{instance=&#34;101.133.173.223:9100&#34;})))*100
</code></pre></td></tr></table>
</div>
</div><p></p>
<p></p>
<h2 id="8设置其他告警演示设置企业微信群告警">8、设置其他告警，演示设置企业微信群告警</h2>
<p><strong>注： PrometheusAlert全家桶是开源的运维告警中心消息转发系统,支持主流的监控系统Prometheus,Zabbix,日志系统Graylog和数据可视化系统Grafana发出的预警消息,支持钉钉,微信,华为云短信,腾讯云短信,腾讯云电话,阿里云短信,阿里云电话等</strong></p>
<p><a href="https://gitee.com/feiyu563/PrometheusAlert" target="_blank" rel="noopener noreffer">gitee项目地址</a>
  <a href="/package/linux.zip" rel="">下载包</a>
</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">#如果下载不下来，package文件夹中有liunx.zip包</span>
wget https://github.com/feiyu563/PrometheusAlert/releases/download/v4.4.0/linux.zip

mkdir -p /data/monitor/linux_PrometheusAlert

<span class="c1">#确保解压后文件在/data/monitor/linux_PrometheusAlert夹中</span>
mv linux.zip /data/monitor/linux_PrometheusAlert/ <span class="o">&amp;&amp;</span> <span class="nb">cd</span> /data/monitor/linux_PrometheusAlert/ <span class="o">&amp;&amp;</span> unzip linux.zip <span class="o">&amp;&amp;</span> <span class="nb">cd</span> linux/ <span class="o">&amp;&amp;</span> mv * ../ <span class="o">&amp;&amp;</span> <span class="nb">cd</span> ../ <span class="o">&amp;&amp;</span> rm -rf linux/

<span class="c1">#运行PrometheusAlert</span>
<span class="c1"># ./PrometheusAlert (#后台运行请执行 nohup ./PrometheusAlert &amp;)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="81启动">8.1启动</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">chmod <span class="m">777</span> PrometheusAlert

<span class="nb">cd</span> /data/monitor/linux_PrometheusAlert
<span class="c1">#创建start.sh脚本</span>
vim start.sh
</code></pre></td></tr></table>
</div>
</div><p><strong>start.sh脚本内容如下：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="cp">#!/bin/bash
</span><span class="cp"></span>nohup /data/monitor/linux_PrometheusAlert/PrometheusAlert <span class="p">&amp;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">chmod <span class="m">744</span> start.sh
</code></pre></td></tr></table>
</div>
</div><p><strong>注册服务</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">#创建启动文件</span>
vim /etc/systemd/system/PrometheusAlert.service
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>mysqld_exporter service
<span class="nv">After</span><span class="o">=</span>network.target
<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">Type</span><span class="o">=</span>forking
<span class="nv">WorkingDirectory</span><span class="o">=</span>/data/monitor/linux_PrometheusAlert/
<span class="nv">ExecStart</span><span class="o">=</span>/data/monitor/linux_PrometheusAlert/start.sh
<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1">#设置开机自启</span>
systemctl daemon-reload
systemctl <span class="nb">enable</span> PrometheusAlert
systemctl start PrometheusAlert

<span class="c1">#启动后可使用浏览器打开以下地址查看：http://127.0.0.1:8080</span>
<span class="c1">#默认登录帐号和密码在conf/app.conf中有配置</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="82-企业微信告警配置">8.2 企业微信告警配置</h3>
<p>打开企业微信,进入企业微信群中,选择群设置&ndash;&gt;群机器人&ndash;&gt;添加，可参下图：</p>
<p></p>
<p></p>
<p><strong>复制图中的Webhook地址，并填入PrometheusAlert配置文件app.conf中对应配置项即可。</strong></p>
<p></p>
<p><strong>企业微信机器人目前支持的markdown语法是如下的子集：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-markdown" data-lang="markdown">标题 （支持1至6级标题，注意#与文字中间要有空格）
<span class="gh"># 标题一
</span><span class="gh"></span><span class="gu">## 标题二
</span><span class="gu">### 标题三
</span><span class="gu">#### 标题四
</span><span class="gu">##### 标题五
</span><span class="gu">###### 标题六
</span><span class="gu"></span>
加粗
<span class="gs">**bold**</span>

链接
[<span class="nt">这是一个链接</span>](<span class="na">http://work.weixin.qq.com/api/doc</span>)

行内代码段（暂不支持跨行）
<span class="sb">`code`</span>

引用
<span class="k">&gt; </span><span class="ge">引用文字
</span><span class="ge"></span>
字体颜色(只支持3种内置颜色)
<span class="p">&lt;</span><span class="nt">font</span> <span class="na">color</span><span class="o">=</span><span class="s">&#34;info&#34;</span><span class="p">&gt;</span>绿色<span class="p">&lt;/</span><span class="nt">font</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">font</span> <span class="na">color</span><span class="o">=</span><span class="s">&#34;comment&#34;</span><span class="p">&gt;</span>灰色<span class="p">&lt;/</span><span class="nt">font</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">font</span> <span class="na">color</span><span class="o">=</span><span class="s">&#34;warning&#34;</span><span class="p">&gt;</span>橙红色<span class="p">&lt;/</span><span class="nt">font</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><p></p>
<p><strong>测试发送机器人</strong></p>
<p></p>
<p></p>
<h4 id="grafana内置固定消息模版接入配置">grafana（内置固定消息模版）接入配置</h4>
<p><strong>首先使用管理员或者具有告警配置权限的帐号登录进Grafana管理页面，登录后进入notification channels配置。</strong></p>
<p></p>
<p></p>
<p><strong>注意这里的url地址填写上自己部署所在的url</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">/grafana/dingding  处理Grafana告警消息转发到钉钉接口，可选参数(ddurl)
/grafana/weixin    处理Grafana告警消息转发到微信接口，可选参数(wxurl)
/grafana/feishu    处理Grafana告警消息转发到飞书接口，可选参数(fsurl)
/grafana/txdx      处理Grafana告警消息转发到腾讯云短信接口，可选参数(phone)
/grafana/txdh      处理Grafana告警消息转发到腾讯云电话接口，可选参数(phone)
/grafana/hwdx      处理Grafana告警消息转发到华为云短信接口，可选参数(phone)
/grafana/bddx      处理Grafana告警消息转发到百度云短信接口，可选参数(phone)
/grafana/alydx     处理Grafana告警消息转发到阿里云短信接口，可选参数(phone)
/grafana/rlydh     处理Grafana告警消息转发到容联云电话接口，可选参数(phone)
/grafana/email     处理Grafana告警消息转发到email接口，可选参数(email)
/grafana/tg        处理Grafana告警消息转发到telegram接口
/grafana/workwechat处理Grafana告警消息转发到企业微信应用接口
</code></pre></td></tr></table>
</div>
</div><p></p>
<p><strong>效果</strong></p>
<p></p>
<h2 id="9参考文档">9.参考文档</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">#Prometheus Alert
https://gitee.com/feiyu563/PrometheusAlert#/feiyu563/PrometheusAlert/blob/master/doc/readme/grafana.md

#grafana创建告警
https://grafana.com/docs/grafana/latest/alerting/old-alerting/create-alerts/
</code></pre></td></tr></table>
</div>
</div><p>注释：大盘json文件  <a href="/%e5%a4%a7%e7%9b%98%e9%85%8d%e7%bd%ae/%e6%94%bf%e5%8a%a1%e5%be%ae%e4%bf%a1%e5%a4%a7%e7%9b%98.json" rel="">下载</a>
</p>
<p><strong>Prometheus常用查询函数 产考连接:https://www.cnblogs.com/xjzyy/p/15346954.html</strong></p>
]]></description>
</item>
<item>
    <title>Linux扩容home目录</title>
    <link>https://freerun.xyz/linux%E6%89%A9%E5%AE%B9home%E7%9B%AE%E5%BD%95/</link>
    <pubDate>Sat, 18 Sep 2021 15:19:40 &#43;0800</pubDate>
    <author>Ylimhs</author>
    <guid>https://freerun.xyz/linux%E6%89%A9%E5%AE%B9home%E7%9B%AE%E5%BD%95/</guid>
    <description><![CDATA[<p>机器装了一块新硬盘, 先使用sudo fdisk -l看看新添加的硬盘叫什么, 我的叫sdb接下来按照这篇文章操作即可, 该文章新挂载的硬盘叫sdb1, 注意替换成自己的硬盘名</p>
<p>注释：先使用<code>sudo fdisk -l</code>看看新添加的硬盘叫什么,我的叫sdb1</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">lsblk -f <span class="c1">#列出块设备列表，-f用于输出文件系统的详细信息</span>
</code></pre></td></tr></table>
</div>
</div><p>0.格式化分区</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mkfs.ext4 /dev/sdb1
</code></pre></td></tr></table>
</div>
</div><p>1.创建目录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mkdir /media/home
</code></pre></td></tr></table>
</div>
</div><p>2.把/dev/sdb1挂载到/media/home</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mount /dev/sdb1 /media/home
</code></pre></td></tr></table>
</div>
</div><p>3.执行几次sync命令,确保文件系统数据都落盘</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">sync  <span class="c1">#执行三次或更多次sync命令</span>

<span class="c1">#在Linux系统中，为了加快数据的读取速度，所以在默认的情况中， 某些已经加载内存中的数据将不会直接被写回硬盘，而是先缓存在内存当中，如此一来， 如果一个数据被你重复的改写，那么由于他尚未被写入硬盘中，因此可以直接由内存当中读取出来， 在速度上一定是快上相当多的！</span>

<span class="c1">#不过，如此一来也造成些许的困扰，那就是万一你的系统因为某些特殊情况造成不正常关机 (例如停电或者是不小心踢到power)时，由于数据尚未被写入硬盘当中，哇！所以就会造成数据的升级不正常啦！ 那要怎么办呢？这个时候就需要sync这个命令来进行数据的写入动作啦！ 直接在文字接口下输入sync，那么在内存中尚未被升级的数据，就会被写入硬盘中！所以，这个命令在系统关机或重新启动之前， 很重要喔！最好多运行几次(2-4次)！</span>
</code></pre></td></tr></table>
</div>
</div><p>4.同步/home到/media/home</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">rsync -aXS /home/. /media/home/.
<span class="c1">#或者加上-v详细模式输出 rsync -avXS /home/. /media/home/.</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># Options
-v, --verbose 			# 详细模式输出。(打印一些信息，比如文件列表、文件数量等)
-q, --quiet 			# 精简输出模式。
-c, --checksum 			# 打开校验开关，强制对文件传输进行校验。
-a, --archive 			# 归档模式，表示以递归方式传输文件，并保持所有文件属性，等于-rlptgoD。
-r, --recursive 		# 对子目录以递归模式处理。
-R, --relative 			# 使用相对路径信息。
-b, --backup 			# 创建备份，也就是对于目的已经存在有同样的文件名时，将老的文件重新命名为~filename。可以使用--suffix选项来指定不同的备份文件前缀。
--backup-dir 			# 将备份文件(如~filename)存放在在目录下。
-suffix=SUFFIX 			# 定义备份文件前缀。
-u, --update 			# 仅仅进行更新，也就是跳过所有已经存在于DST，并且文件时间晚于要备份的文件，不覆盖更新的文件。
-l, --links 			# 保留软链结。
-L, --copy-links 		# 想对待常规文件一样处理软链结。
--copy-unsafe-links		# 仅仅拷贝指向SRC路径目录树以外的链结。
--safe-links 			# 忽略指向SRC路径目录树以外的链结。
-H, --hard-links 		# 保留硬链结。
-p, --perms 			# 保持文件权限。
-o, --owner 			# 保持文件属主信息。
-g, --group 			# 保持文件属组信息。
-D, --devices 			# 保持设备文件信息。
-t, --times 			# 保持文件时间信息。
-S, --sparse 			# 对稀疏文件进行特殊处理以节省DST的空间。
-n, --dry-run			# 现实哪些文件将被传输。
-w, --whole-file 		# 拷贝文件，不进行增量检测。
-x, --one-file-system	# 不要跨越文件系统边界。
-X, --xattrs			# 保留扩展属性
-B, --block-size=SIZE	# 检验算法使用的块尺寸，默认是700字节。
-e, --rsh=command 		# 指定使用rsh、ssh方式进行数据同步。
--rsync-path=PATH 		# 指定远程服务器上的rsync命令所在路径信息。
-C, --cvs-exclude 		# 使用和CVS一样的方法自动忽略文件，用来排除那些不希望传输的文件。
--existing				# 仅仅更新那些已经存在于DST的文件，而不备份那些新创建的文件。
--delete				# 删除那些DST中SRC没有的文件。
--delete-excluded 		# 同样删除接收端那些被该选项指定排除的文件。
--delete-after 			# 传输结束以后再删除。
--ignore-errors 		# 及时出现IO错误也进行删除。
--max-delete=NUM 		# 最多删除NUM个文件。
--partial				# 保留那些因故没有完全传输的文件，以是加快随后的再次传输。
--force					# 强制删除目录，即使不为空。
--numeric-ids 			# 不将数字的用户和组id匹配为用户名和组名。
--timeout=time 			# ip超时时间，单位为秒。
-I, --ignore-times 		# 不跳过那些有同样的时间和长度的文件。
--size-only 			# 当决定是否要备份文件时，仅仅察看文件大小而不考虑文件时间。
--modify-window=NUM		# 决定文件是否时间相同时使用的时间戳窗口，默认为0。
-T --temp-dir=DIR 		# 在DIR中创建临时文件。
--compare-dest=DIR 		# 同样比较DIR中的文件来决定是否需要备份。
-P						# 等同于 --partial。
--progress				# 显示备份过程。
-z, --compress 			# 对备份的文件在传输时进行压缩处理。
--exclude=PATTERN 		# 指定排除不需要传输的文件模式。
--include=PATTERN 		# 指定不排除而需要传输的文件模式。
--exclude-from=FILE		# 排除FILE中指定模式的文件。
--include-from=FILE		# 不排除FILE指定模式匹配的文件。
--version				# 打印版本信息。
--address				# 绑定到特定的地址。
--config=FILE 			# 指定其他的配置文件，不使用默认的rsyncd.conf文件。
--port=PORT 			# 指定其他的rsync服务端口。
--blocking-io 			# 对远程shell使用阻塞IO。
-stats					# 给出某些文件的传输状态。
--progress				# 在传输时现实传输过程。
--log-format=formAT		# 指定日志文件格式。
--password-file=FILE	# 从FILE中得到密码。
--bwlimit=KBPS 			# 限制I/O带宽，KBytes per second。
-h, --help				# 显示帮助信息。
</code></pre></td></tr></table>
</div>
</div><p>5.同步完成后重命名/home</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mv /home /home_old
</code></pre></td></tr></table>
</div>
</div><p>6.新建/home</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mkdir /home
</code></pre></td></tr></table>
</div>
</div><p>7.取消/dev/sdb1挂载</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">umount /dev/sdb1
</code></pre></td></tr></table>
</div>
</div><p>8.重新挂载/dev/sdb1到home</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">mount /dev/sdb1 /home
</code></pre></td></tr></table>
</div>
</div><p>9.查看/dev/sdb1的UUID</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">blkid
</code></pre></td></tr></table>
</div>
</div><p>10.把UUID复制下来，修改/etc/fstab文件，实现开机自动挂载</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">vim /etc/fstab
mount -a <span class="c1">#将/etc/fstab的所有内容重新加载。</span>
</code></pre></td></tr></table>
</div>
</div><p>在文件最后添加如下内容：
UUID=8da46012-ab9c-434f-a855-2484112fd1a7 /home ext4 nodev,nosuid 0 2</p>
<p>11.保存之后重启系统，查看分区的挂载情况</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">df –Th
</code></pre></td></tr></table>
</div>
</div><p>12.确认一切正常后删除/home_old</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">rm -rf /home_old
</code></pre></td></tr></table>
</div>
</div><p>至此，给/home增加空间的工作就完成了。</p>
]]></description>
</item>
</channel>
</rss>
